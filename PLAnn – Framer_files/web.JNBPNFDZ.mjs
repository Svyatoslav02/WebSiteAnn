import{a as vm,b as ym,c as wm,e as Pm,f as Sm}from"https://app.framerstatic.com/chunk-GMIXTNMU.mjs";import{a as sm}from"https://app.framerstatic.com/chunk-5LPBMS2B.mjs";import{a as Im,b as Mm,c as _n,d as Tm,e as Lm,g as Dm,h as Em,i as jm,k as Nm,l as Vm,m as Fm,n as Um,o as zm,q as Om,r as Hm,s as _m,u as Wm,v as $m,w as Ym}from"https://app.framerstatic.com/chunk-XJBB65RW.mjs";import{a as xm,b as On,c as Cm}from"https://app.framerstatic.com/chunk-MTVIBK3A.mjs";import{a as Bm}from"https://app.framerstatic.com/chunk-DAYE3N5J.mjs";import{a as qm}from"https://app.framerstatic.com/chunk-RAX6F6AK.mjs";import{a as Gm}from"https://app.framerstatic.com/chunk-EDFRUE5N.mjs";import{b as km}from"https://app.framerstatic.com/chunk-6XNIJEFP.mjs";import{a as Hn,b as Rm}from"https://app.framerstatic.com/chunk-LKFJO346.mjs";import{b as Am}from"https://app.framerstatic.com/chunk-OOP2SLYJ.mjs";import"https://app.framerstatic.com/chunk-U4DSFLYQ.mjs";import{$ as tm,A as Ip,B as Mp,C as Ap,D as xa,E as Lp,F as Dp,G as Ep,H as Np,I as Vp,J as Bo,K as Fp,L as Up,M as zp,N as Op,O as Hp,P as qp,Q as Wp,R as $p,S as Fn,T as Gp,U as Yp,V as Zp,W as Qp,X as Xp,Y as Jp,Z as em,_ as om,a as Gr,aa as rm,b as Ws,ba as nm,c as ep,ca as Bn,d as g,da as rr,e as tp,ea as Un,f as np,fa as im,g as ip,ga as am,h as ap,ha as Ca,i as sp,ia as cm,j as lp,ja as ka,k as qe,ka as lm,l as mp,la as dm,m as pt,ma as zn,n as gp,na as It,o as Fo,oa as pm,p as or,pa as mm,q as hp,qa as um,r as bp,ra as fm,s as vp,sa as gm,t as yp,ta as hm,u as wp,ua as bm,v as wa,w as xp,x as Cp,y as Pp,z as Vn}from"https://app.framerstatic.com/chunk-IXHE3LWA.mjs";import"https://app.framerstatic.com/chunk-OKHFY733.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-HXNKUNWW.mjs";import{$a as jn,Cc as _p,Da as Pe,Dc as Kp,Na as We,Ua as dp,Wa as pp,a as Pr,fc as Nn,gb as ae,hb as up,jb as fp,ob as Zo,qc as jp,wa as Y,y as Sr,za as dt}from"https://app.framerstatic.com/chunk-5VCJYZVB.mjs";import{n as op,r as _e}from"https://app.framerstatic.com/chunk-TR6MOJYP.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-XMZBEIDF.mjs";import"https://app.framerstatic.com/chunk-OISFBHTQ.mjs";import"https://app.framerstatic.com/chunk-R7V553AN.mjs";import"https://app.framerstatic.com/chunk-ZX3BN2KX.mjs";import{d as Yd,e as Jd}from"https://app.framerstatic.com/chunk-FMKFFXX4.mjs";import{a as Vo,b as er,c as Fe}from"https://app.framerstatic.com/chunk-PKALJYI3.mjs";import{a as i}from"https://app.framerstatic.com/chunk-O72OVVWV.mjs";import"https://app.framerstatic.com/chunk-VELMAM34.mjs";import{Aa as Ld,Da as Dd,Ea as Ed,Fa as jd,Na as Nd,e as Md,h as Rd,va as Td,ya as Ad}from"https://app.framerstatic.com/chunk-7DXCL7ZC.mjs";import"https://app.framerstatic.com/chunk-ME7CL4EY.mjs";import"https://app.framerstatic.com/chunk-IHOAENGB.mjs";import{Gd as _d,Id as qd,Jd as Wd,Yb as Sd,a as Os,b as Hs,c as _s,d as qs,ea as In,h as sd,i as cd,lb as bd,mc as Vd,td as Ud,vd as zd,wd as Od,xd as Hd}from"https://app.framerstatic.com/chunk-IVMS3BCD.mjs";import{Ca as xd,Oa as Cd,W as gd,oa as yd,ra as wd,sb as $d,t as pd,ub as Gd}from"https://app.framerstatic.com/chunk-6UJZPV6H.mjs";import"https://app.framerstatic.com/chunk-DIE3ZF5U.mjs";import"https://app.framerstatic.com/chunk-6TTJU3MI.mjs";import{K as vd,ja as Id}from"https://app.framerstatic.com/chunk-NYBWZFCE.mjs";import"https://app.framerstatic.com/chunk-O4BUMGKN.mjs";import{Ad as dd,K as nd,Kd as Mn,Ld as lt,Md as md,Tf as M,Uf as Co,Vf as No,Wf as va,Xf as Pd,f as rd,ud as Sn,xb as le,za as id}from"https://app.framerstatic.com/chunk-LSGZWSZP.mjs";import{e as ld}from"https://app.framerstatic.com/chunk-3IKYAU6R.mjs";import"https://app.framerstatic.com/chunk-JRBFLTNY.mjs";import"https://app.framerstatic.com/chunk-YPPIUZBN.mjs";import"https://app.framerstatic.com/chunk-N57XNHE3.mjs";import"https://app.framerstatic.com/chunk-YRPSIIOR.mjs";import{e as Pn}from"https://app.framerstatic.com/chunk-VSADICZG.mjs";import"https://app.framerstatic.com/chunk-P6LO7Y3T.mjs";import"https://app.framerstatic.com/chunk-JB3A7NVR.mjs";import"https://app.framerstatic.com/chunk-HTH46QE2.mjs";import"https://app.framerstatic.com/chunk-BQK5PZHM.mjs";import"https://app.framerstatic.com/chunk-R2C6SYZL.mjs";import{k as Rp,l as Tp,o as Bp}from"https://app.framerstatic.com/chunk-4LC67Q6M.mjs";import{a as Dn,c as rp,g as ya,l as Sp}from"https://app.framerstatic.com/chunk-ZVD2E5YS.mjs";import"https://app.framerstatic.com/chunk-NPAHYYBQ.mjs";import"https://app.framerstatic.com/chunk-TELOETDS.mjs";import"https://app.framerstatic.com/chunk-V67MTYNI.mjs";import{a as kp}from"https://app.framerstatic.com/chunk-YSMEIWYJ.mjs";import{a as ro}from"https://app.framerstatic.com/chunk-TGS6C7QB.mjs";import{a as hd}from"https://app.framerstatic.com/chunk-EGSW2DQN.mjs";import{b as Fd,c as Bd}from"https://app.framerstatic.com/chunk-V7AQZOO6.mjs";import{c as fd}from"https://app.framerstatic.com/chunk-QJY4JOAZ.mjs";import{a as Tn}from"https://app.framerstatic.com/chunk-WAFDZ45U.mjs";import"https://app.framerstatic.com/chunk-FUHKJVIB.mjs";import"https://app.framerstatic.com/chunk-YE25YANI.mjs";import{b as T}from"https://app.framerstatic.com/chunk-53D7VBGE.mjs";import"https://app.framerstatic.com/chunk-7ROZV6LU.mjs";import{a as tr}from"https://app.framerstatic.com/chunk-VMRQQZ5D.mjs";import{b as cp}from"https://app.framerstatic.com/chunk-DWNV3ZW7.mjs";import{c as En}from"https://app.framerstatic.com/chunk-JGMB6PC6.mjs";import{a as An,c as Ln}from"https://app.framerstatic.com/chunk-D7MEQ7Y3.mjs";import{d as Xt}from"https://app.framerstatic.com/chunk-7WZIYSMJ.mjs";import{C as Kt,D as Cn,G as Xl,H as kn,I as uo,J as Jl,K as ed,L as od,O as oo,P as to,V as td,aa as ba,b as $l,c as yn,d as wn,e as Gl,f as Cr,g as xn,h as kr,j as ha,k as Yl,n as Zl,o as Ql,u as Kl,x as Qt}from"https://app.framerstatic.com/chunk-I5U52F3I.mjs";import"https://app.framerstatic.com/chunk-OLYSG3K5.mjs";import"https://app.framerstatic.com/chunk-FE6B55PF.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import"https://app.framerstatic.com/chunk-LRHRDDO6.mjs";import"https://app.framerstatic.com/chunk-V6CRNRNX.mjs";import{a as zs}from"https://app.framerstatic.com/chunk-YNRFYYLL.mjs";import{a as Jt}from"https://app.framerstatic.com/chunk-L6IEVKSV.mjs";import{a as ct}from"https://app.framerstatic.com/chunk-7GSEC7H4.mjs";import"https://app.framerstatic.com/chunk-MRDKGMYO.mjs";import"https://app.framerstatic.com/chunk-52AGHMLA.mjs";import"https://app.framerstatic.com/chunk-K7MB2CG4.mjs";import"https://app.framerstatic.com/chunk-SIY25GBD.mjs";import{s as kd}from"https://app.framerstatic.com/chunk-RPC4MZQS.mjs";import{m as Rn}from"https://app.framerstatic.com/chunk-4MC6YQBU.mjs";import{B as $c,Ca as Yc,Da as Jc,Ka as ma,M as Gc,Rb as el,Sb as rl,Ub as nl,Vb as il,cd as al,cg as Ct,dd as sl,l as qc,te as ll,z as Wc,zg as dl}from"https://app.framerstatic.com/chunk-NUGC6UVX.mjs";import{N as tl,W as jo,e as _c,i as sn,x as ol}from"https://app.framerstatic.com/chunk-C47WLV5F.mjs";import"https://app.framerstatic.com/chunk-U4BSEEGY.mjs";import{b as cl,f as H}from"https://app.framerstatic.com/chunk-UDJRQNTX.mjs";import"https://app.framerstatic.com/chunk-V4TANWPK.mjs";import"https://app.framerstatic.com/chunk-5EVFYJSQ.mjs";import"https://app.framerstatic.com/chunk-FDLRDV2Q.mjs";import"https://app.framerstatic.com/chunk-DEUTLNTO.mjs";import"https://app.framerstatic.com/chunk-J6KHERUP.mjs";import"https://app.framerstatic.com/chunk-TVYYAEV6.mjs";import{$a as fn,Aa as bl,Af as Ul,Be as Yt,Ce as wr,De as _,Df as zl,Ef as Ol,Fa as un,Ge as jl,Hd as Ml,J as ml,Ka as vl,Ke as Nl,Kf as Hl,Lf as _l,M as ul,Me as it,Nc as kl,Nd as Rl,Nf as at,Pa as ua,Q as fl,R as gl,Re as xr,T as hl,Tc as Pl,Te as hn,Tf as ql,Ud as Tl,W as yr,We as Vl,Wf as fa,Xa as yl,Xe as Pt,Yd as Al,cb as wl,dd as Sl,ef as bn,eg as ga,f as pl,fg as Wl,g as dn,h as pn,jb as wo,je as Ll,jf as Fl,kg as st,lb as xl,lg as vn,mf as Bl,qe as Dl,qf as Zt,re as j,se as El,te as Ae,u as mn,ud as Il,xc as Cl,xe as pe,xf as St,ye as gn,ze as kt}from"https://app.framerstatic.com/chunk-ONMKN5SL.mjs";import"https://app.framerstatic.com/chunk-GKKZFBAI.mjs";import{a as ko}from"https://app.framerstatic.com/chunk-25W4MKKO.mjs";import"https://app.framerstatic.com/chunk-446SUSTG.mjs";import"https://app.framerstatic.com/chunk-EMIFBGS6.mjs";import{h as ud}from"https://app.framerstatic.com/chunk-VW3S3HFN.mjs";import{b as xo}from"https://app.framerstatic.com/chunk-TTDW6OC7.mjs";import"https://app.framerstatic.com/chunk-G2I6JQAH.mjs";import{a as Qd}from"https://app.framerstatic.com/chunk-JW2NHOVL.mjs";import{a as G}from"https://app.framerstatic.com/chunk-QFU6OGL3.mjs";import"https://app.framerstatic.com/chunk-66UN7AT2.mjs";import{a as Zd,b as Kd,c as Xd}from"https://app.framerstatic.com/chunk-CTKJD4ES.mjs";import"https://app.framerstatic.com/chunk-YAE4JCTY.mjs";import{F as B,Id as Qc,eh as da,ei as pa,jd as Zc}from"https://app.framerstatic.com/chunk-3264XVKB.mjs";import{$b as lc,$o as nn,Ad as gc,As as zc,Bo as Ac,Ck as nt,Ed as Xr,Ek as vr,Fk as tn,Hd as hc,Hk as Ic,Id as Jr,Lk as sa,Mc as Eo,Oh as wc,Pc as pc,Qc as X,Qh as mo,Tc as mc,Td as bc,Uc as uc,V as Ks,Wi as kc,X as Xs,Xb as cc,Xi as Pc,Ya as tc,Yi as Sc,_o as rn,ap as an,bi as xc,bp as Lc,cp as Dc,dp as Ec,ec as O,fc as z,js as Bc,jt as Oc,l as Te,la as ec,le as en,li as Cc,lt as Hc,nd as fc,os as Uc,qo as Tc,rr as jc,te as vc,tr as Nc,tt as ca,ub as rc,ur as Vc,vd as Qr,vh as yc,wd as Kr,wh as rt,wr as Fc,wu as cn,xa as qt,xh as $t,xn as Mc,xu as ln,yd as He,yh as on,yn as Rc}from"https://app.framerstatic.com/chunk-ZJVC4LMZ.mjs";import"https://app.framerstatic.com/chunk-VXJAAVJQ.mjs";import"https://app.framerstatic.com/chunk-5DSVU7DA.mjs";import"https://app.framerstatic.com/chunk-KD4H3DLZ.mjs";import"https://app.framerstatic.com/chunk-4DUBS6C5.mjs";import{a as ad}from"https://app.framerstatic.com/chunk-PIR2DHQW.mjs";import{c as Kc,d as Xc,j as Gt}from"https://app.framerstatic.com/chunk-HWILUTV2.mjs";import{i as dc}from"https://app.framerstatic.com/chunk-IUXPNGY4.mjs";import"https://app.framerstatic.com/chunk-XFC6OVIX.mjs";import{a as la}from"https://app.framerstatic.com/chunk-4I3XDWXC.mjs";import"https://app.framerstatic.com/chunk-POQKH4YA.mjs";import{a as ia,b as Gs}from"https://app.framerstatic.com/chunk-4AQCMAAQ.mjs";import{a as oc,b as Zr,d as nc,g as ic,m as ac,n as sc,o as Yo,s as aa}from"https://app.framerstatic.com/chunk-OZTZH67X.mjs";import{g as ce,i as de}from"https://app.framerstatic.com/chunk-UA6QSWEI.mjs";import"https://app.framerstatic.com/chunk-AUNF3KWQ.mjs";import{a as Wt,b as N,c as he,d as tt,e as Do,f as Je,h as eo,k as br}from"https://app.framerstatic.com/chunk-XW2R7BKI.mjs";import{a as Ys,i as Zs,l as Qs}from"https://app.framerstatic.com/chunk-PN52YLSE.mjs";import{Vc as po,a as F,b as I,sc as Yr,wd as Js}from"https://app.framerstatic.com/chunk-M7LXWNTO.mjs";import{i as $s}from"https://app.framerstatic.com/chunk-7VTNP6H6.mjs";import{a as na,b as Lo,g as Us}from"https://app.framerstatic.com/chunk-UU3OZJYM.mjs";import{f as $r}from"https://app.framerstatic.com/chunk-6M5LVXBA.mjs";import{A as ta,B as _t,C as Ao,F as ra,J as Go,X as Bs,Y as yo,e as Wr,k as q,l as Ns,n as Vs,q as oa,t as ot,x as To,y as ue}from"https://app.framerstatic.com/chunk-TMEO3FGJ.mjs";import{a as A,b as ie}from"https://app.framerstatic.com/chunk-WNSBRACC.mjs";import{a as Fs}from"https://app.framerstatic.com/chunk-LQILWJHN.mjs";import{e as y,j as Oe,k as $o,l as _r,m as qr}from"https://app.framerstatic.com/chunk-AHQIRSXG.mjs";var{onewayMethodTemplate:nw,voidMethodTemplate:hb,valueMethodTemplate:Pa,streamMethodTemplate:iw}=Us,Sa;(o=>o.service={id:"__UnsplashClient__",fingerprint:"8ee51675b2fe29e5550eb11b6d0b54c1",methods:{listPhotos:{},searchPhotos:{},getRandomPhoto:{},downloadPhoto:{}},newOutgoingWrapper:t=>({listPhotos:Pa.bind(-1,"listPhotos",!0,t),searchPhotos:Pa.bind(-1,"searchPhotos",!0,t),getRandomPhoto:Pa.bind(-1,"getRandomPhoto",!0,t),downloadPhoto:hb.bind(-1,"downloadPhoto",!0,t)})})(Sa||={});var Ia;(n=>{n.service=Sa.service;function o(r){let a=na.shared();return{expect:()=>a.expectWithoutDiscovery(n.service,r),discover:c=>a.discover(n.service,r,c),register:c=>a.register({channel:r,service:n.service,implementation:c})}}n.on=o;async function t(r){na.shared().unregister(r)}n.unregister=t})(Ia||={});Pn("init");$s({name:"web",security:{}});var Qm=y(tc()),Be=y(F());var qn="bottomFooter_bu6twdm",nr="leftAndRightPanelPadding_l10kfgzc",Wn="sortable_s1x6gspv",$n="sortableWithoutFooter_s1j5muy7",Gn="sortableMinHeight_srs44bt";var Mt="scroll_sfde1p6";var be=y(I());function vb(e,o,t){A(!X(o.value));let n=o.value;if(A($t(n)),ue(n))return"Mixed";if(t)return`${n.length} ${(0,Qm.default)("Image",n.length)}`;if(n.length===0)return"0 Items";let r=[];function a(c){if(N(c)){r.push(c);return}if(he(c)){r.push(c.toString());return}if(Wt(c)&&r.push(c?"Yes":"No"),ue(c)){r.push("Mixed");return}}for(let c of n)switch(c.type){case"boolean":case"string":case"number":a(c.value);break;case"color":if(!N(c.value)){a(c.value);break}a(mp(c.value).title);break;case"enum":{let d=e.control;if(A(d.type==="enum"),!N(c.value)||!d.optionTitles){a(c.value);break}let p=d.options.indexOf(c.value),l=d.optionTitles[p];a(l);break}}return r.length?r.join(", "):`${n.length} Item${n.length===1?"":"s"}`}var yb=Be.default.memo(function({index:o,onContextMenu:t,onChange:n,onImageUpload:r,ControlPropRow:a,...c}){return(0,be.jsx)(a,{...c,onContextMenu:s=>t(s,o),onChange:(s,m,f)=>n(m,f,o),onImageUpload:s=>r(s,o)})});function wb({isGallery:e,arrayTitle:o,nodeIds:t,control:n,controlPath:r,controlProp:a,controlKey:c,hiddenControlsByNodeId:d,scopeType:p,canAddItems:l,addItem:s,onChange:m,onChangeItem:f,onImageUpload:h,removeAll:u,removeItemAtIndex:b,moveItem:v,ControlPropRow:w}){let P=Yt(),x=Je(a.value)?a.value:[],C=(0,Be.useMemo)(()=>n.control.title?n.control:{...n.control,title:`${o} Item`},[o,n]),k=(0,Be.useCallback)(S=>{m(c,S,t)},[m,c,t]);return e?(0,be.jsx)(Pt,{direction:"vertical",className:Mt,children:(0,be.jsx)(j,{padding:de.panelPadding,gap:0,children:(0,be.jsx)(zp,{compact:!0,control:n,value:x,onChange:k})})}):(0,be.jsx)(Pt,{direction:"vertical",className:Mt,children:(0,be.jsxs)(j,{padding:0,paddingTop:de.inputSpacing,gap:0,children:[(0,be.jsx)(bn,{items:x,removeItem:b,moveItem:v,keyForItem:Rn,className:G(nr,Wn,x.length>0&&Gn,!l&&$n),children:({item:S,index:R})=>{let L=E=>{i.contextMenuStore.show([{label:"Remove",enabled:!P,click:()=>b(R)},{label:"Remove All",enabled:!P,click:u}],{location:{x:E.clientX,y:E.clientY}})};return(0,be.jsx)(ql,{sites:!0,children:(0,be.jsx)(yb,{sortable:!0,index:R,nodeIds:t,popoutId:S.id,scopeType:p,controlProp:S,onChange:f,onImageUpload:h,controlKey:c,controlPath:r+`[${R}]`,control:C,onContextMenu:L,hiddenControlsByNodeId:zn(n.control.type)?d:void 0,ControlPropRow:w})})}}),l&&(0,be.jsx)("div",{className:qn,children:(0,be.jsx)(Y,{title:void 0,withReorderControl:!0,reorderControlHidden:!0,className:nr,children:(0,be.jsx)(pe,{onClick:s,enabled:!P,children:"Add\u2026"})})})]})})}function xb(e){return e?yd(e,i.tree)==="canvasComponent":!1}function Km({nodeIds:e,control:o,controlKey:t,controlPath:n,controlProp:r,onChange:a,onContextMenu:c,ControlPropRow:d,hiddenControlsByNodeId:p,traitTypeKeys:l,scopeType:s,controlSourceIdentifier:m,supportsVariables:f}){let h=xb(m),u=dd(o),b=f===!0&&u&&h,v=he(o.maxCount)?o.maxCount:1/0,P=(Do(r.value)?r.value.length:0)<v,x=o.title||O(t),C=(0,Be.useCallback)((U,oe,we)=>{a(t,Ne=>(A(Je(Ne.value)),{type:"array",value:yo.update(Ne.value,we,Re=>{let Ke=U(Re);return A(Re.type===Ke.type),{...U(Re),id:Re.id??mo()}})}),oe)},[a,t]),k=ue(r.value),S=(0,Be.useCallback)(()=>{let U=Uc(o.control,void 0);switch(U.id=mo(),a(t,oe=>k?{type:"array",value:[U]}:(A(Je(oe.value)),{type:"array",value:yo.push(oe.value,U)}),e),o.control.type){case"object":case"transition":case"color":case"image":_e.navigation.presentPopoutOnRegistration(U.id);break}},[a,t,o,e,k]),R=(0,Be.useCallback)((U,oe)=>{a(t,we=>(A(Je(we.value)),{type:"array",value:yo.move(we.value,U,oe)}),e)},[a,t,e]),L=(0,Be.useCallback)(U=>{a(t,oe=>(A(Je(oe.value)),{type:"array",value:yo.remove(oe.value,U)}),e)},[a,t,e]),E=(0,Be.useCallback)(()=>{a(t,()=>({type:"array",value:[]}),e)},[a,t,e]),$=(0,Be.useCallback)(()=>{a(t,()=>({}),e)},[a,t,e]),ee=(0,Be.useCallback)(async(U,oe)=>{let we=e,Ne=await U;Ne&&a(t,Re=>(A(Re.type==="array"),Je(Re.value)?{type:"array",value:yo.update(Re.value,oe,Ke=>Ke.type==="image"?{...Fn(Ke,Ne),id:Ke.id}:{id:mo(),type:"image",value:Ne})}:Re),we)},[a,t,e]),Q=(0,Be.useCallback)(U=>{a(t,()=>({type:"array",value:U}),e)},[t,e,a]),te=(0,Be.useCallback)(U=>{let oe=zc({engine:i,componentLoader:Te,sourceArrayReference:U,targetArrayControl:o});oe&&Q(oe)},[Q,o]),K=X(r.value)?Cb(r.value):null;return(0,be.jsx)(Y,{title:x,supportsVariables:b,variableType:"array",traitTypeKeys:l,onCreateVariable:void 0,onSelectVariable:te,onRemoveDynamicValue:$,dynamicValue:K,onContextMenu:c,children:z(K)?(0,be.jsx)(ae,{expectedType:"array",reference:K,onRemove:$,hasError:!b}):(0,be.jsx)(qe,{displayDivider:!0,popout:(0,be.jsx)(wb,{isGallery:u,arrayTitle:x,nodeIds:e,addItem:S,control:o,onChange:a,moveItem:R,scopeType:s,removeAll:E,controlKey:t,onChangeItem:C,controlPath:n,controlProp:r,canAddItems:P,onImageUpload:ee,removeItemAtIndex:L,ControlPropRow:d,hiddenControlsByNodeId:p}),navigationTitle:x,title:vb(o,r,u),preview:(0,be.jsx)(We,{children:u?(0,be.jsx)(Rl,{background:"transparent"}):(0,be.jsx)(mn,{})})})})}function Cb(e){if(A(!cc(e.startValue),"Arrays don't support fetched data"),z(e.startValue))return e.startValue;ie(e.startValue)}var Yn=y(F());var Ir=y(I()),Ra=["borderradius","number"];function Xm({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,traitTypes:a,traitTypeKeys:c,supportsVariables:d=!1,supportsComputedValues:p=!1}){let l=(0,Yn.useId)(),s=(0,Yn.useCallback)(u=>n({type:"borderradius",value:u},e),[e,n]),m=Fe(u=>{let b=o.title||O(e),v=N(t.value)?t.value:"0px",w=le({engine:i,scopeId:u,type:"borderradius",name:b,initialValue:v});w&&s(w)},[o.title,e,t.value,s]),f=()=>{let{value:u}=t;if(X(u))if(z(u)){let b=Pe(i,u);s(an(b)&&N(b)?b:"0px")}else Eo(u)?s("0px"):void 0},h=u=>{s(u),_e.navigation.presentPopout(l)};return(0,Ir.jsx)(Y,{title:o.title??O(e),traitTypes:a,traitTypeKeys:c,onContextMenu:r,supportsVariables:d,variableType:Ra,variableCreationType:"borderradius",dynamicValue:X(t.value)?t.value:null,onCreateVariable:m,onSelectVariable:s,onRemoveDynamicValue:f,onResetToDefault:()=>{A(an(o.defaultValue)),n({type:"borderradius",value:o.defaultValue},e)},resetToDefaultEnabled:an(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:p,computedValuePopoutId:l,onSelectComputedValue:h,children:X(t.value)?(0,Ir.jsx)(Fo,{title:o.title||O(e),value:t.value,outputControl:o,expectedType:Ra,popoutId:l,onRemove:f,onChangeDynamicValue:s,supportsComputedValues:p}):z(t.value)?(0,Ir.jsx)(ae,{expectedType:Ra,reference:t.value,onRemove:f,hasError:!d}):(0,Ir.jsx)(Vn,{onChange:s,variant:"borderRadius",value:X(t.value)?To:t.value})})}var Ta=y(F());var mt=y(I());async function kb(e){let o=i.tree.get(e);if(!gc(o)||!o.homeNodeId)return;let t=i.tree.get(o.homeNodeId);t&&(await Cd(t,i,Te,{waitForAll:!0,persist:!1}),await i.codeGenerationStore.updateComponent(o.id))}function Jm({controlProp:e,nodeIds:o,control:t,controlKey:n,onChange:r}){let a=(0,Ta.useCallback)(b=>{N(b)?(kb(b).catch(q),r({type:"slot",value:[{id:"prototype-slot",reference:b}]},n)):r({type:"slot",value:[]},n)},[r,n]),c=(0,Ta.useCallback)(()=>{a(wc)},[a]);if(!on(e.value)||o.length!==1)return null;let d=i.tree.getNode(o[0]);if(!d)return null;let p=t.title||O(n),s=e.value[0]?.reference,m=Pb(i.tree,i.scopeStore,d),u=!m.map(b=>b.id).find(b=>b===s);return(0,mt.jsx)(Y,{title:p,children:(0,mt.jsx)("div",{style:Zo,children:(0,mt.jsxs)(vn,{children:[(0,mt.jsx)(st,{title:u?"Select\u2026":"None",selected:u,enabled:!u,onSelect:c}),(0,mt.jsx)(st,{type:"divider"}),m.map(b=>{let v=i.tree.get(b.homeNodeId);if(!v)return;let w=v.name||jo(v),P=b.name||jo(b),x=`${w} (${P})`;return(0,mt.jsx)(st,{identifier:b.id,title:x,selected:b.id===s,onSelect:a},b.id)})]})})})}function Pb(e,o,t){return o.getCanvasPageNodes().filter(n=>{let r=e.get(n.homeNodeId);return!(!r||!In.isValidSlotTarget(e,r)||r.id===t.id||Wc(e,t,r,Te))}).reverse()}var Zn=y(I());function eu({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,supportsVariables:a=!0,title:c=o.title??O(e)}){let d=o.dataIdentifier;function p(m){n({type:"collectionreference",value:m},e)}function l(m){let f=N(t.value)?t.value:void 0,h=le({engine:i,scopeId:m,type:"collectionreference",name:c,dataIdentifier:d,initialValue:f});h&&p(h)}function s(m){if(z(m)){let f=Pe(i,m);Lc(f)?p(f):p(void 0)}else p(void 0)}return(0,Zn.jsx)(Y,{title:c,supportsVariables:a,variableType:"collectionreference",onCreateVariable:l,onSelectVariable:p,onRemoveDynamicValue:s,dynamicValue:X(t.value)?t.value:null,onContextMenu:r,collectionReferenceDataIdentifier:d,children:z(t.value)?(0,Zn.jsx)(ae,{expectedType:"collectionreference",reference:t.value,onRemove:s,hasError:!a}):(0,Zn.jsx)(Hp,{wrapperClassName:dt,dataIdentifier:d,value:t.value,onChange:p})})}var Qn=y(F());var Kn=y(I()),ou=({popoutId:e,control:{title:o,type:t,defaultValue:n},controlProp:{value:r},controlKey:a,traitTypes:c,traitTypeKeys:d,onChange:p,onContextMenu:l,supportsVariables:s})=>{let m=!!s,f=jc(n)?n:Fc,h=r!==f,u=(0,Qn.useCallback)(w=>{p({type:t,value:w},a)},[p,t,a]),b=(0,Qn.useCallback)(()=>{let w=le({type:"cursor",engine:i,showModal:!0,name:"Cursor",initialValue:Ys(r)?r:f,scopeId:i.scopeStore.activeId});_e.navigation.presentPopout(e),w&&u(w)},[f,u,e,r]),v=(0,Qn.useCallback)(()=>{p({type:t,value:f},a)},[a,f,p,t]);return(0,Kn.jsx)(Y,{title:o||O(a),traitTypes:c,traitTypeKeys:d,onContextMenu:l,resetToDefaultEnabled:h,onResetToDefault:v,variableType:"cursor",supportsVariables:m,dynamicValue:X(r)?r:null,onSelectVariable:u,onCreateVariable:b,onRemoveDynamicValue:v,children:z(r)?(0,Kn.jsx)(ae,{onRemove:v,expectedType:"cursor",hasError:!m,reference:r}):(0,Kn.jsx)(Wp,{popoutId:e,title:o||"Cursor",cursor:r,onChange:u})})};var Uo=y(F());var ut=y(I()),ru=Uo.default.memo(function({nodeIds:e,control:o,controlKey:t,controlProp:n,supportsVariables:r,onChange:a,onContextMenu:c,traitTypeKeys:d,scopeType:p}){let l=n.value,s=(0,Uo.useRef)(null),m=(0,Uo.useCallback)(Q=>{a(t,()=>({type:"customcursor",value:Q}),e)},[a,t,e]),f=(0,Uo.useCallback)(()=>m(void 0),[m]),h=(0,Uo.useCallback)(()=>{if(p!=="SmartComponent")return;let Q=le({type:"customcursor",engine:i,showModal:!0,name:"Cursor",initialValue:void 0,scopeId:i.scopeStore.activeId});Q&&m(Q)},[m,p]),u=(0,Uo.useCallback)(Q=>{s.current?.displayVariableAssignmentOptions?.(Q)},[]),b=(0,Uo.useCallback)(Q=>{a(t,te=>(A(te.type==="customcursor"),z(te.value)?te:{type:"customcursor",value:Q(te.value)}),e)},[t,e,a]),v=z(l)?l:null,{customCursorSmartComponentId:w,customCursorVariant:P,customCursorFollow:x,customCursorOffsetX:C,customCursorOffsetY:k,customCursorPlacement:S,customCursorAlignment:R,customCursorTransitionEnabled:L,customCursorTransition:E}=Nc(l)?l:Vc;if(ue(l))return null;let $=o.title||O(t),ee=!z(l)&&!tt(l);return(0,ut.jsx)(Y,{title:$,onContextMenu:c,variableType:"customcursor",onCreateVariable:h,onRemoveDynamicValue:f,dynamicValue:v,onSelectVariable:m,traitTypeKeys:d,supportsVariables:!!r,panelRowApiRef:s,children:z(l)?(0,ut.jsx)(ae,{onRemove:f,expectedType:"customcursor",reference:l}):p==="SmartComponent"&&r?(0,ut.jsx)(or,{type:"customCursor",onClick:u}):(0,ut.jsx)(qe,{displayDivider:!0,popout:(0,ut.jsx)(pm,{scopeType:p,customCursorType:"component",onChange:b,customCursorSmartComponentId:w,customCursorVariant:new Set([P]),customCursorFollow:x??!1,customCursorOffsetX:C,customCursorOffsetY:k,customCursorPlacement:new Set([S??Mc]),customCursorAlignment:R??Rc,customCursorTransitionEnabled:L??!1,customCursorTransition:E,scopeId:""}),navigationTitle:$,title:w?mm(w):"Add\u2026",titleColor:ee?ce.inputLabel:void 0,onDelete:ee?void 0:f,preview:(0,ut.jsx)(We,{color:ee?ce.swatchBackgroundPlaceholderForBorder:ce.tint,children:(0,ut.jsx)(Ml,{})})})})});var La=y(F());var Ge=y(I()),Aa="date";function nu({control:e,controlKey:o,controlProp:t,onContextMenu:n,sortable:r,traitTypeKeys:a,supportsVariables:c=!1,onChange:d}){let p=sl(),{value:l}=t,{defaultValue:s}=e,m=hn(),f=La.default.useCallback(C=>{d({type:e.type,value:C},o)},[d,o,e.type]),h=Fe(C=>{let k=e.title||O(o),S=N(l)?l:void 0,R=le({engine:p,scopeId:C,type:Aa,name:k,initialValue:S});R&&f(R)},[e.title,o,l,f]),u=Fe(()=>{if(X(l))if(z(l)){let C=Pe(p,l),k=N(C)?C:void 0;f(k)}else Eo(l)?f(void 0):void 0},[f,l]),b=La.default.useCallback(()=>{f(s)},[f,s]),v=N(l)?l:"",w=r?void 0:e.title||O(o),P=z(l)&&c,x=N(s)&&l!==s;return(0,Ge.jsxs)(Ge.Fragment,{children:[(0,Ge.jsx)(Y,{title:w,onContextMenu:n,variableType:Aa,resetToDefaultEnabled:x,onResetToDefault:b,onCreateVariable:h,onRemoveDynamicValue:u,dynamicValue:X(l)?l:null,onSelectVariable:f,traitTypeKeys:a,withReorderControl:r,supportsVariables:c,children:P?(0,Ge.jsx)(ae,{expectedType:Aa,reference:l,onRemove:u}):(0,Ge.jsx)(Ge.Fragment,{children:(0,Ge.jsx)("div",{style:r?void 0:Zo,children:(0,Ge.jsx)(zl,{value:v,onChange:f,required:!0,preserveTime:e.displayTime},m)})})}),!P&&e.displayTime&&(0,Ge.jsx)(Y,{children:(0,Ge.jsx)("div",{style:r?void 0:Zo,children:(0,Ge.jsx)(Ol,{value:v,onChange:f,required:!0},m)})})]})}var lu=y(F());var pu=y(I()),iu="toggle",au="single",su=["v1","v2","v3","v4"];function du({controlProp:e,nodeIds:o,controlKey:t,control:n,onChange:r,onContextMenu:a,traitTypeKeys:c,sortable:d}){let p=(0,lu.useCallback)(m=>{let f=Wt(e.isFused)?e.isFused:!1,h=m[iu];Wt(h)&&(f=h);let u=he(e.single)?e.single:0,b=m[au];he(b)&&(u=b);let v=[0,0,0,0];e.fused.forEach((w,P)=>{he(w)&&(v[P]=w)}),su.forEach((w,P)=>{let x=m[w];he(x)&&(v[P]=x)}),r({type:n.type,isFused:f,value:{single:u,fused:v}},t)},[n,t,e,r]),l=-1;Wt(e.isFused)&&(l=e.isFused?1:0);let s=Ib(t,n.valueLabels);return(0,pu.jsx)(Ip,{title:n.title||O(t),mainValue:e.single,segmentedControlIndex:l,fusedValues:e.fused,nodeIds:o,splitInFourKey:iu,mainProperty:au,fusedProperties:su,iconType:s?"radius":"border",fusedLabels:n.valueLabels,mainTraitFilter:cu,fusedTraitFilter:cu,toggleTitles:n.toggleTitles,minValue:n.min,onChange:p,onContextMenu:a,traitTypeKeys:c,sortable:d})}function cu(){return!0}var Sb=["tl","tr","br","bl"];function Ib(e,o){return e.toLowerCase().includes("radius")?!0:Ac(o,Sb)}var Xn=y(F());var Mr=y(I()),Da=["gap","number"];function mu({controlKey:e,control:o,controlProp:t,onChange:n,nodeIds:r,onContextMenu:a,traitTypes:c,traitTypeKeys:d,supportsVariables:p=!1,supportsComputedValues:l=!1}){let s=(0,Xn.useId)(),m=(0,Xn.useCallback)(v=>{n(e,()=>({type:"gap",value:v}),r)},[e,n,r]),f=Fe(v=>{let w=o.title||O(e),P=N(t.value)?t.value:"0px",x=le({engine:i,scopeId:v,type:"gap",name:w,initialValue:P});x&&m(x)},[o.title,e,t.value,m]),h=()=>{let{value:v}=t;if(X(v))if(z(v)){let w=Pe(i,v);m(rn(w)&&N(w)?w:"0px")}else Eo(v)?m("0px"):void 0},u=v=>{m(v),_e.navigation.presentPopout(s)},b=v=>{n(e,w=>{let P=N(w.value)?w.value:"0px",x=v(P);return{type:"gap",value:x}},r)};return(0,Mr.jsx)(Y,{title:o.title??O(e),traitTypes:c,traitTypeKeys:d,onContextMenu:a,supportsVariables:p,variableType:Da,variableCreationType:"gap",dynamicValue:X(t.value)?t.value:null,onCreateVariable:f,onSelectVariable:m,onRemoveDynamicValue:h,onResetToDefault:()=>{A(rn(o.defaultValue)),m(o.defaultValue)},resetToDefaultEnabled:rn(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:l,computedValuePopoutId:s,onSelectComputedValue:u,children:X(t.value)?(0,Mr.jsx)(Fo,{title:o.title||O(e),value:t.value,outputControl:o,expectedType:Da,popoutId:s,onRemove:h,onChangeDynamicValue:m,supportsComputedValues:l}):z(t.value)&&p?(0,Mr.jsx)(ae,{expectedType:Da,reference:t.value,onRemove:h}):(0,Mr.jsx)($p,{idForFocus:"gap-input",activeGapAxis:"both",columnGap:t.columnGap,rowGap:t.rowGap,onChange:b})})}var Jn=y(F());var no=y(I()),Ea="link";function ja(e){return`computed-link-${e}`}var uu=Jn.default.memo(function({control:o,controlKey:t,controlProp:n,onChange:r,onContextMenu:a,sortable:c,traitTypeKeys:d,supportsVariables:p=!1,supportsComputedValues:l=!1,supportsFetchDataValues:s=!1,nodeIds:m=[]}){let f=(0,Jn.useMemo)(()=>wp(t||mo()),[t]),{value:h}=n,u=X(h)||nt(h)?h:To,b=K=>{r(t,U=>({...U,value:K}),m),sp(u,K)},v=K=>{let{defaultValue:U}=o;return N(U)?U:K},w=()=>{let K=v();eo(K)&&b(K)},P=()=>{b(void 0)},x=i.wrapHandler(K=>{let U=o.title||O(t),oe=N(u)?u:v("");i.beginUndoGroup();let we=le({engine:i,scopeId:K,type:Ea,name:U,initialValue:oe});we&&b(we),i.endUndoGroup()}),C=i.wrapHandler(()=>{X(u)&&b(void 0)}),k=i.wrapHandler(()=>{let K=lc({type:"link",value:nt(h)?h:void 0}),U=pc("link",K,[]);return S(U),U}),S=i.wrapHandler(K=>{b(K),_e.navigation.presentPopout(ja(t))}),R=c?void 0:o.title||O(t),L=v(),E=i.scopeStore.scopeType!=="CanvasPage"&&i.scopeStore.scopeType!=="DesignPage",$=!z(u)&&!nt(u),ee=Un(i,u),Q=Mb(u),te=N(L)&&nt(h)&&!Ic(h,tn({url:L}));return(0,no.jsx)(Y,{title:R,onContextMenu:a,onResetToDefault:w,resetToDefaultEnabled:te,variableType:Ea,onCreateVariable:x,onRemoveDynamicValue:C,dynamicValue:X(h)?h:null,onSelectVariable:b,traitTypeKeys:d,withReorderControl:c,reorderColumnCount:2,supportsVariables:p,supportsComputedValues:l,computedValuePopoutId:ja(t),onSelectComputedValue:S,supportsFetchDataValues:s,onSelectFetchDataValue:k,children:X(u)?(0,no.jsx)(Fo,{title:o.title||O(t),value:u,outputControl:o,expectedType:"link",popoutId:ja(t),onRemove:C,onChangeDynamicValue:b,nodeIds:m,supportsComputedValues:l,supportsFetchDataValues:s,controlReferenceInfo:void 0}):z(u)&&p?(0,no.jsx)(ae,{expectedType:Ea,reference:u,onRemove:C}):(0,no.jsx)(no.Fragment,{children:(0,no.jsx)(qe,{id:f,popout:(0,no.jsx)(im,{link:ue(u)?void 0:u,onChange:b,supportsVariables:p,supportsPageLinks:E,supportsSlugVariables:p}),navigationTitle:"Link",displayDivider:!0,title:ue(u)?"Add\u2026":ee,preview:(0,no.jsx)(We,{background:$?ce.swatchBackgroundPlaceholderForLink:void 0,children:Q??(0,no.jsx)(kl,{})}),onDelete:nt(u)?P:void 0,titleColor:$?ce.inputLabel:void 0})})})});function Mb(e){if(!vr(e))return;let{webPageId:o,pathVariables:t}=e;if(!t)return;let n=i.tree.getNodeWithTrait(o,He);if(!n)return;let r=Te.dataForIdentifier(n.dataIdentifier);if(!r)return;let a=r.annotations?.framerSlug;if(!a)return;let c=t[a];if(!z(c))return;let d=ca(Oc,a);if(c.id===d)return(0,no.jsx)(gl,{});let p=ca(Hc,a);if(c.id===p)return(0,no.jsx)(fl,{})}var Tr=y(F());var Rr=y(I());function fu({controlKey:e,control:o,controlProp:t,onChange:n,traitTypes:r,traitTypeKeys:a,supportsVariables:c=!1}){let{value:d}=t,{defaultValue:p}=o,l=Yt(),s=(0,Tr.useCallback)(b=>{n({type:"linkrelvalues",value:b},e)},[e,n]),m=(0,Tr.useMemo)(()=>!qt(p,d,!0),[d,p]),f=(0,Tr.useCallback)(()=>{s(p)},[s,p]),h=Fe(()=>{if(z(d))if(z(d)){let b=Pe(i,d);s(sa(b)?b:void 0)}},[s,d]),u=Fe(b=>{let v=le({engine:i,scopeId:b,name:"Rel",type:"linkrelvalues",initialValue:sa(d)?d:void 0});v&&s(v)},[s,d]);return(0,Rr.jsx)(Y,{title:o.title||O(e),resetToDefaultEnabled:m,onResetToDefault:f,traitTypes:r,traitTypeKeys:a,supportsVariables:c,onCreateVariable:u,onRemoveDynamicValue:h,dynamicValue:X(t.value)?t.value:null,onSelectVariable:s,variableType:"linkrelvalues",children:(0,Rr.jsx)(j,{className:dt,children:z(d)?(0,Rr.jsx)(ae,{expectedType:"linkrelvalues",reference:d,onRemove:h,hasError:!c}):(0,Rr.jsx)(hp,{readOnly:l,value:rt(d)?void 0:d,onChange:s,supportsAdd:!0})})})}var ei=y(I());function gu({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,supportsVariables:a=!0,title:c=o.title??O(e)}){let d=o.dataIdentifier;function p(f){n({type:"multicollectionreference",value:f},e)}function l(f){let h=Do(t.value)&&t.value.every(N)?t.value:void 0,u=le({engine:i,scopeId:f,type:"multicollectionreference",name:c,dataIdentifier:d,initialValue:h});u&&p(u)}function s(f){if(z(f)){let h=Pe(i,f);Dc(h)?p(h):p(void 0)}else p(void 0)}let m=Rb(t.value);return(0,ei.jsx)(Y,{title:c,supportsVariables:a,variableType:"multicollectionreference",onCreateVariable:l,onSelectVariable:p,onRemoveDynamicValue:s,dynamicValue:X(t.value)?t.value:null,onContextMenu:r,collectionReferenceDataIdentifier:d,children:z(t.value)?(0,ei.jsx)(ae,{expectedType:"multicollectionreference",reference:t.value,onRemove:s,hasError:!a}):(0,ei.jsx)(Yp,{wrapperClassName:dt,dataIdentifier:d,value:m,onClickItem:am,onChange:p})})}function Rb(e){return z(e)?[]:rt(e)?[]:eo(e)?[]:ue(e)?[]:e}function hu(e,o){if(!Sc(o))return o;let t=kc(o),n=t?nd(t,e):null;return n?n.light??null:Pc(o)}var Na=y(F());var Le=y(I());function Tb(e){if(!e)return(0,Le.jsx)(un,{});switch(e){case"effect":return(0,Le.jsx)(vl,{});case"color":return(0,Le.jsx)(Ll,{});case"interaction":return(0,Le.jsx)(xl,{});case"boolean":return(0,Le.jsx)(Il,{});case"object":return(0,Le.jsx)(un,{});default:return(0,Le.jsx)(un,{})}}function Ab({controlProp:e,controlKey:o,nodeIds:t,hiddenControlsByNodeId:n,control:r}){A($t(e.value));let a,c;if(tt(e.value))for(let l in e.value){let s=e.value[l];switch(A(s),s.type){case"responsiveimage":case"image":if(a||It(`${o}.${l}`,t,n))continue;a=N(s.value)?s.value:"transparent";break;case"color":if(c||It(`${o}.${l}`,t,n))continue;if(N(s.value)){let m=hu(i.tree,s.value);c=N(m)?m:"transparent"}else c="transparent";break}}let d=gp(a&&a!=="transparent"?a:void 0);if(d&&(a=d),N(a))return(0,Le.jsx)(lp,{background:a});let p;if(N(c)){let l=ec(c);l.a<.3?p=ce.inputText:l.l>.8&&(p="#000")}return(0,Le.jsx)(We,{background:c,color:p,children:Tb(r.icon)})}function Lb({controlProp:e,controlKey:o,control:t,nodeIds:n,hiddenControlsByNodeId:r}){if(A($t(e.value)),t.buttonTitle)return t.buttonTitle;if(!e.value||ue(e.value))return"";let a=[];function c(p){N(p)&&a.push(p),he(p)&&a.push(`${p}`),ue(p)&&a.push("Mixed")}for(let p in e.value){let l=e.value[p];A(l);let s=t.controls[p];switch(A(s),l.type){case"enum":{if(It(`${o}.${p}`,n,r))break;if(A(s.type==="enum"),!s.optionTitles||ue(l.value)){c(l.value);break}if(!N(l.value))break;let m=s.options.indexOf(l.value),f=s.optionTitles[m];c(f);break}case"string":if(It(`${o}.${p}`,n,r))break;c(l.value);break;case"number":if(It(`${o}.${p}`,n,r))break;c(l.value);break}}let d=a.join(", ");return d.length===0?"Object":d}var Db=Na.default.memo(function({controlProp:o,controlPath:t,nodeIds:n,controlKey:r,control:a,scopeType:c,onChange:d,ControlPropRow:p,hiddenControlsByNodeId:l}){A(o.value);let s=(f,h,u)=>{d(r,b=>{A(b.value);let v=b.value[f];A(v);let w=h(v);return{type:"object",value:{...b.value,[f]:w}}},u)},m=async(f,h)=>{let u=n,b=await f;b&&s(h,v=>(A(v.type==="image"),Fn(v,b)),u)};return(0,Le.jsx)(Pt,{direction:"vertical",className:Mt,children:(0,Le.jsx)(j,{paddingLeft:de.panelPadding,paddingRight:de.panelPadding,paddingBottom:de.inputSpacing,paddingTop:de.inputSpacing,gap:0,children:Object.entries(o.value).map(([f,h])=>{let u=`${t}.${f}`;if(It(u,n,l))return null;let b=a.controls[f];A(b);let v=zn(b.type)?l:void 0;return(0,Le.jsx)(p,{nodeIds:n,scopeType:c,onImageUpload:m,controlKey:f,controlPath:u,control:b,onChange:s,controlProp:h,hiddenControlsByNodeId:v},f)})})})});function bu(e){let{nodeIds:o,controlKey:t,controlPath:n,control:r,controlProp:a,onChange:c,ControlPropRow:d,onContextMenu:p,sortable:l,popoutId:s,hiddenControlsByNodeId:m,scopeType:f,traitTypeKeys:h,traitTypes:u}=e;A($t(a.value),"Reduced objects should always be found");let b=Na.default.useMemo(()=>s??mo(),[s]),v=()=>{c(t,k=>{if(tt(k.value))return k;let S=Bc(r,void 0,{});return A(tt(S)),{...k,value:S}},o),_e.navigation.presentPopout(b)},w=()=>{c(t,k=>({...k,value:null}),o)},P=r.title||O(t),x=Ab(e),C=Lb(e);return(0,Le.jsx)(Y,{title:l?void 0:P,onContextMenu:p,traitTypes:u,traitTypeKeys:h,withReorderControl:l,children:ue(a.value)||a.value===null?(0,Le.jsx)(or,{type:r.icon==="effect"?"effect":"object",onClick:v}):(0,Le.jsx)(qe,{displayDivider:!0,preview:x,id:b,title:C,navigationTitle:P,doubleColumn:!l,onDelete:r.optional?w:void 0,popout:(0,Le.jsx)(Db,{nodeIds:o,controlKey:t,controlPath:n,control:r,controlProp:a,onChange:c,ControlPropRow:d,onContextMenu:p,sortable:l,hiddenControlsByNodeId:m,scopeType:f})})})}var oi=y(F());var Ar=y(I()),Va=["padding","number"];function vu({controlKey:e,control:o,controlProp:t,onChange:n,onContextMenu:r,traitTypes:a,traitTypeKeys:c,supportsVariables:d=!1,supportsComputedValues:p=!1}){let l=(0,oi.useId)(),s=(0,oi.useCallback)(u=>n({type:"padding",value:u},e),[e,n]),m=Fe(u=>{let b=o.title||O(e),v=N(t.value)?t.value:"0px",w=le({engine:i,scopeId:u,type:"padding",name:b,initialValue:v});w&&s(w)},[o.title,e,t.value,s]),f=()=>{let{value:u}=t;if(X(u))if(z(u)){let b=Pe(i,u);s(nn(b)&&N(b)?b:"0px")}else Eo(u)?s("0px"):void 0},h=u=>{s(u),_e.navigation.presentPopout(l)};return(0,Ar.jsx)(Y,{title:o.title??O(e),traitTypes:a,traitTypeKeys:c,onContextMenu:r,supportsVariables:d,variableType:Va,variableCreationType:"padding",dynamicValue:X(t.value)?t.value:null,onCreateVariable:m,onSelectVariable:s,onRemoveDynamicValue:f,onResetToDefault:()=>{A(nn(o.defaultValue)),s(o.defaultValue)},resetToDefaultEnabled:nn(o.defaultValue)&&t.value!==o.defaultValue,supportsComputedValues:p,computedValuePopoutId:l,onSelectComputedValue:h,children:X(t.value)?(0,Ar.jsx)(Fo,{title:o.title||O(e),value:t.value,outputControl:o,expectedType:Va,popoutId:l,onRemove:f,onChangeDynamicValue:s,supportsComputedValues:p}):z(t.value)&&d?(0,Ar.jsx)(ae,{expectedType:Va,reference:t.value,onRemove:f}):(0,Ar.jsx)(Vn,{variant:"padding",onChange:s,value:X(t.value)?To:t.value})})}var ar=y(F());var Qo=y(I()),yu=ar.default.memo(function({control:o,controlKey:t,controlProp:n,onChange:r,traitTypeKeys:a}){let c=vr(n.value)?n.value:To,d=f=>{r({type:o.type,value:f},t)},p=()=>{d(void 0)},l=o.title||O(t),s=!vr(c),m=Un(i,c);return(0,Qo.jsx)(Y,{title:l,traitTypeKeys:a,children:(0,Qo.jsx)(qe,{displayDivider:!0,popout:(0,Qo.jsx)(Nb,{value:ue(c)?void 0:c,onChange:d}),navigationTitle:"Scope",title:ue(c)?"Add\u2026":m,preview:(0,Qo.jsx)(We,{color:"transparent",background:s?ce.swatchBackgroundPlaceholderForBorder:ce.tint,children:(0,Qo.jsx)(Al,{})}),onDelete:nt(c)?p:void 0,titleColor:s?ce.inputLabel:void 0})})}),Eb={x:0,y:10};function jb(){return Vo("Tree",()=>{let e=new Map,o=new Map,t=new Map;return i.scopeStore.getWebPageNodes().forEach(n=>{let r=cn(i.tree,n);if(!(!r||r.length<=1)){if(n.dataIdentifier){if(o.has(r))return;o.set(r,n.id),t.set(n.id,r);return}e.has(r)||(e.set(r,n.id),t.set(n.id,r))}}),{pages:e,cmsPages:o,getPathForId:n=>t.get(n)??""}})}function Nb({value:e,onChange:o}){let t=jb(),n=(0,ar.useMemo)(()=>{let c=[],d=Array.from(t.pages.keys()),p=Array.from(t.cmsPages.keys());return d.length>0&&c.push({type:"section",value:"Pages",items:d.map(l=>({type:"option",value:l}))}),p.length>0&&c.push({type:"section",value:"CMS",items:p.map(l=>({type:"option",value:l}))}),c},[t]),r=eo(e),a=(0,ar.useCallback)((c,d,p)=>{let l=t.pages.get(c)??t.cmsPages.get(c),s=l?tn({webPageId:l}):void 0;if(r&&!s){p();return}o(s)},[t,r,o]);return(0,Qo.jsx)(j,{paddingTop:de.inputSpacing,paddingRight:de.panelPadding,paddingBottom:de.inputSpacing,paddingLeft:de.panelPadding,gap:0,children:(0,Qo.jsx)(Y,{title:"Scope To",children:(0,Qo.jsx)(Fl,{autoFocus:!0,autoCompleteEnabled:!0,items:n,menuOffset:Eb,placeholder:"Page Path\u2026",onChange:a,wrapperClassName:dt,value:e?t.getPathForId(e.webPageId):""})})})}var Lr=y(F());var Po=y(I()),Fa="richtext",Vb={style:{width:"100%"}};function wu({nodeIds:e,control:o,controlKey:t,controlProp:n,scopeType:r,onChange:a,onContextMenu:c,sortable:d,traitTypeKeys:p,supportsVariables:l=!1}){let{value:s}=n,m=N(s)?s:"",f=d?void 0:o.title||O(t),h=o.title||O(t),u=N(o.defaultValue)?o.defaultValue:void 0,b=(0,Lr.useCallback)(x=>{a(t,C=>({...C,value:x}),e)},[a,t,e]),v=(0,Lr.useCallback)(()=>{N(u)&&b(u)},[b,u]),w=Fe(x=>{let C=o.title||O(t),k=N(s)?s:u??"",S=le({engine:i,scopeId:x,type:Fa,name:C,initialValue:k,options:{placeholder:o.placeholder}});S&&b(S)},[b,t,s,u,o]),P=Fe(()=>{if(X(s))if(z(s)){let x=Pe(i,s),C=N(x)?x:u??"";b(C)}else Eo(s)?b(u??""):void 0},[b,s,u]);return(0,Po.jsx)(Y,{title:f,onContextMenu:c,onResetToDefault:d?void 0:v,resetToDefaultEnabled:N(u)&&u!==s,variableType:Fa,onCreateVariable:w,onRemoveDynamicValue:P,dynamicValue:X(s)?s:null,onSelectVariable:b,traitTypeKeys:p,withReorderControl:d,supportsVariables:l,children:z(s)&&l?(0,Po.jsx)(ae,{expectedType:Fa,reference:s,onRemove:P}):(0,Po.jsx)(Po.Fragment,{children:(0,Po.jsx)("div",{style:d?void 0:Zo,children:(0,Po.jsx)(op,{useFrescoButton:!0,displayDivider:!1,frescoButtonProps:Vb,popout:(0,Po.jsx)(Fb,{value:m,scopeType:r,onChange:b}),navigationTitle:h,children:"Edit Content"})})})})}var Fb=(0,Lr.memo)(function({value:o,scopeType:t,onChange:n}){let r=hn();return(0,Po.jsx)(j,{padding:`0 ${de.panelPadding}px ${de.panelPadding}px`,children:(0,Po.jsx)(Qp,{compact:!0,limitMaxHeight:!0,supportsEmbeds:!1,supportsMedia:!1,defaultValue:o,scopeType:t,onChange:n},r)})});var fo=y(F());var zo=y(I()),Bb=fo.default.memo(function({value:e,scopeType:o,nodeIds:t,controlKey:n,onChange:r}){let a=z(e)||rt(e)?void 0:ue(e)?To:e?.collectionItem,c=(0,fo.useCallback)(l=>{r(n,()=>({type:"scrollsectionref",value:{target:l}}),t)},[r,t,n]),d=(0,fo.useCallback)(l=>{r(n,s=>z(s.value)?s:(A(s.type==="scrollsectionref"),{type:"scrollsectionref",value:{target:s.value?.target,collectionItem:l}}),t)},[r,t,n]),p=ue(e)||rt(e)?e:e?.target;return(0,zo.jsx)(j,{gap:0,paddingLeft:de.panelPadding,paddingRight:de.panelPadding,paddingBottom:de.inputSpacing,paddingTop:de.inputSpacing,children:(0,zo.jsx)(yp,{targets:p,collectionItem:a,scopeId:i.scopeStore.activeId,scopeType:o,showDisabledCollectionItemRow:!0,onSelect:c,onSelectCollectionItem:d})})}),xu=fo.default.memo(function({nodeIds:e,control:o,controlKey:t,controlProp:n,supportsVariables:r,onChange:a,onContextMenu:c,traitTypeKeys:d,scopeType:p}){let l=n.value,s=(0,fo.useRef)(null),m=(0,fo.useCallback)(C=>{a(t,()=>({type:"scrollsectionref",value:C}),e)},[a,t,e]),f=(0,fo.useCallback)(()=>m(void 0),[m]),h=(0,fo.useCallback)(()=>{if(!da(p))return;let C=le({type:"scrollsectionref",engine:i,showModal:!0,name:"Scroll Section",initialValue:void 0,scopeId:i.scopeStore.activeId});C&&m(C)},[m,p]),u=z(l)?l:null,b=(0,fo.useCallback)(C=>{s.current?.displayVariableAssignmentOptions?.(C)},[]),v=z(l)||rt(l)||ue(l)?void 0:l?.target,w=Vo("Tree",()=>{if(!v||z(v))return;let C=i.tree.get(v);if(!(!C||!Zc(C)))return C.elementId},[v]);if(ue(l))return null;let P=o.title||O(t),x=!w||!z(l)&&!tt(l);return(0,zo.jsx)(Y,{title:P,onContextMenu:c,variableType:"scrollsectionref",onCreateVariable:h,onRemoveDynamicValue:f,dynamicValue:u,onSelectVariable:m,traitTypeKeys:d,supportsVariables:!!r,panelRowApiRef:s,children:z(l)?(0,zo.jsx)(ae,{onRemove:f,expectedType:"scrollsectionref",reference:l}):da(p)&&r?(0,zo.jsx)(or,{type:"scrollSection",onClick:b}):(0,zo.jsx)(qe,{displayDivider:!0,popout:(0,zo.jsx)(Bb,{value:l,scopeType:p,onChange:a,nodeIds:e,controlKey:t}),navigationTitle:P,title:w??"Add\u2026",titleColor:x?ce.inputLabel:void 0,onDelete:x?void 0:f,preview:(0,zo.jsx)(We,{color:x?ce.swatchBackgroundPlaceholderForBorder:ce.tint,children:(0,zo.jsx)(Tl,{})})})})});var Cu=y(tc()),So=y(F());var ge=y(I()),ri=class extends So.default.Component{constructor(){super(...arguments);Oe(this,"onChange",t=>{let{slotControlItem:n,onChange:r}=this.props;r({id:n?.id??mo(),reference:t??void 0})});Oe(this,"selectNodeId",t=>{this.onChange(t)});Oe(this,"remove",()=>{this.onChange(null)})}render(){let{nodeIds:t,slotControlItem:n,onContextMenu:r,sortable:a,title:c,traitTypeKeys:d}=this.props,p=n?.reference;A(t.length===1,"Slot row is only rendered for one item");let l=i.tree.getNode(t[0]);if(!l)return null;let s=In.optionsForNode(i.tree,i.scopeStore.active,l),h=!s.map(u=>u.id).find(u=>u===p);return(0,ge.jsx)(Y,{title:c,onContextMenu:r,traitTypeKeys:d,withReorderControl:a,children:(0,ge.jsx)("div",{style:a?void 0:Zo,children:(0,ge.jsxs)(vn,{children:[(0,ge.jsx)(st,{title:h?"Select\u2026":"None",selected:h,enabled:!h,onSelect:this.remove}),(0,ge.jsx)(st,{type:"divider"}),s.map(u=>(0,ge.jsx)(st,{identifier:u.id,title:u.name||jo(u),selected:u.id===p,onSelect:this.selectNodeId},u.id))]})})})}},Ub=So.default.memo(function({index:o,onContextMenu:t,onChange:n,...r}){return(0,ge.jsx)(ri,{...r,sortable:!0,onContextMenu:d=>t(d,o),onChange:d=>n(d,r.nodeIds,o)})});function zb({nodeIds:e,controlProp:o,canAddItems:t,addItem:n,onChangeItem:r,removeAll:a,removeItemAtIndex:c,moveItem:d}){let p=Yt(),l=Je(o.value)?o.value:[],s=(0,So.useCallback)((m,f,h)=>{r(()=>m,f,h)},[r]);return(0,ge.jsx)(Pt,{direction:"vertical",className:Mt,children:(0,ge.jsxs)(j,{padding:0,paddingTop:de.inputSpacing,gap:0,children:[(0,ge.jsx)(bn,{items:l,removeItem:c,moveItem:d,keyForItem:Rn,className:G(nr,Wn,l.length>0&&Gn,!t&&$n),children:({item:m,index:f})=>(0,ge.jsx)(Ub,{sortable:!0,index:f,nodeIds:e,onChange:s,slotControlItem:m,onContextMenu:u=>{i.contextMenuStore.show([{label:"Remove",enabled:!p,click:()=>c(f)},{label:"Remove All",enabled:!p,click:a}],{location:{x:u.clientX,y:u.clientY}})}})}),t&&(0,ge.jsx)("div",{className:qn,children:(0,ge.jsx)(Y,{title:void 0,withReorderControl:!0,reorderControlHidden:!0,className:nr,children:(0,ge.jsx)(pe,{onClick:n,enabled:!p,children:"Add\u2026"})})})]})})}function ku({nodeIds:e,control:o,controlKey:t,controlPath:n,controlProp:r,onChange:a,traitTypeKeys:c}){A(e.length===1,"Slot row is only rendered for one item");let d=Vo("Tree",()=>{let x=e[0];return A(x),i.tree.getNodeWithTrait(x,Xr)?.slotsAreChildNodes??!1},[e]),p=he(o.maxCount)?o.maxCount:1/0,s=(Do(r.value)?r.value.length:0)<p,m=o.title||O(t),f=(0,So.useCallback)((x,C,k)=>{a(t,S=>(A(Je(S.value)),{type:"slot",value:yo.update(S.value,k,R=>({...x(R),id:R.id??mo()}))}),C)},[a,t]),h=(0,So.useCallback)(()=>{a(t,x=>{let C={reference:void 0,id:mo()},k=yo.push(x.value,C);return{type:"slot",value:k}},e)},[a,t,e]),u=(0,So.useCallback)((x,C)=>{a(t,k=>(A(Je(k.value)),{type:"slot",value:yo.move(k.value,x,C)}),e)},[a,t,e]),b=(0,So.useCallback)(x=>{a(t,C=>(A(Je(C.value)),{type:"slot",value:yo.remove(C.value,x)}),e)},[a,t,e]),v=(0,So.useCallback)(x=>{a(t,C=>(A(Je(C.value)),{type:"slot",value:[x]}),e)},[a,t,e]),w=(0,So.useCallback)(()=>{a(t,()=>({type:"slot",value:[]}),e)},[a,t,e]);if(d||!on(r.value))return null;let P=r.value;return o.maxCount===1?(0,ge.jsx)(ri,{title:m,nodeIds:e,slotControlItem:P[0],onChange:v,traitTypeKeys:c}):(0,ge.jsx)(Y,{title:m,traitTypeKeys:c,onCreateVariable:void 0,children:(0,ge.jsx)(qe,{displayDivider:!0,popout:(0,ge.jsx)(zb,{nodeIds:e,addItem:h,control:o,moveItem:u,removeAll:w,onChangeItem:f,controlPath:n,controlProp:r,canAddItems:s,removeItemAtIndex:b}),navigationTitle:m,title:`${P.length} ${(0,Cu.default)("Item",P.length)}`,preview:(0,ge.jsx)(We,{children:(0,ge.jsx)(mn,{})})})})}var ni=y(F());var ii=y(I());function Pu({controlKey:e,control:o,controlProp:{value:t,trackingIdAIPrompt:n},onChange:r,onContextMenu:a,supportsVariables:c=!0,traitTypeKeys:d,title:p=o.title??O(e)}){let l=(0,ni.useCallback)(f=>{r({type:"trackingid",value:f},e)},[e,r]),s=(0,ni.useCallback)(f=>{let h=N(t)?t:void 0,u=le({engine:i,scopeId:f,type:"trackingid",name:p,initialValue:h});u&&l(u)},[t,p,l]),m=(0,ni.useCallback)(f=>{if(z(f)){let h=Pe(i,f);Ec(h)?l(h):l(void 0)}else l(void 0)},[l]);return(0,ii.jsx)(Y,{title:p,variableType:"trackingid",onCreateVariable:s,onSelectVariable:l,onRemoveDynamicValue:m,dynamicValue:X(t)?t:null,supportsVariables:c,onContextMenu:a,traitTypeKeys:d,children:z(t)?(0,ii.jsx)(ae,{expectedType:"trackingid",reference:t,onRemove:m,hasError:!c}):(0,ii.jsx)(bp,{value:t,onChange:l,aiPrompt:n})})}var Ba=y(I()),Ob={ArrayControlPropRow:Km,BooleanControlPropRow:vm,BorderControlPropRow:gm,BorderRadiusControlPropRow:Xm,BoxShadowControlPropRow:Op,CanvasPageInstanceRow:Jm,CollectionReferenceControlPropRow:eu,ColorControlPropRow:um,CursorControlPropRow:ou,CustomCursorControlPropRow:ru,DateControlPropRow:nu,EnumControlPropRow:_p,FileControlPropRow:qp,FontControlPropRow:fm,FusedNumberControlPropRow:du,GapControlPropRow:mu,ImageControlPropRow:Gp,LinkControlPropRow:uu,LinkRelValuesControlPropRow:fu,MultiCollectionReferenceControlPropRow:gu,NumberControlPropRow:Zp,ObjectControlPropRow:bu,PaddingControlPropRow:vu,PageScopeControlPropRow:yu,RichTextControlPropRow:wu,ScrollSectionRefControlPropRow:xu,SlotControlPropRow:ku,StringControlPropRow:Kp,TrackingIdControlPropRow:Pu,TransitionControlPropRow:xp,VectorSetItemControlPropRow:Jp};function Su({children:e}){return(0,Ba.jsx)(up.Provider,{value:Ob,children:(0,Ba.jsx)(fp.Provider,{value:Fo,children:e})})}var Mu=y(F());var Iu=function(e,o,t){let n=e.tree.getNodeWithTrait(o,He);if(!n||(n.abTestingParentId&&(n=e.tree.getNodeWithTrait(o,He)),!n))return;let r=n.getAbTestingFunnel(t);if(r)return r.id;let a=uc(n)?Te.dataForIdentifier(n.dataIdentifier):null,c=Vd(e.tree,n,a),d=new rl({name:ol(c),abTestingParentId:n.id}),p=new il({name:`View ${c}`}),l=new nl({trackingEventType:"pageview",trackingRoutePath:ln(e.tree,n)});return p.addChild(l),d.addChild(p),e.tree.insertNode(d,t.id),H("funnel_create",{funnelId:d.id,abTestingParentId:n.id}),H("funnel_step_create",{funnelId:d.id,stepId:p.id,eventType:"pageview",actionCount:1}),d.id};var Ua="ab-test-status-toast";function Ru(){vp(Gc);let e=er(()=>{if(!i.loadingStore.isDocumentLoaded||i.chromeStore.mainView!==0)return;let n=i.tree.getAnalyticsScopeNode(),r=n?.loaded;if(n&&!r)return;let a=i.scopeStore.active;if(!He(a))return;let c=a.abTestingParentId??a.id;if(!a.hasAbTestingChildren(i.tree))return;let p=a.getAbTestingFunnel(r);return p?{abTestingFunnelStatus:p.status,abTestingFunnelId:p.id,webPageId:c}:{webPageId:c}},[],[i.chromeStore,i.scopeStore,i.loadingStore,"Tree"]),o=pt("canEditAnalytics"),t=!pt("canStartStopAbTest");(0,Mu.useEffect)(()=>{if(!e||o)return T({key:Ua,type:"remove"});let{webPageId:n,abTestingFunnelId:r,abTestingFunnelStatus:a}=e,c,d;switch(a){case void 0:case 3:case 0:c={title:"Configure",onClick:i.wrapHandler(()=>{let p=i.tree.ensureAnalyticsScopeNode();i.loadScopesThenProcess([p],([l])=>{if(!l)return;let s=Iu(i,n,l);i.runBeforeNextFrame(()=>i.analytics.open(s?{tab:"abtest",id:s}:void 0))})})},d="This page has an A/B test that needs configuration";break;case 1:if(!t)return T({key:Ua,type:"remove"});c={title:"Start Test",onClick:()=>em(i,r,"toast")},d="This page has an A/B test that is not running";break;case 2:c={title:"View Results",onClick:()=>i.analytics.open(r?{tab:"abtest",id:r}:void 0)},d="This page is running an A/B test";break;default:ie(a)}T({key:Ua,type:"add",variant:"info",text:d,icon:"view-only",duration:1/0,permanent:!0,action:c})},[e,o,t])}var sr=y(F());function Tu(){let e=(0,sr.useRef)(null),o=(0,sr.useCallback)((t,n)=>{e.current=n,i.pluginStore.openPlugin(t,i,n)},[]);return(0,sr.useEffect)(()=>()=>{let t=e.current;if(!t)return;let n=i.pluginStore.activePlugin;n&&n.modeHandlers===t&&i.pluginStore.closePlugin(n.manifestId)},[]),o}var Lu=y(F());var Au="root_r4keiby";var Eu=y(I()),_b=["image"],qb=["editImage","image"];function Du({commonImageReference:e,onChangeImages:o,altText:t=yc,onChangeAltText:n}){let r=N(e)&&e.length>0,a=Tu(),c=Lu.default.useCallback((d,p)=>{let l=(s,m)=>{o(s),eo(m)||n?.(m)};if(p==="image")a(d,{mode:p,setImages:l});else if(p==="editImage")a(d,{mode:p,setImages:l,getImage:()=>(ia(N(e)),ia(Qs(e)),{assetReference:e,altText:N(t)?t:void 0})});else throw new Error(`ImagePicker, unsupported plugin mode: ${p}`)},[t,e,n,o,a]);return(0,Eu.jsx)(Pp,{modes:r?qb:_b,onSelect:c,className:Au})}var De=y(F());var ai=y(F()),Wb=e=>({acl:[],accessRequests:[],aclById:{},activeIds:new Set,projectId:e,userStates:{}});function ju(e,o){let[t,n]=(0,ai.useReducer)((r,a)=>{if(!$b(a))return r;let c=ud(r,d=>Gb(d,a));return qt(r,c)?r:(i.projectStore.update(c),i.remoteUsers.handleUserUpdates(c.aclById),c)},e,Wb);return(0,ai.useEffect)(()=>o.onMessage(r=>{switch(r.type){case"leave":i.remoteUsers.handleLeave(r.id);break;case"state":i.remoteUsers.handleCursorUpdate(r.id,r.value);break;case"welcome":for(let a in r.value.userStates)i.remoteUsers.handleCursorUpdate(a,r.value.userStates[a]);break}n({type:"handleMessage",message:r})}),[o]),[t,n]}function $b(e){if(e.type!=="handleMessage")return!0;switch(e.message.type){case"join":case"leave":case"welcome":return!0;default:return!1}}function Gb(e,o){if(o.type==="handleMessage"){let{message:t}=o;if(t.type==="join"){if(e.activeIds.has(t.id)){console.warn("User joined twice:",t.id);return}else e.activeIds.add(t.id);e.userStates[t.id]={}}else if(t.type==="leave"){if(e.activeIds.has(t.id))e.activeIds.delete(t.id);else{console.warn("Unknown user left:",t.id);return}delete e.userStates[t.id]}else t.type==="welcome"&&(e.activeIds=new Set(Object.keys(t.value.userStates)),e.userStates=t.value.userStates)}else if(o.type==="updateACL"||o.type==="resetACL"){let t={};for(let n of o.acl)t[n.user.id]=n;if(o.type==="resetACL"){e.acl=o.acl,e.accessRequests=o.accessRequests,e.aclById=t;return}e.aclById={...e.aclById,...t},e.acl=Object.keys(e.aclById).map(n=>e.aclById[n])}else o.type==="updateProject"?(A(e.project,"Project must be set before updating it"),Object.assign(e.project,o.changes)):o.type==="setProject"?e.project===void 0?e.project=o.project:Object.assign(e.project,o.project):ie(o)}var Nu=y(F()),Yb={type:"add",variant:"info",icon:"color-wheel",action:{title:"Install",onClick:Jl},text:"To sample colors, please use the new desktop app",key:"install-desktop-app",duration:5e3};function Vu({channel:e,toast:o}){(0,Nu.useEffect)(()=>{if(!e)return;let t={async sampleColor(){return window.EyeDropper?{color:(await new window.EyeDropper().open().catch(a=>{if(a?.name==="AbortError")return{sRGBHex:void 0};throw a})).sRGBHex}:(o(Yb),{})}};return qs.on(e).register(t)},[e,o])}var Fu=y(F());var si=class{constructor(o){this.api=o}async listPhotos(o){return this.api.listPhotos(o)}async searchPhotos(o){return this.api.searchPhotos(o)}async getRandomPhoto(o){return this.api.getRandomPhoto(o)}async downloadPhoto(o){return this.api.downloadPhoto(o)}};function Bu({api:e,channel:o}){(0,Fu.useEffect)(()=>{if(o)return Ia.on(o).register(new si(e))},[e,o])}var Ha=y(F());var ci;(b=>{async function e(){if(!i.loadingStore.documentLoaded)return new Promise(v=>{let w=i.changes.observe(i.loadingStore,async()=>{i.loadingStore.documentLoaded&&(i.changes.removeObserver(w),v())})})}b.ready=e;function o(v){return m(i.tree.getNode(v))}b.get=o;function t(v){return i.processWhenReadyAsync(()=>{let w=[];for(let P of i.tree.root.walk()){let x=m(P);v(x)&&w.push(x)}return w})}b.find=t;function n(v){let w=u(),P=h([v]);return i.modulesStore.addExternalModulesToProject([...P],{onTreeUpdate:()=>{let{__parentId:x,__position:C,...k}=m(v);if(x&&!N(x))throw w.getError("Invalid parentId property");let S=i.tree.getNode(x&&N(x)?x:i.scopeStore.activeId);if(!S)throw w.getError("Parent not found");return m(f(w,k,S.id,he(C)?C:void 0))}})}b.create=n;async function r(v){let w=u(),P=h(v);return i.modulesStore.addExternalModulesToProject([...P],{onTreeUpdate:()=>{let x=[];for(let C of v){let{id:k,__parentId:S,__position:R,children:L,__class:E,...$}=C;if(!k||!N(k))throw w.getError('Missing a valid "id" field');let ee=i.tree.getNode(k);if(!ee)throw w.getError("Not found",k);if(S&&N(S)){let U=i.tree.getNode(S);if(!U)throw w.getError("Not found as parent",S);if(!$c(i.tree,U,ee,i.scopeStore.active.id,Te))throw w.getError(`Cannot move to parent with ID ${S}`,k)}L&&w.warn("Skipping children, recursive updates not supported",k),E&&w.warn("Node type (__class) cannot be updated",k);let Q=m(ee),te=Object.keys(Q),K={};Object.keys($).forEach(U=>{if(!te.includes(U)&&!xc(U)){w.warn("Skipping setting ${key}, not found on original",k);return}K[U]=$[U]}),x.push(()=>{if(ee.set($),N(S)||he(R)){let U=N(S)?S:ee.parentid,oe=he(R)?R:void 0;i.moveNode(ee.id,U,oe)}})}x.map(C=>C())}})}b.update=r;async function a(v,...w){return i.processWhenReadyAsync(()=>{[v,...w].forEach(P=>{i.tree.remove(P)})})}b.remove=a;function c(){return m(i.selection.nodes[0])}b.selected=c;async function d(v,w=!0){return i.processWhenReadyAsync(()=>{let P=i.tree.getNode(v);if(P&&(i.scopeStore.selectByNode(P.id),i.selection.set(P.id),w)){let x=i.tree.getBoundingFrameForNodes([P]);i.canvasStore.zoomToCenter(x,{animated:i.persistedUserDefaults.animateOnZoom})}})}b.select=d;function p(v){let w=i.tree.getNode(v);if(!(w instanceof pa))return;let P=i.modulesStore.getPersistedModuleByLocalIdentifier(w.codeComponentIdentifier);if(P)return`${P.importURL}@${P.saveId}`}b.componentURL=p;function l(v){let w=Go(v);if(!w)return;let P=Te.componentForIdentifier(v);if(!P)return;let{name:x,properties:C,file:k,packageIdentifier:S}=P,R={name:x,properties:C};if(_t(w))return w.type==="codeFile"?{...R,file:k}:R;if(ta(w))return{...R,url:S}}b.componentInfo=l;async function s(v,w){let P=u(),{reorder:x=!1,reset:C=!1}=w||{};return i.processWhenReadyAsync(()=>{let k=i.tree.ensureColorStyleTokenListNode(),S=[],R;C&&(R=new Set(k.children.filter(L=>L.installed).map(L=>L.id))),Object.entries(v).forEach(([L,{name:E,color:$,darkColor:ee}])=>{let Q=i.tree.getNode(L);if(Q===null)i.tree.insertNode(new ma({id:L,name:E,light:$,dark:ee,installed:!0}),k.id),S.unshift(L);else{if(!(Q instanceof ma)||Q.parentid!==k.id){P.warn("Node exists but is not a color, skipping",L);return}Q.set({name:E,light:$,dark:ee,installed:!0}),S.unshift(L)}R?.delete(L)}),x&&S.forEach(L=>{i.tree.move(L,k.id,0)}),R?.forEach(L=>{i.tree.remove(L)})})}b.installColors=s;function m(v){if(!v)return;let w=["cache","mutable","update"],P={};return(v instanceof Cc?v.keys():Object.keys(v)).forEach(C=>{if(w.includes(C))return;let k=v[C];C==="children"&&(k=k?.map(m)),P[C]=k}),P}function f(v,w,P,x){if(!w)throw v.getError("Missing properties");let C=el,{id:k,__class:S,children:R,...L}=w;switch(S){case"CodeComponentNode":{C=pa;break}case"CanvasPageNode":{C=Yc,P=void 0;break}}let E=i.tree.create(C,P,L);if(E.parentid&&he(x)&&i.tree.moveNode(E,E.parentid,x),Array.isArray(R))try{R.forEach($=>f(v,$,E.id))}catch($){throw i.tree.remove(E.id),$}return E}function h(v,w=new Set){for(let{__class:P,codeComponentIdentifier:x,children:C}of v){if(Do(C)&&h(C,w),P!=="CodeComponentNode"||!N(x))continue;let k=Go(x);!k||!ta(k)||!Ao(k)||w.add(k)}return w}function u(){let v=new Error,w=v.stack?.split(`
`)??[],P;w[0]==="Error"?(P=w[2],w[0]="Error: $$message$$",w.splice(1,1)):w.splice(0,1);let x=P?.match(/\s*at Object\.(\S+)( \[as (\S+)\])?/),C=x?`.${x[3]??x[1]}`:"",k=(R,L)=>{let E=L?`[Node ${L}] `:"";return`VEX${C}: ${E}${R}`},S=R=>{let L=[...w];return L[0]=L[0]?.replace("$$message$$",R)??"",L.join(`
`)};return{warn:(R,L)=>{console.warn(k(R,L))},getError:(R,L)=>(v.message=k(R,L),v.stack=S(v.message),v)}}})(ci||={});var Oa=y(F());var Uu="container_c1m6xhbt";var li=y(I()),Qb=kd(i.assetStore.assetMap);rc({assetResolver:Qb,fetchGoogleFontsList:Xd,fetchFontshareFontsList:Kd,fetchBuiltInFontsList:Zd,enableFontStore:!0,executionTimeBudgets:{frame:500,component:150},experiments:Yo,projectFeatures:xo});dl(!0);if(i.chromeStore.userIsEmployee||Vs.isDevelopment)window.Vekter=Yd.Vekter,window.VEX=ci;else{let e=["e96bd9c5-e994-4069-955c-a665e70135ef"];window?.framerUser.spaces.some(t=>to(t)&&t.organization&&e.includes(t.organization.id))&&(window.VEX=ci)}Ks({target:Xs.canvas});var zu=Oa.default.memo(function(){let{isDarkMode:o}=ro(),{isComponentOverlayEditMode:t}=Vo([i.scopeStore,i.chromeStore,i.overlayStore],()=>({isComponentOverlayEditMode:(Qr(i.scopeStore.active)||Kr(i.scopeStore.active))&&i.overlayStore.editModeActive&&i.chromeStore.mainView===0}));return i.documentSettings.syncDarkAppearance(o),Lp(window),window.addEventListener("touchmove",Kb,{passive:!1}),Oa.default.useEffect(()=>{document.body.classList.toggle(Jd,t)},[t]),(0,li.jsx)("div",{className:Uu,children:(0,li.jsx)(ep,{children:(0,li.jsx)(bm,{})})})});function Kb(e){e.touches.length>1&&(e.preventDefault(),e.stopPropagation())}var Oo=y(I());function Ou({socket:e,projectId:o,userId:t,documentConnection:n}){return(0,Ha.useEffect)(()=>{n.setSendFunction(d=>{e.send(d)});let r=e.onConnect(d=>{n.onConnect(),d||i.modulesStore.refresh().catch(q)}),a=e.onDisconnect(d=>n.onDisconnect(d)),c=e.onMessage(d=>n.onMessage(d));return e.connect(),()=>{r(),a(),c()}},[n,e,o,t]),(0,Ha.useEffect)(()=>e.onDisconnect(a=>{switch(a){case"AccessDenied":{window.location.reload();break}case"DocumentNotFound":{T({type:"add",variant:"error",key:"document-not-found",text:"The project data could not be loaded. If this error persists, please notify Framer Support.",duration:1/0,icon:"error",showCloseButton:"never"});break}case"UnsupportedSchema":{T({type:"add",variant:"error",key:"unsupported-schema",text:"Outdated document version. Opening this document is no longer supported.",duration:1/0,icon:"error",showCloseButton:"never"});break}}}),[e,o]),(0,Oo.jsx)(_n,{location:"vekter",title:"Failed to load editor",description:(0,Oo.jsxs)(Oo.Fragment,{children:[(0,Oo.jsx)(_,{children:"Something unexpected happened while loading the editor. Try disabling any ad-blocking browser extensions and reload the page."}),(0,Oo.jsx)("br",{}),(0,Oo.jsx)("br",{})]}),children:(0,Oo.jsx)(zu,{})})}var Jb={label:"Edit",submenu:[{label:g.undo,role:"undo"},{label:g.redo,role:"redo"},{type:"separator"},{label:g.goBack,role:"goBack",acceleratorLabel:M.goBack},{label:g.goForward,role:"goForward",acceleratorLabel:M.goForward},{type:"separator"},{label:g.cut,role:"cut",requiresUserInteraction:!0},{label:"Copy",submenu:[{label:g.copy,role:"copy",requiresUserInteraction:!0},{label:g.copyStyle,role:"copyStyle",accelerator:M.copyStyle,requiresUserInteraction:!0},{label:g.copyFill,role:"copyFill",accelerator:M.copyFill,requiresUserInteraction:!0},{label:g.copyLink,role:"copyLink",requiresUserInteraction:!0},{label:g.copyCSS,role:"copyCSS",requiresUserInteraction:!0},{label:g.copySVG,role:"copySVG",requiresUserInteraction:!0},{label:g.copyText,role:"copyText",requiresUserInteraction:!0},{label:g.copyGrid,role:"copyGrid",requiresUserInteraction:!0},{label:g.copyEffects,role:"copyEffects",requiresUserInteraction:!0},{label:g.copyCursor,role:"copyCursor",requiresUserInteraction:!0},{label:g.copyURL,role:"copyURL",requiresUserInteraction:!0}]},{label:"Paste",submenu:[{label:g.paste,role:"paste",requiresUserInteraction:!0},{label:g.pasteStyle,role:"pasteStyle",accelerator:M.pasteStyle,requiresUserInteraction:!0},{label:g.pasteFill,role:"pasteFill",requiresUserInteraction:!0},{label:g.pasteInPlace,role:"pasteInPlace",accelerator:M.pasteInPlace,requiresUserInteraction:!0},{label:g.pasteEffects,role:"pasteEffects",requiresUserInteraction:!0},{label:g.pasteCursor,role:"pasteCursor",requiresUserInteraction:!0},{label:g.pasteGrid,role:"pasteGrid",requiresUserInteraction:!0}]},{label:g.duplicate,role:"duplicate",accelerator:M.duplicate},{label:g.delete,role:"delete"},{type:"separator"},{label:g.openPanelSearch,role:"openPanelSearch",accelerator:M.openPanelSearch},{label:g.rename,role:"rename",accelerator:M.rename},{label:g.generateLayerNames,role:"generateLayerNames"},{label:g.toggleLayerLock,role:"toggleLayerLock",accelerator:M.toggleLayerLock},{label:g.toggleLayerVisible,role:"toggleLayerVisible",accelerator:M.toggleLayerVisible},{type:"separator"},{label:g.selectMostRecentPage,role:"selectMostRecentPage",accelerator:M.selectMostRecentPage},{label:g.selectGroundNode,role:"selectGroundNode",acceleratorLabel:M.selectGroundNode,acceleratorLabelWindows:Co.selectGroundNode},{label:g.selectParent,role:"selectParent",acceleratorLabel:M.selectParent},{label:g.selectAll,role:"selectAll"},{label:g.selectSiblings,role:"selectSiblings",accelerator:M.selectSiblings},{label:g.selectChildren,role:"selectChildren"},{label:g.selectAllTopParents,role:"selectAllTopParents"},{label:g.selectTextNodes,role:"selectTextNodes"}]},ev={label:"Tool",submenu:[{label:"Insert",role:"toggleInsert",accelerator:M.toggleInsert},{label:"Wireframer",role:"generateWebPage",accelerator:M.generateWebPage},{type:"separator"},{label:"Layout",submenu:[{label:g[B.actionForCase(20)],role:B.actionForCase(20),accelerator:M[B.actionForCase(20)]},{label:g[B.actionForCase(21)],role:B.actionForCase(21),accelerator:M[B.actionForCase(21)]},{label:g[B.actionForCase(22)],role:B.actionForCase(22),accelerator:M[B.actionForCase(22)]},{label:g[B.actionForCase(24)],role:B.actionForCase(24)},{label:g[B.actionForCase(23)],role:B.actionForCase(23)}]},{label:g[B.actionForCase(10)],role:B.actionForCase(10),accelerator:M[B.actionForCase(10)]},{label:g[B.actionForCase(11)],role:B.actionForCase(11),accelerator:M[B.actionForCase(11)]},{label:g[B.actionForCase(12)],role:B.actionForCase(12),accelerator:M[B.actionForCase(12)]},{label:g[B.actionForCase(45)],role:B.actionForCase(45),accelerator:M[B.actionForCase(45)]},{label:g[B.actionForCase(14)],role:B.actionForCase(14),accelerator:M[B.actionForCase(14)]},{label:g.startLinkTool,role:"startLinkTool",accelerator:M.startLinkTool},{label:g[B.actionForCase(19)],role:B.actionForCase(19),accelerator:M[B.actionForCase(19)]},{label:g[B.actionForCase(46)],role:B.actionForCase(46),accelerator:M[B.actionForCase(46)]},{label:"Vector",submenu:[{label:g[B.actionForCase(33)],role:B.actionForCase(33),accelerator:M[B.actionForCase(33)]},{label:g[B.actionForCase(16)],role:B.actionForCase(16),accelerator:M[B.actionForCase(16)]},{label:g[B.actionForCase(15)],role:B.actionForCase(15),accelerator:M[B.actionForCase(15)]},{label:g[B.actionForCase(17)],role:B.actionForCase(17)},{label:g[B.actionForCase(18)],role:B.actionForCase(18)}]},{type:"separator"},{label:"Library",role:"toggleLibraryModal",acceleratorLabel:M.toggleLibraryModal},{label:g[B.actionForCase(4)],role:B.actionForCase(4),accelerator:M[B.actionForCase(4)]},{label:g[B.actionForCase(41)],role:B.actionForCase(41),accelerator:M[B.actionForCase(41)]},{label:g[B.actionForCase(40)],role:B.actionForCase(40),accelerator:M[B.actionForCase(40)]},{label:g.sampleColor,role:"sampleColor",accelerator:M.sampleColor}]},ov={label:"Layout",submenu:[{label:g.addEnclosingFrame,role:"addEnclosingFrame",accelerator:M.addEnclosingFrame},{label:g.addEnclosingStack,role:"addEnclosingStack",accelerator:M.addEnclosingStack},{label:g.removeFramePreservingChildren,role:"removeFramePreservingChildren",accelerator:M.removeFramePreservingChildren},{type:"separator"},{label:g.autoSizeLayout,role:"autoSizeLayout",accelerator:M.autoSizeLayout},{label:g.sizeToFitContent,role:"sizeToFitContent",accelerator:M.sizeToFitContent},{type:"separator"},{label:g.moveToFront,role:"moveToFront",accelerator:M.moveToFront},{label:g.moveForward,role:"moveForward",accelerator:M.moveForward},{label:g.moveBackward,role:"moveBackward",accelerator:M.moveBackward},{label:g.moveToBack,role:"moveToBack",accelerator:M.moveToBack},{type:"separator"},{label:"Align",submenu:[{label:g.alignLeft,role:"alignLeft",accelerator:M.alignLeft},{label:g.alignCenter,role:"alignCenter",accelerator:M.alignCenter},{label:g.alignRight,role:"alignRight",accelerator:M.alignRight},{type:"separator"},{label:g.alignTop,role:"alignTop",accelerator:M.alignTop},{label:g.alignMiddle,role:"alignMiddle",accelerator:M.alignMiddle},{label:g.alignBottom,role:"alignBottom",accelerator:M.alignBottom},{type:"separator"},{label:g.distributeHorizontal,role:"distributeHorizontal",accelerator:M.distributeHorizontal,acceleratorWindows:Co.distributeHorizontal},{label:g.distributeVertical,role:"distributeVertical",accelerator:M.distributeVertical,acceleratorWindows:Co.distributeVertical},{type:"separator"},{label:g.alignToSelection,role:"alignToSelection"},{label:g.alignToParent,role:"alignToParent"}]}]},tv={label:"Text",submenu:[{label:g.makeBold,role:"makeBold",accelerator:M.makeBold},{label:g.makeItalic,role:"makeItalic",accelerator:M.makeItalic},{label:g.makeUnderlined,role:"makeUnderlined",accelerator:M.makeUnderlined},{label:g.chooseFontFamily,role:"chooseFontFamily",accelerator:M.chooseFontFamily}]},rv={label:"Vector",submenu:[{label:"Group",role:"group",accelerator:M.group},{label:"Ungroup",role:"ungroup",accelerator:M.ungroup},{type:"separator"},{label:g.flipHorizontal,role:"flipHorizontal"},{label:g.flipVertical,role:"flipVertical"},{type:"separator"},{label:"Flatten",role:"flattenPath"},{label:"Reverse Path Direction",role:"reversePath"},{type:"separator"},{label:g.unite,role:"unite",accelerator:M.unite},{label:g.subtract,role:"subtract",accelerator:M.subtract},{label:g.intersect,role:"intersect",accelerator:M.intersect},{label:g.exclude,role:"exclude",accelerator:M.exclude},{label:g.join,role:"join",accelerator:M.join}]},nv={label:"Component",submenu:[{label:g.makeComponent,ellipsis:!0,role:"makeComponent",accelerator:M.makeComponent},{label:g.makeCodeComponent,ellipsis:!0,role:"makeCodeComponent",accelerator:M.makeCodeComponent},{type:"separator"},{label:g.showComponentMaster,role:"showComponentMaster"},{label:g.detachComponentInstanceFromMaster,role:"detachComponentInstanceFromMaster"},{label:g.updateComponentMasterFromInstance,role:"updateComponentMasterFromInstance"},{type:"separator"},{label:g.resetComponentInstanceOverrides,role:"resetComponentInstanceOverrides"}]},iv={label:"Preview",submenu:[{role:"showPreview",accelerator:M.showPreview}]},av={label:"Plugins",submenu:[{label:g.openPlugins,role:"openPlugins"},{label:g.runRecentPlugin,role:"runRecentPlugin",accelerator:M.runRecentPlugin},{label:g.clearRecentPlugins,role:"clearRecentPlugins"},{label:g.openDevelopmentPlugin,role:"openDevelopmentPlugin",accelerator:M.openDevelopmentPlugin},{type:"separator"},{label:g.showPluginDeveloperTools,role:"showPluginDeveloperTools"},{label:g.openPluginDocumentation,role:"openPluginDocumentation"}]},sv={label:"Code",submenu:[{label:g.createCodeComponent,role:"createCodeComponent"},{label:g.createOverride,role:"createOverride"},{type:"separator"},{label:g.saveCodeFile,role:"saveCodeFile",acceleratorLabel:M.saveCodeFile},{type:"separator"},{label:g.showAPIDocumentation,role:"showAPIDocumentation",requiresUserInteraction:!0}]},cv={label:"Help",submenu:[{label:g.sitesGetStarted,role:"sitesGetStarted",requiresUserInteraction:!0},{label:g.browseMarketplace,role:"browseMarketplace",requiresUserInteraction:!0},{label:g.startAppTour,role:"startAppTour",requiresUserInteraction:!0},{type:"separator"},{label:g.requestFeature,role:"requestFeature",requiresUserInteraction:!0},{label:g.openCommunity,role:"openCommunity",requiresUserInteraction:!0},{type:"separator"},{label:g.keyboardShortcuts,role:"keyboardShortcuts"},{label:g.copyVersion,role:"copyVersion",requiresUserInteraction:!0},{label:g.contactSupport,role:"contactSupport"}]},Hu={label:g.goToProjects,role:"goToProjects"},lv={label:g.quickActions,role:"quickActions",ellipsis:!0,accelerator:M.quickActions},_u=e=>({role:"publishSite",accelerator:e?M.publishSite:void 0}),cr=oa({view:()=>({label:"View",submenu:[{label:g.zoomIn,role:"zoomIn",accelerator:M.zoomIn},{label:g.zoomOut,role:"zoomOut",accelerator:M.zoomOut},{label:g.resetZoom,role:"resetZoom",accelerator:M.resetZoom,acceleratorWindows:Co.resetZoom},{label:g.zoomToFitAll,role:"zoomToFitAll",accelerator:M.zoomToFitAll,acceleratorWindows:Co.zoomToFitAll},{label:g.zoomToFitSelection,role:"zoomToFitSelection",accelerator:M.zoomToFitSelection,acceleratorWindows:Co.zoomToFitSelection},{label:g.collapseLayers,role:"collapseLayers",accelerator:M.collapseLayers},{type:"separator"},{label:g.showPages,role:"showPages",accelerator:M.showPages},{label:g.showLayers,role:"showLayers",accelerator:M.showLayers},{label:g.showAssets,role:"showAssets",accelerator:M.showAssets},{type:"separator"},{label:g.toggleInterface,role:"toggleInterface",accelerator:M.toggleInterface,acceleratorWindows:Co.toggleInterface},{label:g.toggleShowAllLinks,role:"toggleShowAllLinks"},{label:"Show Handoff",role:"toggleShowHandoff"},{label:g.toggleRulers,role:"toggleRulers",accelerator:M.toggleRulers,acceleratorWindows:Co.toggleRulers},{label:g.toggleGrids,role:"toggleGrids",accelerator:M.toggleGrids,acceleratorWindows:Co.toggleGrids},{label:g.toggleShowPixelGrid,role:"toggleShowPixelGrid"}]}),webViewMenu:()=>({label:"View",submenu:[{label:"Appearance",submenu:[{label:g.toggleAppearanceSystem,role:"toggleAppearanceSystem"},{role:"toggleAppearance",accelerator:M.toggleAppearance,acceleratorWindows:Co.toggleAppearance}]},{type:"separator"},{role:"toggleContentManagement",label:g.toggleContentManagement,accelerator:M.toggleContentManagement},{role:"newCollectionItem",label:g.newCollectionItem,accelerator:M.newCollectionItem},{role:"toggleLocalization",label:g.toggleLocalization,accelerator:M.toggleLocalization},{label:g.openAnalytics,role:"openAnalytics"},{type:"separator"},...Array.isArray(cr.view.submenu)?cr.view.submenu:[]]}),webFileMenu:()=>({label:"File",submenu:[{role:"newProject",ellipsis:!0,accelerator:M.newProject,requiresUserInteraction:!0},{label:"New Page",role:"newWebPage"},{label:"New Page Folder",role:"newWebPageFolder"},{label:"Sort Pages Alphabetically",role:"sortWebPagesAlphabetically"},{label:"Sort Layers Alphabetically",role:"sortLayersAlphabetically"},{type:"separator"},{role:"duplicateProject",requiresUserInteraction:!0},{role:"archiveProject"},{type:"separator"},{role:"copyRemixLink",requiresUserInteraction:!0},{type:"separator"},{role:"inviteCollaborators",ellipsis:!0},{role:"toggleVersionHistory",label:g.toggleVersionHistory,accelerator:M.toggleVersionHistory},{type:"separator"},{label:g.importFigma,ellipsis:!0,role:"importFigma",accelerator:M.importFigma},{type:"separator"},{role:"uploadImage",accelerator:M.uploadImage,requiresUserInteraction:!0},{role:"uploadVideo",requiresUserInteraction:!0},{type:"separator"},_u(!0),{role:"openPublishedSite",accelerator:M.openPublishedSite}]}),preferencesMenu:()=>({label:"Preferences",submenu:[{label:g.newContentAsDraft,role:"newContentAsDraft"},{label:g.useDirectSelect,role:"useDirectSelect"},{label:g.useSmartLayoutPins,role:"useSmartLayoutPins"},{label:g.reverseZoomDirection,role:"reverseZoomDirection"},{label:g.fastZoom,role:"fastZoom"},{label:g.animateOnZoom,role:"animateOnZoom"},{label:g.keyboardZoomsToSelection,role:"keyboardZoomsToSelection"},{label:g.autoSwitchToLayers,role:"autoSwitchToLayers"},{label:g.showScrollToContentToast,role:"showScrollToContentToast"},{label:g.exitCanvasOnDoubleClick,role:"exitCanvasOnDoubleClick"},{type:"separator"},{label:g.resetDefaultFrameBackground,role:"resetDefaultFrameBackground"},{label:g.nudgePreferences,role:"nudgePreferences"},{label:g.togglePerformanceMode,role:"togglePerformanceMode"},{label:g.toggleCanvasPages,role:"toggleCanvasPages",badge:"Legacy"}]}),settingsMenu:()=>({label:"Site Settings",submenu:[{label:g.openSiteSettings,role:"openSiteSettings",accelerator:M.openSiteSettings},{type:"separator"},{label:g.openGeneralSettings,role:"openGeneralSettings"},{label:g.openDomainSettings,role:"openDomainSettings"},{label:g.openRedirects,role:"openRedirects"},{label:g.openForms,role:"openForms"},{label:g.openVersions,role:"openVersions"},{label:g.openPlans,role:"openPlans"}]})}),dv={role:"openAccountSettings",label:g.openAccountSettings},pv={role:"toggleBetaChannel",label:g.toggleBetaChannel,badge:"beta"},_a=oa({mobileWebAppMenu:()=>[Hu,{type:"separator"},_u(!1)],webAppMenu:()=>[Hu,{type:"separator"},lv,{type:"separator"},cr.webFileMenu,Jb,cr.webViewMenu,ev,ov,tv,rv,nv,iv,av,sv,cr.preferencesMenu,{type:"separator"},cr.settingsMenu,cv,dv,{type:"separator"},pv]});var qu=y(F());function Wu(e){let[o,t]=(0,qu.useState)(!1),n=Cp(e);return!o&&!n&&t(!0),o}var Z=y(F());var lr=y(F());var $u="modal_m1k7kvam",Gu="moveDraftTitle_m12ee7ht",Yu="moveDraftDescription_m1jpz33r",Zu="moveDraftButton_mwem6zi",Qu="confirmMoveDraftButton_c1qp1m89",Ku="buttonChevron_bl7xnjh";var Ye=y(I());function Xu({project:e,user:o,onShowMoveProjectMenu:t,onConfirmMoveProject:n,moveProjectDestination:r,onDismiss:a}){let c=(0,lr.useRef)(null);tr("ui_impression",{page:"deprecate-drafts-modal"});let d=(0,lr.useMemo)(()=>kn(e,o.id)==="Drafts"?"Select\u2026":"Drafts",[e,o]);function p(){if(c.current===null)return;let s=c.current.getBoundingClientRect();t({location:{x:s.left,y:s.bottom},skipConfirmation:!0,hideDrafts:!0})}let l=lr.default.useCallback(async()=>{H("ui_interaction",{page:"deprecate-drafts-modal",id:"move-to-teams"}),await n(),a()},[n,a]);return(0,Ye.jsx)(Zt,{hasBackdrop:!0,visible:!0,onDismiss:ct,className:$u,children:(0,Ye.jsxs)(j,{gap:15,alignItems:"flex-start",justifyContent:"flex-start",children:[(0,Ye.jsxs)(j,{gap:10,children:[(0,Ye.jsx)("div",{className:Gu,children:"Select a Workspace"}),(0,Ye.jsx)("div",{className:Yu,children:(0,Ye.jsx)(_,{children:"You have multiple workspaces where you can create projects. Please choose a workspace to add this project to."})})]}),(0,Ye.jsxs)(pe,{className:Zu,large:!0,onClick:p,ref:c,children:[(0,Ye.jsx)("div",{className:Ae,children:r||d}),(0,Ye.jsx)("div",{className:Ku,children:(0,Ye.jsx)(wo,{})})]}),(0,Ye.jsx)(pe,{onClick:l,large:!0,className:Qu,variant:"primary",enabled:!!r&&r!==d,children:(0,Ye.jsx)(_,{children:"Confirm"})})]})})}var pi=y(F());var Ju="modal_m1sbcbyn",ef="title_t14j9fcj",qa="checkBoxLabel_cr11tra",Wa="checkBoxLabelLink_chr9530",of="continueButton_chz9b7s";var di=y(F());var Se=y(I()),uv=ot("signup");function rf({firstName:e,lastName:o,email:t,onContinue:n}){let[r,a]=di.default.useState(!1),[c,d]=di.default.useState(!1),p=di.default.useCallback(l=>{Xt.post("/auth/v2/signup/google-one-tap",{subscribe:c,origin:"framer-web",firstName:e,lastName:o,email:t}).then(n).catch(s=>uv.reportError(s)),l.preventDefault()},[c,t,e,o,n]);return(0,Se.jsx)("form",{onSubmit:p,children:(0,Se.jsxs)(j,{gap:25,padding:10,children:[(0,Se.jsx)("div",{className:ef,children:"Before you continue\u2026"}),(0,Se.jsxs)(j,{gap:20,direction:"column",children:[(0,Se.jsxs)(j,{direction:"row",alignItems:"center",children:[(0,Se.jsx)(wr,{large:!0,id:"tos-accept",value:r,onChange:a}),(0,Se.jsx)("label",{htmlFor:"tos-accept",children:(0,Se.jsx)(fv,{})})]}),(0,Se.jsxs)(j,{direction:"row",alignItems:"center",children:[(0,Se.jsx)(wr,{large:!0,id:"tos-email-optin",title:"Send me updates via email. Unsubscribe any time",value:c,onChange:d}),(0,Se.jsx)("label",{htmlFor:"tos-email-optin",children:(0,Se.jsx)(it,{className:qa,children:"Send me updates via email. Unsubscribe any time"})})]})]}),(0,Se.jsx)(pe,{type:"submit",large:!0,variant:"primary",title:"Continue","aria-label":"continue",enabled:r,className:of})]})})}function fv(){return(0,Se.jsxs)(it,{className:qa,children:["I agree to the"," ",(0,Se.jsx)("a",{href:"https://www.framer.com/support/accounts/terms-of-service/",target:"_blank",className:Wa,children:"Terms of Service"})," ","and"," ",(0,Se.jsx)("a",{href:"https://www.framer.com/support/accounts/privacy-statement/",target:"_blank",className:Wa,children:"Privacy Statement"})]})}function gv(e,o,t){window.dataLayer?.push({event:"eventTracking",trackingEventCategory:o,trackingEventAction:e,trackingEventLabel:"",trackingEventValue:"",firstName:t.firstName,lastName:t.lastName,email:t.email})}var nf=({firstName:e,lastName:o,email:t})=>gv("Web","CompleteRegistration",{firstName:e,lastName:o,email:t});var mi=y(I());function af({accountApi:e}){let{account:o,fetchProfile:t,fetchMe:n}=e;pi.default.useEffect(()=>{t()},[t]),pi.default.useEffect(()=>{if(o?.profile){let{firstName:a,lastName:c,email:d}=o.profile;nf({firstName:a,lastName:c,email:d})}},[o?.profile?.email]);let r=pi.default.useCallback(async()=>{await n(),i.modalStore.set({type:"Welcome",source:"automatic"})},[n]);return(0,mi.jsx)(Zt,{hasBackdrop:!0,visible:!0,onDismiss:ct,className:Ju,children:o?.profile?.email?(0,mi.jsx)(rf,{firstName:o.profile.firstName,lastName:o.profile.lastName,email:o.profile.email,onContinue:r}):(0,mi.jsx)(St,{})})}var $a=y(F());function sf(e){let[o,t]=at.extract(e);(0,$a.useEffect)(()=>{if(!o)return zm();document.querySelectorAll("link[rel='icon']").forEach(n=>{n.setAttribute("href",o)})},[o]),(0,$a.useEffect)(()=>{document.title=`${t} \u2013 Framer`},[t])}var cf="moveProjectMenu_mqspbls";var df=y(F());var lf=new jn;function pf(e,o){return(0,df.useEffect)(()=>{let t=lf,n=[];return e((r,a,c)=>{t.set(r,a,c),n.push(r)}),()=>{n.forEach(r=>t.remove(r))}},o),lf}var mf=y(F());function uf(){return(0,mf.useCallback)(async(e,o,t,n)=>{switch(n||(n=i.canvasStore.getViewportCenter()),e){case"image":await Md(i,[t],n,o);break;case"video":await tp(i,[t],n,o);break;default:ie(e)}},[])}var Dr=y(F());function ff({channel:e,project:o,canMoveProject:t,onShowMoveProjectMenu:n}){let r=new $r,a=(0,Dr.useRef)(r);(0,Dr.useEffect)(()=>{if(!e)return;let c=Gr.on(e).expect();return Gr.on(e).register({currentProjectStream:a.current.newStream,showMoveProjectMenu:async({location:d})=>{n({location:d})}}),()=>{Gr.unregister(c)}},[e,t,n]),(0,Dr.useEffect)(()=>{a.current.emit({title:o.title??void 0,space:{...o.space,displayName:o.space.displayName??void 0,icon:o.space.icon??void 0},canMoveProject:t})},[o,t])}var gf=new $r,hf=!1;function bf({channel:e,user:o,permissions:t}){if(gf.emit(t),hf)return;let n={getSessionIdentity:async()=>({user:o}),permissionsStream:gf.newStream};_s.on(e).register(n),hf=!0}var gi=y(F());function vf(e,o){let t=[],n=e.modulesStore.localModules.values();for(let d of n){if(d?.type!=="codeFile")continue;A(d.sourceContent,"Source content must exist");let p=[];for(let l of Te.getAllEntities()){let s=Go(l.identifier);_t(s)&&Ao(s)&&s.localId===d.localId&&p.push({type:l.type,exportSpecifier:s.exportSpecifier,annotations:l.annotations??{}})}t.push({name:d.name,localId:d.localId,source:d.sourceContent,entities:p})}let{url:r,title:a}=o,c={__framerProjectTitle:a,__framerProjectURL:r,__framerLocalCodeFiles:t,...e.tree.toJS()};return JSON.stringify(c,null,4)}function yf(e){return e?e.trim().replace(/\W+(\b\w|$)/g,(o,t)=>t.toUpperCase()):"document"}function hv(e,o){let t=document.createElement("a");t.href=e,t.download=o,document.body.appendChild(t),t.click(),t.remove()}function ui(e,o,t={type:"application/json"}){let n=new File([e],o,t),r=URL.createObjectURL(n);hv(r,o),URL.revokeObjectURL(r)}var Tt=async e=>{let o=i.remoteDocument?.projectId;o&&(await On(o,{releaseChannel:e}),window.location.reload())};function wf(e){let o=e.get(ll)?.getRedirects()||[],{linksWithLocale:t,linkWithLocaleByRedirect:n}=Ed(o,e.root.locales),r=t.map(({link:s})=>s),a=Ld(e,r),c=Ad(a),d=Dd(e,t,c),p=s=>{let m=n.get(s);return m?d.get(m)??null:null},l="";for(let s of o){let m=s.path,f=jd(s,p);m&&f&&(l+=`${JSON.stringify(m)},${JSON.stringify(f)}
`)}ui(l,"redirects.csv",{type:"text/csv",endings:"native"})}var bv="Settings";function xf(){let e=Tp(Jt,Zr,"employeesOnlySettings");return[{label:bv,submenu:e.options},e.actionHandlers]}var fi="employees-only-menu",vv="Employees Only",Cf=async e=>{let o=i.remoteDocument?.projectId;o&&(await On(o,{canvasFeatures:{[e]:!xo.isOn(e)}}),window.location.reload())};function kf(e,o){let t={[e]:o?"on":"off"};Jt.update(t),Rp(t,"employeesOnlySettings",Zr)}async function Er(e){return new Promise(o=>{i.runWithFullyLoadedTree(o,{name:e})})}function yv(){return Mp({label:"Show Status Bar",role:"toggleStatusBar",accelerator:"CommandOrControl+Option+Shift+B",action(){let e=!i.chromeStore.statusBarIsVisible;kf("showStatusBar",e),i.chromeStore.statusBarIsVisible=e},checked:()=>i.chromeStore.statusBarIsVisible},{label:"Show Debug Bar",role:"toggleDebugBar",accelerator:"CommandOrControl+Shift+D",action(){kf("showDebugBar",!Jt.isOn("showDebugBar"))},checked:()=>Jt.isOn("showDebugBar")},{label:"Show NUX Steps",role:"showNuxSidebar",action:async()=>{await hm(),window.location.reload()}},{type:"separator"},{label:"Kit Project",role:"toggleKitProjectFeature",action:()=>Cf("kit").catch(q),checked:()=>xo.isOn("kit")},{label:"Skip Duplication Page",role:"toggleSkipInterstitial",action:()=>Cf("skipInterstitial").catch(q),checked:()=>xo.isOn("skipInterstitial")},{label:"Project Release Channel",submenu:[{label:"Default",role:"defaultReleaseChannel",action:()=>Tt(null).catch(q),checked:()=>i.projectStore.project?.releaseChannel===null},{type:"separator"},{label:"Stable",role:"stableReleaseChannel",action:()=>Tt("stable").catch(q),checked:()=>i.projectStore.project?.releaseChannel==="stable"},{label:"Beta",role:"betaReleaseChannel",action:()=>Tt("beta").catch(q),checked:()=>i.projectStore.project?.releaseChannel==="beta"},{label:"Alpha",role:"alphaReleaseChannel",action:()=>Tt("alpha").catch(q),checked:()=>i.projectStore.project?.releaseChannel==="alpha"}]},{type:"separator"},{label:"Duplicate Version\u2026",role:"duplicateProjectWithVersion",action(){i.modalStore.set({type:"DuplicateProjectWithVersion",source:"main_menu"})}},{label:"Download Document Fixture\u2026",role:"downloadDocumentFixture",requiresUserInteraction:!0,action(){let e=i.projectStore.project;if(!e)return;let o=vf(i,e),t=`${yf(e.title)}.fixture.json`;ui(o,t)}},{type:"separator"},{label:"Export Redirects",role:"exportRedirects",action(){wf(i.tree)}},{label:"Import Redirects\u2026",role:"importRedirects",action(){Rd(()=>{Td(i,"edit"),i.modalStore.set({type:"ImportRedirects",source:"main_menu"})})}},{type:"separator"},{label:"Instant NPM",submenu:[{label:"Reinstall Import Map",role:"reinstallImportMap",async action(){H("ui_interaction",{page:fi,id:"employees-reinstall-import-map"});let e="reinstall-import-map";T({type:"add",key:e,text:"Reinstalling import map dependencies",variant:"progress",duration:1/0,showCloseButton:"never"});try{await i.modulesStore.uninstallBlockedNpmDependencies();let{importMap:o}=await i.modulesStore.reinstallNpmDependencies();T({type:"add",key:e,text:`Reinstalled ${la(Object.keys(o.imports).length,"dependency","dependencies")}. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(o){T({type:"add",key:e,text:`Reinstall failed: ${o}`,variant:"error",duration:5e3})}}},{label:"Rebuild Import Map from Dependencies",role:"rebuildImportMap",async action(){H("ui_interaction",{page:fi,id:"employees-rebuild-import-map"});let e="rebuild-import-map";T({type:"add",key:e,text:"Rebuilding Import Map from Dependencies.json",variant:"progress",duration:1/0});try{await i.modulesStore.removeBlockedNpmDependencies();let{importMap:o}=await i.modulesStore.rebuildImportMapFromDependencies();T({type:"add",key:e,text:`Built an import map with ${la(Object.keys(o.imports).length,"dependency","dependencies")}. Reloading Project.`,duration:5e3,variant:"success"}),window.location.reload()}catch(o){console.error("Rebuild of import map failed",o),T({type:"add",key:e,text:`Rebuild of import map failed: ${o}`,variant:"error",duration:1/0})}}},{label:"Upgrade Rive to latest",role:"updateRiveDependency",async action(){H("ui_interaction",{page:fi,id:"employees-rebuild-import-map"});let e="upgrade-rive-dependency";T({type:"add",key:e,text:"Installing latest version of Rive",variant:"progress",duration:1/0});try{await i.modulesStore.unsafeUpgradeDependency("@rive-app/react-canvas",["@rive-app/canvas"]),T({type:"add",key:e,text:"Rive dependency upgraded",duration:5e3,variant:"success"}),window.location.reload()}catch(o){console.error("Rive dependency upgrade failed.",o),T({type:"add",key:e,text:`Upgrade failed: ${o}`,variant:"error",duration:1/0})}}},{type:"separator"},{label:"Clear NPM Dependencies",role:"clearNpmDependencies",async action(){async function e(){H("ui_interaction",{page:fi,id:"employees-clear-dependencies"});try{await i.modulesStore.clearNpmDependencies(),T({type:"add",text:"NPM Dependencies are cleared. Reloading Project.",variant:"success",duration:5e3}),window.location.reload()}catch(o){T({type:"add",text:`Clearing Dependencies failed: ${o}`,variant:"error",duration:5e3})}}i.modalStore.set({type:"Confirmation",title:"Clear NPM Dependencies",variant:"destructive",description:"This will break any local or external components in your project that use Instant NPM. Are you sure?",onConfirm:e,confirmLabel:"Confirm",source:"main_menu"})}}]},{label:"Repair Corrupt Modules",role:"repairCorruptModules",async action(){let e="repair-corrupt-modules";await Er(e);let o=Array.from(i.modulesStore.localModules.values()),t={method:"HEAD",mode:"cors"},n=[];for(let[p,l]of o.entries()){T({type:"add",key:e,text:`Analyzing module ${p+1} out of ${o.length} for corruption\u2026`,duration:1/0,variant:"progress"});let s=i.modulesStore.getPersistedModuleByLocalId(l.localId);if(!s)continue;let m=[];try{for(let[f,h]of Object.entries(s.files))(await fetch(s.baseURL+h,t)).ok||m.push({type:f,name:h})}catch{continue}m.length&&n.push({localId:l.localId,type:l.type,files:m})}if(!n.length){T({type:"add",key:e,text:"No corrupt modules found.",duration:5e3,variant:"success"});return}T({type:"remove",key:e}),console.log(n);let a=["The following module(s) are corrupt. Repair?","WARNING: This will replace the corrupt files with empty content.",n.map(({localId:p,files:l})=>`${p} (${l.map(s=>s.name).join(", ")})`).join(`
`)];if(!window.confirm(a.join(`

`)))return;let c=n.length,d=0;for(let p=0;p<c;p++){let l=n[p];if(l){T({type:"add",key:e,text:`Repairing corrupt module ${p+1} out of ${c}\u2026`,duration:1/0,variant:"progress"});try{let s=i.modulesStore.forType(l.type).getByLocalId(l.localId),m=l.files.map(f=>({...f,content:""}));await s.persist({files:m})}catch(s){T({type:"add",text:`Repairing ${l.localId} failed: ${s}`,variant:"error",duration:5e3}),d++}}}T({type:"add",key:e,text:d>0?`Repaired ${c-d} out of ${c} module(s).`:`Repaired ${c} module(s).`,duration:5e3,variant:d>0?"error":"success"})}},{label:"Replace Module in CMS",role:"replaceModuleInCMS",async action(){let e="repair-corrupt-modules",o=prompt("existing module identifier to replace"),t=prompt("new module identifier to replace");o&&t&&Ao(o)&&Ao(t)?i.processWhenReady(()=>{tl(i.tree,o,t),T({type:"add",key:e,text:`replaced all references of from:'${o}' with to:'${t}' in CMS collection items`,duration:5e3,variant:"success"})}):T({type:"add",key:e,text:`from:'${o}' OR to:'${t}' are not values is not a valid ModuleExportIdentifer`,duration:5e3,variant:"error"})}},{label:"Vacuum Modules with Deleted Nodes",role:"vacuumModules",async action(){let e="vacuum-modules";await Er(e);let o=new Set,t=new Set,n=new Set;for(let l of i.tree.root.walk())if(mc(l)&&l.dataIdentifier&&o.add(l.dataIdentifier),Xr(l)&&l.isVectorInstance&&Ao(l.codeComponentIdentifier)){t.add(l.codeComponentIdentifier);let s=Qc(Go(l.codeComponentIdentifier),i.tree,i.modulesStore);s&&n.add(s.set.moduleId)}let r=Array.from(i.modulesStore.localModules.values()),a=r.filter(l=>{let s=l.type;switch(s){case"canvasComponent":case"collection":case"css":case"draftCollection":case"prototype":case"screen":case"webPageMetadata":case"layoutTemplate":case"localization":case"vectorSet":case"vector":break;case"codeFile":case"componentPresets":case"config":case"siteMetadata":case"design":return!1;default:ie(s,`Unhandled module type ${l.type}`)}if(s==="vector"){let f=ra(l.localId,"default").value;if(t.has(f))return!1}if(s==="vectorSet"){let f=i.modulesStore.forType("vectorSet").getByLocalId(l.localId).id;if(n.has(f))return!1}if(s==="collection"||s==="draftCollection"){let f=l.localId;s==="draftCollection"&&(f=f.replace("draftCollection","collection"));let h=ra(f,"default").value;if(o.has(h))return!1}let m=i.tree.get(l.name);if(!m)return!0;try{if(s==="localization"||s==="webPageMetadata")return!1;if(!xd(m,i.tree).includes(s))return!0}catch{return!0}return!1}),c=i.modulesStore.localModules.get("config/site");if(c&&a.push(c),!a.length){T({type:"add",key:e,text:"No modules to delete.",duration:5e3,variant:"success"});return}console.log(a);let d=`${a.length} out of ${r.length}`,p=a.map(l=>l.localId).join(", ");if(window.confirm(`Found ${d} unused module(s). Delete?

${p}`)){T({type:"add",key:e,text:`Deleting ${a.length} modules\u2026`,duration:1/0,variant:"progress"});try{await i.modulesStore.deleteModules(a.map(l=>l.localId)),T({type:"add",key:e,text:`Deleted ${a.length} module(s).`,duration:5e3,variant:"success"})}catch{T({type:"add",key:e,text:"Failed to delete one or more modules. See console for more details.",duration:5e3,variant:"error"})}}}},{label:"Unused Invisible Nodes",submenu:[{label:"Remove All at Once\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes";await Er(e),await Ga(!1,0,e)}},{label:"Remove Slower (One Scope at a Time)\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes-slowly";await Er(e),await Ga(!0,0,e)}},{label:"Remove Even Slower (One Scope at a Time, With Extra Delay)\u2026",role:"cleanupHiddenNodes",async action(){let e="cleanup-hidden-nodes-very-slowly";await Er(e),await Ga(!0,500,e)}}]})}async function Ga(e,o,t){let n=new Map,r=i.tree.root.children.filter(qc);for(let s of r){let m=s.loaded;A(m,"All scopes must be loaded when cleaning up hidden nodes");let f=sm(i.tree,m);f.size>0&&n.set(m.id,f)}if(n.size===0){alert("Found no nodes that are hidden in every breakpoint :(");return}let a=0,c=0,d={};for(let[,s]of n)for(let m of s){let f=i.tree.get(m);f&&(a++,c+=wv(f),d[f.__class]??=[],d[f.__class].push(m))}let p=`Found ${a} fully hidden nodes (+ ${c} descendants), of which: ${Object.entries(d).map(([s,m])=>`${m.length} ${s}${m.length>1?"s":""}`).join(", ")}. Delete? (Check the console for the list of all nodes per class.)`;if(console.log("Cleanup hidden nodes: node IDs per class:",d),!window.confirm(p))return;let l=0;for(let[,s]of n)await new Promise(m=>{i.processWhenReady(()=>{i.setEditReason("cleanup hidden nodes");for(let f of s)i.tree.remove(f);l+=s.size,T({type:"add",key:t,text:`Deleted ${l} out of ${a} hidden nodes\u2026`,duration:1/0,variant:"progress"}),e?Wr(o).then(()=>{i.codeGenerationStore.generateAndUpdateQueuedComponents().finally(m)}):m()})});T({type:"add",key:t,text:`Deleted ${a} hidden nodes.`,duration:5e3,variant:"success"})}function wv(e){let o=0;for(let t of e.descendants())o++;return o}function Pf(e,o,t){let n=t.findIndex(a=>a.label===e)+1,r=[...t];return r.splice(n,0,o),r}function Sf(){let[e,o]=Ap(),[t,n]=xf(),[r,a]=yv();return[{label:vv,submenu:[e,t,...r]},{...o,...n,...a}]}var Ya={delete:"Delete",redo:"CommandOrControl+Shift+Z",selectAll:"CommandOrControl+A",undo:"CommandOrControl+Z"},If={copy:"CommandOrControl+C",cut:"CommandOrControl+X",paste:"CommandOrControl+V"};An()||(Ya.sampleColor="");var xv=new Set(["toolCreateScreen","toolCreateFrame","toolCreateRounded","toolCreateText","toolCreateStack","toolNavigationLink","toolPath","toolCreateRectangleShape","toolCreateOvalShape","toolCreatePolygonShape","toolCreateStarShape","toolComment","toolZoom","sampleColor","quickActions"]),Cv={duplicateTemplate:"canUseCustomTemplates"},kv=new Set(["Delete"]),jr=class{constructor(o,t){this.onCancelledDispatch=t;Oe(this,"defaultActionHandler");Oe(this,"actionHandlers",{});Oe(this,"menu");Oe(this,"acceleratorToAction",{});Oe(this,"bindings",new jn);this.menu=Pd(o,n=>{if(n.type!=="normal"||!n.action)return;let r=Ya[n.action];r!==void 0&&(n.accelerator=r,n.acceleratorLabelTokens=va(r)),n.accelerator&&(this.acceleratorToAction[n.accelerator]=n.action);let a=If[n.action];a!==void 0&&(n.acceleratorLabelTokens=va(a))});for(let n in this.acceleratorToAction){if(kv.has(n))continue;let r=this.acceleratorToAction[n];r&&this.bindings.set(n,a=>this.dispatch(r,a),r)}}updateActionHandlers(o){Object.assign(this.actionHandlers,o)}async dispatch(o,t={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1}){switch(o){case"toolCreateScreen":return!1}let n=await this.getActionHandler(o),r=n.enabled&&!n.enabled(),a=n.visible&&!n.visible();return r||a?(this.onCancelledDispatch(o,{disabled:r,hidden:a}),!1):(await n.action(t),!0)}async getActionHandler(o){let t=this.actionHandlers[o];if(t)return t;let n=this.defaultActionHandler&&await this.defaultActionHandler(o);if(!n)throw Error("Could not get action handler");return n}async handleKeyboardEvent(o){if(Pr())return!0;let t=this.bindings.get(o);if(!t)return!1;let{action:n,actionName:r}=t;if(o.repeat&&xv.has(r))return o.preventDefault(),o.stopPropagation(),!0;let a=await n(o);return a&&(o.preventDefault(),o.stopPropagation()),a}async validateMenu(o){for(let t of o)if(t.type==="normal"){if(t.action){let n=await this.getActionHandler(t.action);if(n.checked){let a=n.checked();a!==void 0&&(t.checked=a)}if(n.enabled&&(t.disabled=!n.enabled()),n.label){let a=n.label();a!==void 0&&(t.label=`${a}${n.ellipsis?.()?"\u2026":""}`)}if(n.visible){let a=n.visible();a!==void 0&&(t.visible=a)}let r=Cv[t.action];!t.disabled&&r&&Mn.is(r,"upsell")&&(t.badge="pro")}!t.disabled&&t.submenu&&await this.validateMenu(t.submenu)}}};function Mf(e){let o=new URL(window.location.href);o.searchParams.delete("node"),Gt(o.href),e({type:"add",variant:"success",icon:"success",text:"Copied Project Link"})}function Rf(e){let o=`FramerWeb/6aebf05 ${navigator.userAgent}`;Gt(o),e?.({type:"add",variant:"success",icon:"success",text:"Copied Framer version: 6aebf05"})}function Za(e,o){let t=[];for(let n of e){let[r,a]=o(n);r!==void 0&&t.push(r),a&&a.length>0&&t.push(...Za(a,o))}return t}var dr={},Nr;function Af(e,o){if(Nr)return Nr;let t=Pv(e,o);return Nr=t,setTimeout(()=>{t===Nr&&(Nr=null)}),t}var Tf=!1;async function Pv(e,o){if(!Tf){Tf=!0;let n=Za(e,r=>r.role?[o.validate({action:r.role}).then(()=>{}),r.submenu]:[void 0,r.submenu]);await Promise.all(n)}let{states:t}=await o.validate({action:"*"});for(let n of t)dr[n.action]=n}function Ef({appMenu:e,archiveProject:o,handleNewProject:t,handleProjectDuplication:n,onPreviewToggle:r,filePickerRef:a,openAccountSettings:c,onUploadMediaFilePick:d,menuActionTargetService:p,saveTemplateAsProject:l,project:s,toast:m,unarchiveProject:f,user:h,userCanArchive:u}){let{isDarkMode:b,isOverridingSystem:v,setDarkMode:w,setOverrideSystem:P}=ro(),x=!pt("canDesign"),C=!pt("canInviteCollaborators"),k=(0,gi.useMemo)(()=>{let S=Iv(e,h.isFramerEmployee?Sf():void 0,m);return S.defaultActionHandler=async R=>(p&&await Af(e,p),{action:async()=>{p&&(window.focus(),await p.dispatch({action:R}))},checked:()=>dr[R]?.checked??!1,enabled:()=>!!dr[R]?.enabled,label:()=>dr[R]?.label,visible:()=>{let L=dr[R];return L&&L.visible!==!1}}),S},[e,h.isFramerEmployee,m,p]);return(0,gi.useEffect)(()=>{let S=R=>{!i.contextMenuStore.menu&&!xa.hotKeysDisabled()&&k.handleKeyboardEvent(R),Sv(R)};return window.addEventListener("keydown",S,!0),()=>{window.removeEventListener("keydown",S,!0)}},[k]),k.updateActionHandlers({copyVersion:{action:()=>{Rf(m)}},saveTemplateAsProject:{action:()=>l(),label:()=>g.saveTemplateAsProject,enabled:()=>x,visible:()=>Qt(s)&&!s.archived&&!oo(s.space)},archiveProject:{action:()=>o(),label:()=>g.archiveProject,enabled:()=>u,visible:()=>!s.archived},unarchiveProject:{action:()=>f(),label:()=>g.unarchiveProject,enabled:()=>u,visible:()=>s.archived},newProject:{action:()=>t(),label:()=>g.newProject},copyProjectLink:{action:()=>{Mf(m)},label:()=>g.copyProjectLink},duplicateProject:{action:()=>n(),label:()=>g.duplicateProject,visible:()=>!Qt(s),enabled:()=>Dn(h,s)},showPreview:{action:()=>{Tn.close().catch(q),r()},label:()=>g.showPreview,enabled:()=>!(i.siteSettings.isOpen||i.scopeStore.scopeType==="DesignPage"&&i.selection.ids.length===0)},openPlugins:{label:()=>g.openPlugins,ellipsis:()=>!0,enabled:()=>i.chromeStore.mainView===0||i.chromeStore.mainView===2,action:()=>{i.modalStore.set({type:"QuickActions",initialCategory:{type:"PluginsCategory"},source:"main_menu"})}},runRecentPlugin:{label:()=>g.runRecentPlugin,enabled:()=>{switch(i.chromeStore.mainView){case 0:return!!i.pluginStore.getRecentPluginForMode("canvas");case 2:return!!i.pluginStore.getRecentPluginForMode("collection");default:return!1}},action:()=>{switch(i.chromeStore.mainView){case 0:{let S=i.pluginStore.getRecentPluginForMode("canvas");S&&i.pluginStore.openPlugin(S,i,{mode:"canvas"}).catch(q);break}case 2:{let S=i.pluginStore.getRecentPluginForMode("collection");S&&i.pluginStore.openPlugin(S,i,{mode:"collection"}).catch(q);break}}}},clearRecentPlugins:{label:()=>g.clearRecentPlugins,enabled:()=>i.pluginStore.hasRecentPlugins(),action:()=>i.pluginStore.clearRecentPlugins()},showPluginDeveloperTools:{label:()=>g.showPluginDeveloperTools,checked:()=>i.persistedUserDefaults.displayPluginDeveloperTools,action:()=>{let{displayPluginDeveloperTools:S}=i.persistedUserDefaults;i.persistedUserDefaults.displayPluginDeveloperTools=!S}},openPluginDocumentation:{label:()=>g.openPluginDocumentation,action:()=>uo("https://framer.com/developers/plugins")},openDevelopmentPlugin:{label:()=>g.openDevelopmentPlugin,enabled:()=>{switch(i.chromeStore.mainView){case 0:case 2:case 5:case 1:return!0;default:return!1}},action:()=>{if(i.pluginStore.isLoading)return;let S=i.pluginStore.activePlugin;if(!S)Ep(i,{type:"PluginsCategory"},void 0);else{if(!Id(S?.manifest.entrypointUrl))return;i.pluginStore.closePlugin(S.manifestId)}}},goToProjects:{action:({ctrlKey:S,metaKey:R})=>{let L=h.spaces.find(ee=>s.space.id===ee.id&&ee.permissions.read),E=Qt(s)?"templates":s.collection?.id||"recent",$=s.space.scope==="organization"&&L?`${Kt}folder/${E}?team=${s.space.id}`:Kt;S||R?uo($):window.location.href=$}},toggleAppearanceSystem:{checked:()=>!v,action:()=>{P(!1)},enabled:()=>!i.siteSettings.isOpen&&v},toggleAppearance:{action:()=>{w(!b)},label:()=>b?"Day Mode":"Night Mode",enabled:()=>!i.siteSettings.isOpen},publishSite:{action:async()=>{await tm(i),await nm(i),await rm(i),await i.publishStore.publish(i)},label:()=>i.publishStore.publishStatus!==1?"Publish Update":g.publishSite,enabled:()=>i.publishStore.canPublish(i)},openPublishedSite:{action:async()=>{let S=i.publishStore.customHostname??i.publishStore.defaultHostname;S&&uo(vd(i,S.hostname))},label:()=>g.openPublishedSite,enabled:()=>x&&!!i.publishStore.defaultHostname&&i.publishStore.defaultHostname.isPublished},inviteCollaborators:{action:()=>{i.popover.active=1,H("ui_interaction",{page:"main-menu",id:"share-project"})},label:()=>g.inviteCollaborators,ellipsis:()=>!0,enabled:()=>i.chromeStore.mainView!==2&&C},uploadImage:{action:()=>{a.current?.show(Kc).then(S=>{if(!S.isFiles())return;let R=S.value[0];return d("image","menu",R)}).catch(q)},label:()=>g.uploadImage,ellipsis:()=>!0,enabled:()=>x&&!i.siteSettings.isOpen},uploadVideo:{action:()=>{a.current?.show(Xc).then(S=>{if(!S.isFiles())return;let R=S.value[0];return d("video","menu",R)}).catch(q)},label:()=>g.uploadVideo,ellipsis:()=>!0,enabled:()=>x&&!i.siteSettings.isOpen},openAccountSettings:{action:()=>{c()}},openAnalytics:{enabled:()=>i.chromeStore.mainView!==6,action:()=>{H("ui_interaction",{id:"open-analytics",page:"main-menu"}),i.analytics.open()}},openSiteSettings:{enabled:()=>!i.siteSettings.isOpen,action:()=>i.siteSettings.open()},openGeneralSettings:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="project",action:()=>i.siteSettings.setActiveTab({tab:"project"})},openDomainSettings:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="domains",action:()=>i.siteSettings.setActiveTab({tab:"domains"})},openRedirects:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="redirects",action:()=>i.siteSettings.setActiveTab({tab:"redirects"})},openForms:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="forms",action:()=>i.siteSettings.setActiveTab({tab:"forms"})},openVersions:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="versions",action:()=>i.siteSettings.setActiveTab({tab:"versions"})},openPlans:{enabled:()=>i.chromeStore.mainView!==4||i.siteSettings.active?.tab!=="plans",action:()=>i.siteSettings.setActiveTab({tab:"plans"})},copyRemixLink:{label:()=>g.copyRemixLink,action:()=>_m({project:i.projectStore.project,canCopyRemixLink:i.projectStore.project?.publicAccess!=="none"||!!h.isFramerEmployee,user:h,projectId:i.projectStore.projectId})},toggleBetaChannel:{visible:()=>i.projectStore.featureFlags?.canUseBetaChannel==="on",checked:()=>i.projectStore.project?.releaseChannel==="beta",action:()=>{let S=i.projectStore.project?.releaseChannel==="beta"?null:"beta";Tt(S).catch(q)}},contactSupport:{visible:()=>Kl(i.projectStore.projectLicenseType),action:Bm({userId:h.id,userEmail:h.email,userIntercomHash:h.intercomUserHash,projectLicenseType:i.projectStore.projectLicenseType})}}),xa.updateActionManager(k),k}function Sv(e){!An()&&e.key==="Alt"&&e.preventDefault()}function Iv(e,o,t){let n=r=>{id(i,"canDesign")||i.chromeStore.mainView===0&&(i.chromeStore.isPreviewingLocaleOnCanvas||ed(r)&&od(r,t))};if(o){let[r,a]=o,c=Pf("Preferences",r,e),d=new jr(c,n);return d.updateActionHandlers(a),d}else return new jr(e,n)}var jf=y(F());function Nf({toast:e,userNotifications:o,isFeedbackActive:t}){let[n,r]=En("has-seen-notifications-toast",!1);(0,jf.useEffect)(()=>{if(!t||n)return;async function a(){(await o.getPermissionStatus()).status==="notDetermined"&&(e({type:"add",variant:"info",key:"notifications-opt-in-toast",text:"Stay up to date with browser notifications",action:{title:"Continue",onClick:()=>o.requestPermission()},icon:"notifications",duration:1e4,showCloseButton:"never"}),r(!0))}a()},[e,o,t,n,r])}var Vf=y(F());function Mv(e,o){let t={variant:"success",text:"You are now subscribed to updates",action:{title:"Unsubscribe",onClick:r},icon:"success",key:"feedback-updates-subbed-toast",duration:5e3,showCloseButton:"never"},n={variant:"success",text:"You have unsubscribed from updates",icon:"success",action:{title:"Subscribe",onClick:a},key:"feedback-updates-unsubbed-toast",duration:5e3,showCloseButton:"never"};async function r(){e({type:"remove",key:t.key}),await o("unsubscribe"),e({type:"add",...n})}async function a(){e({type:"remove",key:n.key}),await o("subscribe"),e({type:"add",...t})}return{subbedToast:t,unsubbedToast:n}}function Ff({toast:e,isDocumentLoaded:o,action:t}){(0,Vf.useEffect)(()=>{let n=new URLSearchParams(window.location.search);if(o&&n.get("unsubscribed")==="true"){let{unsubbedToast:r}=Mv(e,t);e({type:"add",...r});let a=new URL(window.location.href);a.searchParams.delete("unsubscribed"),window.history.replaceState({},document.title,a.href)}},[e,o,t])}var Bf=y(F());function Uf({channel:e}){return(0,Bf.useMemo)(()=>e?Ws.on(e).expect():null,[e])}var bi=y(F());function zf(e){switch(e){case"granted":return{status:"granted"};case"denied":return{status:"denied"};case"default":default:return{status:"notDetermined"}}}var hi=class{constructor(){Oe(this,"activeNotifications",new Map)}async requestPermission(){return window.Notification?new Promise(o=>{let t=r=>o(zf(r)),n=window.Notification.requestPermission(t);n&&n.then(t).catch(q)}):{status:"denied"}}async getPermissionStatus(){return window.Notification?zf(window.Notification.permission):{status:"denied"}}async post(o){return new Promise(t=>{if(!window.Notification)return t({type:"cancel",reason:"unsupported"});if(o.notification.show==="backgrounded"&&!document.hidden)return t({type:"cancel",reason:"suppressed"});let n=new window.Notification(o.notification.title,{tag:o.notification.id,body:o.notification.body});this.activeNotifications.set(o.notification.id,n),n.onclick=()=>{window.focus(),t({type:"action"}),n.close()},n.onclose=()=>{this.activeNotifications.delete(o.notification.id),t({type:"cancel",reason:"dismissed"})}})}async cancel(o){if(!window.Notification)return;let t=this.activeNotifications.get(o.notificationId);t&&t.close()}};function Of({channel:e}){let o=(0,bi.useMemo)(()=>new hi,[]);return(0,bi.useEffect)(()=>{if(e)return Hs.on(e).register(o)},[e,o]),o}var $i=y(F());var vi=y(F());var Hf="moveDraft_m1cpkqs3",_f="moveDraftTitle_m1nbloso",qf="buttons_bb1mirm",Wf="moveDraftDescription_mo8n8ae",$f="moveDraftButton_mr6y2w0",Gf="confirmMoveDraftButton_c10bqkjb",Yf="buttonChevron_bd7crx9";var Ue=y(I());function Zf({user:e,projectState:o,onShowMoveProjectMenu:t,onConfirmMoveProject:n,moveProjectDestination:r}){let{project:a}=o,c=vi.default.useRef(null),d=vi.default.useMemo(()=>kn(a,e.id),[a,e.id]);function p(){if(c.current===null)return;let s=c.current.getBoundingClientRect();t({location:{x:s.left,y:s.bottom},skipConfirmation:!0})}let l=vi.default.useCallback(async()=>{H("ui_interaction",{page:"invite-panel",id:"move-to-teams"}),await n()},[n]);return(0,Ue.jsxs)(j,{padding:30,gap:15,alignItems:"center",justifyContent:"center",className:Hf,children:[(0,Ue.jsx)("div",{className:_f,children:"Invite Collaborators"}),(0,Ue.jsxs)("div",{className:Wf,children:[(0,Ue.jsx)(_,{children:"Move your projects to a team"}),(0,Ue.jsx)("br",{}),(0,Ue.jsx)(_,{children:"to add more collaborators."})]}),(0,Ue.jsxs)(j,{className:qf,direction:"row",gap:10,children:[(0,Ue.jsxs)(pe,{className:$f,onClick:p,ref:c,children:[(0,Ue.jsx)("div",{className:Ae,children:r||d}),(0,Ue.jsx)("div",{className:Yf,children:(0,Ue.jsx)(wo,{})})]}),(0,Ue.jsx)(pe,{onClick:l,large:!0,className:Gf,variant:"primary",enabled:!!r&&r!==d,children:(0,Ue.jsx)(_,{children:"Move"})})]})]})}var yi=y(I());function Qf(e,o){let t=e.projectStore.project;if(A(t,"Project should exist when upselling editor limit"),t.license.type==="enterpriseSite")return e.modalStore.set({type:"Confirmation",source:o,title:"Add More Editors",description:"This invite exceeds your editor limit. Contact us to increase the number of editors on your plan.",confirmLabel:"Contact Us",cancelLabel:"Dismiss",onConfirm:()=>{H("ui_interaction",{page:"enterprise-editor-limit-upsell",id:"contact-us"}),uo(Fd)}});if(fd(t.license.type))return e.modalStore.set({type:"Upsell",source:o,upsell:"enterprise-editor-limit-upsell",title:"Upgrade to Enterprise",description:"Upgrade your workspace to add more editors and unlock powerful features that help scale your site.",confirmLabel:"Upgrade",cancelLabel:"Maybe Later",upsellSitePlan:"enterpriseSite",upsellFeatures:["Advanced Permissions","Custom Limits","Custom Hosting","Custom Proxy Support","Enterprise Security","Dedicated Support"]});let n=t.settings.resourceLimits.maxEditors;A(typeof n=="number","Expect the editor limit to be a number");let r=n===1?"1 editor":n.toLocaleString()+" editors",a=`${Cn}?teamId=${t.space.ownerId}&open-settings=1&settings-tab=membersList`,c=(0,yi.jsxs)("div",{children:["You\u2019ve reached the limit of ",r," in your workspace. Upgrade your site to invite more editors, or"," ",(0,yi.jsx)(gn,{className:Bp,href:a,children:"remove an existing editor"})," ","from your workspace."]});return e.modalStore.set({type:"UpsellFeature",source:o,upsellFeature:"canInviteEditors",description:c})}var Ko=y(F());function Kf(e,o){let t=[...e],n=t.findIndex(({user:r})=>r.id===o);return t.splice(n,1),t}function Ev(e,o,t){let n=[...e],r=n.findIndex(({user:c})=>c.id===o),a=n[r];return a?(n.splice(r,1,{...a,success:t}),n):e}function jv(e,o){switch(o.type){case"addEntry":return{...e,invitedUsers:[o.entry,...e.invitedUsers]};case"resolveEntry":return{...e,invitedUsers:Kf(e.invitedUsers,o.id),inviteMap:{...e.inviteMap,[o.resourceId]:o.id}};case"removeEntry":return{...e,invitedUsers:Kf(e.invitedUsers,o.id)};case"updateInviteStatus":return{...e,invitedUsers:Ev(e.invitedUsers,o.id,o.status)};default:ie(o)}}function Xf(e){let[o,t]=(0,Ko.useReducer)(jv,{invitedUsers:[],inviteMap:{}}),{inviteMap:n,invitedUsers:r}=o,a=(0,Ko.useRef)([]),c=(0,Ko.useCallback)(p=>!(p.user.id in n&&r.some(l=>l.user.id===p.user.id)),[n,r]),d=(0,Ko.useCallback)(p=>{let l=n[p.user.id];return l||p.user.id},[n]);return a.current=(0,Ko.useMemo)(()=>r.length>0?a.current:e.filter(c),[e,r,c]),{acl:a.current,invitedUsers:r,dispatchInvites:t,getStableEntryKey:d}}var _o=y(F());var je=y(F());var Xa=function(){return Xa=Object.assign||function(e){for(var o,t=1,n=arguments.length;t<n;t++)for(var r in o=arguments[t])Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);return e},Xa.apply(this,arguments)};var Ja,Nv=function(e){var o;e?function(t){if(t)for(;t.lastChild;)t.lastChild.remove()}(typeof e=="string"?document.getElementById(e):e):(o=document.querySelector(".grecaptcha-badge"))&&o.parentNode&&document.body.removeChild(o.parentNode)},Vv=function(e,o){Nv(o),window.___grecaptcha_cfg=void 0;var t=document.querySelector("#"+e);t&&t.remove(),function(){var n=document.querySelector('script[src^="https://www.gstatic.com/recaptcha/releases"]');n&&n.remove()}()},Fv=function(e){var o=e.render,t=e.onLoadCallbackName,n=e.language,r=e.onLoad,a=e.useRecaptchaNet,c=e.useEnterprise,d=e.scriptProps,p=d===void 0?{}:d,l=p.nonce,s=l===void 0?"":l,m=p.defer,f=m!==void 0&&m,h=p.async,u=h!==void 0&&h,b=p.id,v=b===void 0?"":b,w=p.appendTo,P=v||"google-recaptcha-v3";if(function(k){return!!document.querySelector("#"+k)}(P))r();else{var x=function(k){return"https://www."+(k.useRecaptchaNet?"recaptcha.net":"google.com")+"/recaptcha/"+(k.useEnterprise?"enterprise.js":"api.js")}({useEnterprise:c,useRecaptchaNet:a}),C=document.createElement("script");C.id=P,C.src=x+"?render="+o+(o==="explicit"?"&onload="+t:"")+(n?"&hl="+n:""),s&&(C.nonce=s),C.defer=!!f,C.async=!!u,C.onload=r,(w==="body"?document.body:document.getElementsByTagName("head")[0]).appendChild(C)}},Ka=function(e){typeof process<"u"&&process.env&&!1||console.warn(e)};(function(e){e.SCRIPT_NOT_AVAILABLE="Recaptcha script is not available"})(Ja||(Ja={}));var rs=(0,je.createContext)({executeRecaptcha:function(){throw Error("GoogleReCaptcha Context has not yet been implemented, if you are using useGoogleReCaptcha hook, make sure the hook is called inside component wrapped by GoogleRecaptchaProvider")}}),lL=rs.Consumer;function tg(e){var o=e.reCaptchaKey,t=e.useEnterprise,n=t!==void 0&&t,r=e.useRecaptchaNet,a=r!==void 0&&r,c=e.scriptProps,d=e.language,p=e.container,l=e.children,s=(0,je.useState)(null),m=s[0],f=s[1],h=(0,je.useRef)(o),u=JSON.stringify(c),b=JSON.stringify(p?.parameters);(0,je.useEffect)(function(){if(o){var P=c?.id||"google-recaptcha-v3",x=c?.onLoadCallbackName||"onRecaptchaLoadCallback";return window[x]=function(){var C=n?window.grecaptcha.enterprise:window.grecaptcha,k=Xa({badge:"inline",size:"invisible",sitekey:o},p?.parameters||{});h.current=C.render(p?.element,k)},Fv({render:p?.element?"explicit":o,onLoadCallbackName:x,useEnterprise:n,useRecaptchaNet:a,scriptProps:c,language:d,onLoad:function(){if(window&&window.grecaptcha){var C=n?window.grecaptcha.enterprise:window.grecaptcha;C.ready(function(){f(C)})}else Ka("<GoogleRecaptchaProvider /> "+Ja.SCRIPT_NOT_AVAILABLE)},onError:function(){Ka("Error loading google recaptcha script")}}),function(){Vv(P,p?.element)}}Ka("<GoogleReCaptchaProvider /> recaptcha key not provided")},[n,a,u,b,d,o,p?.element]);var v=(0,je.useCallback)(function(P){if(!m||!m.execute)throw new Error("<GoogleReCaptchaProvider /> Google Recaptcha has not been loaded");return m.execute(h.current,{action:P})},[m,h]),w=(0,je.useMemo)(function(){return{executeRecaptcha:m?v:void 0,container:p?.element}},[v,m,p?.element]);return je.default.createElement(rs.Provider,{value:w},l)}var rg=function(){return(0,je.useContext)(rs)};function ng(e,o){return e(o={exports:{}},o.exports),o.exports;}var Ie=typeof Symbol=="function"&&Symbol.for,es=Ie?Symbol.for("react.element"):60103,os=Ie?Symbol.for("react.portal"):60106,wi=Ie?Symbol.for("react.fragment"):60107,xi=Ie?Symbol.for("react.strict_mode"):60108,Ci=Ie?Symbol.for("react.profiler"):60114,ki=Ie?Symbol.for("react.provider"):60109,Pi=Ie?Symbol.for("react.context"):60110,ts=Ie?Symbol.for("react.async_mode"):60111,Ti=Ie?Symbol.for("react.concurrent_mode"):60111,Si=Ie?Symbol.for("react.forward_ref"):60112,Ii=Ie?Symbol.for("react.suspense"):60113,Bv=Ie?Symbol.for("react.suspense_list"):60120,Mi=Ie?Symbol.for("react.memo"):60115,Ri=Ie?Symbol.for("react.lazy"):60116,Uv=Ie?Symbol.for("react.block"):60121,zv=Ie?Symbol.for("react.fundamental"):60117,Ov=Ie?Symbol.for("react.responder"):60118,Hv=Ie?Symbol.for("react.scope"):60119;function io(e){if(typeof e=="object"&&e!==null){var o=e.$$typeof;switch(o){case es:switch(e=e.type){case ts:case Ti:case wi:case Ci:case xi:case Ii:return e;default:switch(e=e&&e.$$typeof){case Pi:case Si:case Ri:case Mi:case ki:return e;default:return o}}case os:return o}}}function Jf(e){return io(e)===Ti}var _v={AsyncMode:ts,ConcurrentMode:Ti,ContextConsumer:Pi,ContextProvider:ki,Element:es,ForwardRef:Si,Fragment:wi,Lazy:Ri,Memo:Mi,Portal:os,Profiler:Ci,StrictMode:xi,Suspense:Ii,isAsyncMode:function(e){return Jf(e)||io(e)===ts},isConcurrentMode:Jf,isContextConsumer:function(e){return io(e)===Pi},isContextProvider:function(e){return io(e)===ki},isElement:function(e){return typeof e=="object"&&e!==null&&e.$$typeof===es},isForwardRef:function(e){return io(e)===Si},isFragment:function(e){return io(e)===wi},isLazy:function(e){return io(e)===Ri},isMemo:function(e){return io(e)===Mi},isPortal:function(e){return io(e)===os},isProfiler:function(e){return io(e)===Ci},isStrictMode:function(e){return io(e)===xi},isSuspense:function(e){return io(e)===Ii},isValidElementType:function(e){return typeof e=="string"||typeof e=="function"||e===wi||e===Ti||e===Ci||e===xi||e===Ii||e===Bv||typeof e=="object"&&e!==null&&(e.$$typeof===Ri||e.$$typeof===Mi||e.$$typeof===ki||e.$$typeof===Pi||e.$$typeof===Si||e.$$typeof===zv||e.$$typeof===Ov||e.$$typeof===Hv||e.$$typeof===Uv)},typeOf:io},se=ng(function(e,o){}),eg=(se.AsyncMode,se.ConcurrentMode,se.ContextConsumer,se.ContextProvider,se.Element,se.ForwardRef,se.Fragment,se.Lazy,se.Memo,se.Portal,se.Profiler,se.StrictMode,se.Suspense,se.isAsyncMode,se.isConcurrentMode,se.isContextConsumer,se.isContextProvider,se.isElement,se.isForwardRef,se.isFragment,se.isLazy,se.isMemo,se.isPortal,se.isProfiler,se.isStrictMode,se.isSuspense,se.isValidElementType,se.typeOf,ng(function(e){e.exports=_v}));var qv={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},og={};og[eg.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},og[eg.Memo]=qv;var dL=Object.prototype;var ig=ot("useReCaptcha");function Ai(){let{executeRecaptcha:e}=rg();return{generateToken:async t=>{if(!e){ig.error("Recaptcha is not initialized");return}try{return await e(t)}catch(n){ig.error(`Cannot generate token for ${t}`,n)}}}}var Li=15,Di=20,At=2,ag="main_mtjdnlw",Lt="buttons_b16j3fv2",sg="header_h7bdi9s",cg="sectionHeader_s12h9rvh",lg="separator_sql7wjp",ns="separatorWithPadding_s1gaa8io",is="isDisabled_ibeu8mf",dg="inputGrid_imryu2",ft="sidePadding_s1kcrkj9",pg="users_unllbx4",mg="roleSelect_r1a07q4t",Dt="userInfoName_u1wvxecz",Et="userInfoDetail_u1axfeak",Ei="userInfoDetailText_ugv3bsa",ug="userInfoStatus_u5ox40e",fg="domains_den2nnp",gg="errorMessage_emichmx",hg="warningMessage_wld01wx",jt="avatarGrid_aiyskyy",Nt="editableRole_ehwjfgd",as="updating_u128a741",ji="badgeFramerEmployeeWrapper_b1azfp4q",bg="badgeFramerPartnerWrapper_bvvl9i5",vg="badgeViewerWrapper_b1wgfjgu",yg="shareLinkIcon_sg3586s";var ls=y(F());var Mg=y(F());var wg="menu_m9ssw07",xg="childrenMenuOpened_c339xbv",ss="menuRow_mi76gje",Cg="checkboxLabel_c18g668b",kg="checkboxDescription_c1h61czf",cs="checkboxDisabled_c14eoty2",Pg="clickable_c1o21d5e",Sg="separator_s1gxnekh",Ig="directionRightIconWrapper_dlw4814";var ho=y(I());function gt({anchor:e,attachTo:o="bottom",backdropEnabled:t=!0,children:n,matchParentWidth:r,onClose:a,open:c,offset:d,alignSelf:p}){return c?(0,ho.jsx)(xr,{focusTrapEnabled:!1,backdropEnabled:t,className:wg,anchor:e.current,alignSelf:p,style:r?{width:e.current?.clientWidth}:{},attachTo:o,offset:d,showArrow:!1,onClose:a,children:n}):null}var ve=Mg.default.forwardRef(function({menuItem:o,closeMenu:t,onPointerOver:n,onPointerEnter:r,showChevron:a=!1,isChildrenMenuOpened:c=!1},d){let{type:p,visible:l}=o;if(l===!1)return null;switch(p){case"checkbox":return(0,ho.jsxs)(j,{ref:d,onPointerOver:n,onPointerEnter:r,gap:10,direction:"row",alignItems:"center",className:G(ss),children:[(0,ho.jsx)(wr,{id:o.actionId,value:o.checked,onChange:()=>o.action(o.actionId),enabled:!o.disabled}),(0,ho.jsxs)("label",{htmlFor:o.actionId,className:G(Cg,o.disabled&&cs),children:[o.label,o.description&&(0,ho.jsxs)("span",{className:G(kg,o.disabled&&cs),children:[" ","\xB7 ",o.description]})]})]});case"option":return(0,ho.jsxs)(j,{ref:d,onPointerOver:n,onPointerEnter:r,direction:"row",alignItems:"center",justifyContent:"space-between",onClick:()=>{o.action(),t?.()},className:G(ss,Pg,c&&xg),children:[o.label,o.badge&&(0,ho.jsx)(pn,{className:"badge",variant:"componentTintDimmed",children:o.badge}),a&&(0,ho.jsx)("span",{className:Ig,children:(0,ho.jsx)(bl,{})})]});case"separator":return(0,ho.jsx)("div",{ref:d,onPointerOver:n,onPointerEnter:r,className:Sg});default:ie(p,"All menu items should get rendered")}});async function Rg(e){return e.popover.active=0,e.siteSettings.setActiveTab({tab:"plans",upsellFeature:"canUseEditorPermissions"}).catch(q)}var mr=y(I());function Ni({anchorRef:e,open:o,onClose:t,permissionsMenuList:n}){let{updatePurchaseOrigin:r}=Sp(),{project:a}=i.projectStore.useState();return(0,mr.jsxs)(gt,{anchor:e,open:o,onClose:t,attachTo:"left",backdropEnabled:!1,offset:{x:10,y:0},alignSelf:"start",children:[n.map((c,d)=>(0,mr.jsx)(ve,{menuItem:c},d)),(0,mr.jsx)(ve,{menuItem:{type:"separator"}}),(0,mr.jsx)(ve,{menuItem:{type:"option",label:"Upgrade",badge:"Launch",action:()=>{a&&r("project-permissions-upsell",{projectId:a.id,site:a.license.type,team:a.teamLicenseType},null),Rg(i)}}})]})}var Ze=y(I());function Tg({invitePermissions:e,setInvitePermissions:o,closeMenu:t,roleMenuAnchorRef:n}){let[r,a]=ls.default.useState(!1),c=lt("canUseEditorPermissions"),d=rr(),p=ls.default.useRef(null),{permissions:l}=e,s=!c,m=!c,f=b=>{o(v=>{let w=yn(v.permissions[b]),P={...v.permissions,[b]:w};return{role:Object.entries(P).filter(([S,R])=>R==="on").map(([S,R])=>S).length===0?"viewer":"collaborator",permissions:P}})},h=b=>{o(v=>{let w=Object.keys(v.permissions).reduce((P,x)=>({...P,[x]:b==="viewer"?"off":"on"}),v.permissions);return{role:b,permissions:w}}),t()},u=wn.map(b=>{let{label:v,description:w}=xn(b);return{type:"checkbox",label:v,description:w,actionId:b,action:f,checked:l[b]==="on",disabled:s||d[b]==="off"}});return(0,Ze.jsx)(gt,{open:!0,anchor:n,onClose:t,matchParentWidth:!0,alignSelf:"start",offset:{x:0,y:5},children:m?(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(ve,{menuItem:{type:"option",label:"Full Access",action:()=>h("collaborator")},closeMenu:t,onPointerOver:()=>a(!1)}),(0,Ze.jsx)(ve,{menuItem:{type:"option",label:"View Only",action:()=>h("viewer")},closeMenu:t,onPointerOver:()=>a(!1)}),(0,Ze.jsx)(ve,{ref:p,menuItem:{type:"separator"},closeMenu:t}),(0,Ze.jsxs)(Ze.Fragment,{children:[(0,Ze.jsx)(ve,{menuItem:{type:"option",label:"Permissions",action:()=>null},isChildrenMenuOpened:r,onPointerOver:()=>a(!0),closeMenu:t,showChevron:!0}),(0,Ze.jsx)(Ni,{anchorRef:p,open:r,onClose:()=>a(!1),permissionsMenuList:u})]})]}):u.map((b,v)=>(0,Ze.jsx)(ve,{menuItem:b},v))})}var ye=y(I());function Ag({isViewOnly:e,projectState:o,handleTeamUpgrade:t,pendingEntries:n,invitedUsers:r,dispatchInvites:a,currentUserPermissions:c}){let{project:d}=o,{settings:p}=d,{generateToken:l}=Ai(),s=Bo(),m=Js(),f=(0,_o.useRef)(0),[h,u]=(0,_o.useState)(!1),[b,v]=(0,_o.useState)(""),[w,P]=(0,_o.useState)({role:"collaborator",permissions:c}),[x,C]=(0,_o.useState)(!1),{role:k,permissions:S}=w,R=p.featureFlags.canInviteAnyDomain==="off",L=_o.default.useRef(null);async function E(Q){if(!s)return;Q.preventDefault();let te=b.toLowerCase().trim();if(qm(te)&&!r.find(({user:K})=>K.name===te)&&!n.find(({user:K})=>K.name===te)){let[,K]=te.split("@");if(K&&R&&p.allowedDomains.length>0&&!p.allowedDomains.includes(K)){u(!0);return}let U=`${f.current++}`;a({type:"addEntry",entry:{kind:"invite",user:{id:U,name:te,initials:""},role:k,permissions:S,pending:!0,color:null,lastOpenedAt:null,success:null,email:te}}),v("");let oe=await s.inviteByEmail({email:te,role:k,permissions:S,token:await l("invite_user")});switch(oe.status){case 0:return a({type:"resolveEntry",id:U,resourceId:oe.aclEntry.user.id});case 2:return a({type:"updateInviteStatus",id:U,status:!1});case 1:return t(),a({type:"removeEntry",id:U});case 3:return a({type:"removeEntry",id:U});default:ie(oe)}}else m.start({x:0,transition:{type:"spring",velocity:600,stiffness:5e3,damping:20}}).catch(q)}function $(Q){h&&u(!1),v(Q)}let ee=_o.default.useRef(null);return(0,ye.jsx)("div",{className:ft,children:(0,ye.jsxs)("form",{className:dg,onSubmit:E,children:[(0,ye.jsxs)(po.div,{animate:m,style:{originY:.9},children:[(0,ye.jsxs)(jl,{ref:L,hasError:h,large:!0,children:[(0,ye.jsx)(Vl,{autoFocus:!0,type:"email",name:"email",placeholder:"name@email.com",value:b,onChange:$,constantChange:!0,enabled:!e,ref:ee,className:G(e&&is),"data-1p-ignore":!0}),(0,ye.jsxs)(pe,{variant:"link",enabled:!e,onClick:()=>C(!0),className:G(mg,e&&is),children:[kr(S,k),(0,ye.jsx)(wo,{})]}),x?(0,ye.jsx)(Tg,{closeMenu:()=>C(!1),invitePermissions:w,setInvitePermissions:P,roleMenuAnchorRef:L}):null]}),(0,ye.jsx)(fa,{className:hg,visible:hd(b),children:(0,ye.jsx)(_,{children:"You won\u2019t be billed for any invited Framer employees."})}),(0,ye.jsx)(fa,{className:gg,visible:h,children:p.allowedDomains.length>2?(0,ye.jsx)(_,{children:"The email domain you entered is not allowed"}):(0,ye.jsxs)(ye.Fragment,{children:[(0,ye.jsx)(_,{children:"Only"}),(0,ye.jsxs)("span",{className:fg,children:[" ",p.allowedDomains.map(Q=>`@${Q}`).join(", ")," "]}),(0,ye.jsx)(_,{children:"emails are allowed"})]})})]}),(0,ye.jsx)(pe,{enabled:!e,className:Lt,large:!0,title:"Send",type:"submit",variant:"primary",onClick:ct})]})})}var ke=y(F());function Dg(e,o){T({key:`deny-${e.id}-project-access-failed`,type:"add",variant:"error",text:o===2?"This request has already been reviewed by someone else in your workspace.":`Failed to deny ${e.name} access to this project`,icon:"error",duration:3e3})}function Eg(e,o){T({key:`grant-${e.id}-project-access-failed`,type:"add",variant:"error",text:o===2?"This request has already been reviewed by someone else in your workspace.":`Failed to add ${e.name} as an editor to this project.`,icon:"error",duration:3e3})}var ds=y(I());function jg({anchorRef:e,open:o,onClose:t,isGrantingOrDenyingAccess:n,setIsGrantingOrDenyingAccess:r,id:a,user:c}){let d=Bo();async function p(){if(!d||n)return;H("ui_interaction",{id:"deny-access",page:"invite-panel"}),r(!0);let s=await d.denyProjectAccessRequest({id:a});switch(s.status){case 0:return;case 2:case 3:return Dg(c,s.status),r(!1);default:ie(s)}}return(0,ds.jsx)(gt,{anchor:e,open:o,onClose:t,alignSelf:"center",offset:{x:10,y:0},children:(0,ds.jsx)(ve,{menuItem:{type:"option",label:"Decline",action:p},closeMenu:t})})}var ps=y(F());function Ng(e,o,{ownerName:t,ownerId:n}){let{project:r}=e.projectStore;A(r,"Project should exist when moving project owner");let a=r.space.ownerId,c=async()=>{await Xt.put(`/web/projects/${r.id}/owner`,{ownerId:n})},d=async()=>{await o?.pollProject({intervalMillis:3e3,attempts:10,stopCondition:l=>l.owner.id===n}),await o?.forceRefreshACL()},p=()=>{e.popover.active=1};e.popover.active=0,e.modalStore.set({type:"Confirmation",source:"invite_panel",title:"Transfer Ownership",description:`To transfer ownership, ${t} must be an admin or editor in your workspace.`,confirmLabel:"Confirm",onConfirm:async()=>{try{await c(),await d()}catch(l){l.status===409?Zv({teamId:a,ownerName:t}):Qv()}finally{p()}},onCancel:()=>p(),onDismiss:()=>p(),variant:"destructive"})}var Vg="move-project-owner";function Zv({teamId:e,ownerName:o}){T({key:Vg,type:"add",variant:"error",text:`${o} must be an editor or admin in your workspace.`,icon:"error",duration:5e3,action:{title:"Manage Workspace",onClick:()=>uo(`${Cn}?teamId=${e}&open-settings=1&settings-tab=membersList`)}})}function Qv(){T({key:Vg,type:"add",variant:"error",text:"We\u2019re unable to move ownership. Please contact support.",icon:"error",duration:3e3,action:{title:"Contact Support",onClick:()=>uo(Bd)}})}var ze=y(I());function Fg({anchorRef:e,open:o,onClose:t,permissions:n,pending:r,user:a,handleTeamUpgrade:c,role:d,project:p,currentUserIsTeamAdmin:l,currentUserIsProjectOwner:s,setIsRemovingUser:m,optimisticPermissions:f,setOptimisticPermissions:h}){let[u,b]=ps.default.useState(!1),v=ps.default.useRef(null),P=f||(n||Cr),x=Bo(),C=rr(),k=d==="viewer",S=a.id===p.owner.id,R=i.sessionStore.useState(Ce=>Ce.user.id),L=a.id===R,E=l||s,$=!r&&!k&&!L,ee=lt("canUseEditorPermissions"),Q=E&&!S&&!r,te=!S&&!L,K=!ee,U=async()=>{Ng(i,x,{ownerName:a.name,ownerId:a.id})},oe=()=>{m(!0),r?x?.removeInvite({id:a.id}).catch(()=>m(!1)):x?.removeUserPermissions({id:a.id}).catch(()=>m(!1))},we=async Ce=>{if(!x)return;h(Ce.permissions);let Ve=await x.updateUserPermissions(Ce);switch(Ve.status){case 0:return;case 1:return c(),h(null);case 2:return h(null);default:ie(Ve)}},Ne=()=>{we({id:a.id,role:"collaborator",permissions:Gl})},Re=()=>{we({id:a.id,role:"viewer",permissions:Cr})},Ke=async Ce=>{let Ve=yn(P[Ce]),qo={...P,[Ce]:Ve};await we({id:a.id,role:"collaborator",permissions:qo})},J=wn.map(Ce=>{let{label:Ve,description:qo}=xn(Ce);return{type:"checkbox",label:Ve,description:qo,actionId:Ce,action:Ke,checked:P?P[Ce]==="on":!1,visible:$,disabled:K||C[Ce]==="off"}});return(0,ze.jsxs)(gt,{anchor:e,open:o,onClose:t,alignSelf:"start",offset:{x:0,y:5},children:[ee?J.map((Ce,Ve)=>(0,ze.jsx)(ve,{menuItem:Ce,closeMenu:t,onPointerOver:()=>b(!1)},Ve)):(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(ve,{menuItem:{type:"option",label:"Full Access",action:Ne},closeMenu:t,onPointerOver:()=>b(!1)}),(0,ze.jsx)(ve,{menuItem:{type:"option",label:"View Only",action:Re},closeMenu:t,onPointerOver:()=>b(!1)}),(0,ze.jsx)(ve,{ref:v,menuItem:{type:"separator"}}),(0,ze.jsx)(ve,{menuItem:{type:"option",label:"Permissions",action:()=>null},onPointerEnter:()=>b(!0),isChildrenMenuOpened:u,showChevron:!0})]}),(0,ze.jsx)(ve,{menuItem:{type:"separator",visible:$&&(te||K)},closeMenu:t,onPointerOver:()=>b(!1)}),(0,ze.jsx)(ve,{menuItem:{type:"option",label:"Make Project Owner",action:U,visible:Q},closeMenu:t,onPointerOver:()=>b(!1)}),(0,ze.jsx)(ve,{menuItem:{type:"option",label:"Remove",action:oe,visible:te},closeMenu:t,onPointerOver:()=>b(!1)}),(0,ze.jsx)(Ni,{anchorRef:v,open:u,onClose:()=>b(!1),permissionsMenuList:J})]})}var V=y(I());function zg({isViewOnly:e,projectState:o,handleTeamUpgrade:t,currentUserEntry:n,invitedUsers:r,activeEntries:a,inactiveEntries:c,pendingEntries:d,accessRequestEntries:p,dispatchInvites:l,currentUserPermissions:s,currentUserIsTeamAdmin:m,currentUserIsProjectOwner:f,getStableEntryKey:h}){let u=Bo(),{generateToken:b}=Ai(),v=(0,ke.useMemo)(()=>p.map(k=>({entry:k,ordering:""})).sort(ms),[p]),[w,P]=Xv(n,r,a,c,d);async function x(k){if(!u)return;l({type:"updateInviteStatus",id:k,status:null});let S=r.find(({user:L})=>L.id===k);if(!S)return;let R=await u.inviteByEmail({email:S.email,role:S.role,permissions:S.permissions,token:await b("invite_user")});switch(R.status){case 0:return l({type:"resolveEntry",id:k,resourceId:R.aclEntry.user.id});case 2:return l({type:"updateInviteStatus",id:k,status:!1});case 1:return t(),l({type:"removeEntry",id:k});case 3:return l({type:"removeEntry",id:k});default:ie(R)}}let C=[{key:"0",title:"Requesting Access",rows:v},{key:"1",title:void 0,rows:w},{key:"2",title:void 0,rows:P}].filter(({rows:k})=>k.length>0);return(0,V.jsx)(Yr,{initial:!1,children:(0,V.jsx)(j,{gap:Li,direction:"column",className:ft,children:C.map(({key:k,rows:S,title:R},L)=>(0,V.jsxs)(ke.default.Fragment,{children:[L>0&&(0,V.jsx)("div",{className:lg}),R&&(0,V.jsx)("div",{className:cg,children:(0,V.jsx)(_,{children:R})}),(0,V.jsx)(j,{gap:Di,direction:"column",children:S.map(({entry:E,inactive:$})=>E.kind==="accessRequest"?(0,V.jsx)(ey,{handleTeamUpgrade:t,indicateFramerEmployee:!!E.user.isFramerEmployee&&!n?.user.isFramerEmployee,entry:E},E.id):(0,V.jsx)(Jv,{projectState:o,indicateFramerEmployee:!!E.user.isFramerEmployee&&!n?.user.isFramerEmployee,isViewOnly:e,entry:E,handleRetry:x,handleTeamUpgrade:t,inactive:$,currentUserPermissions:s,currentUserIsTeamAdmin:m,currentUserIsProjectOwner:f,indicateUnchargedFramerExpert:!!E.user.isFramerExpert},h(E)))})]},k))})})}function Xv(e,o,t,n,r){let[a,c]=(0,ke.useMemo)(()=>{let d=[],p=[],l=s=>{(s.entry.role==="viewer"?p:d).push(s)};return e&&l({entry:e,ordering:"9"}),t.forEach(s=>{l({entry:s,ordering:"8"})}),n.forEach(s=>{l({entry:s,inactive:!0,ordering:Bg("7",s)})}),o.forEach(s=>{l({entry:s,ordering:Bg("7",s)})}),r.forEach(s=>{let m={...s,user:{...s.user,initials:s.user.initials||s.user.name.substr(0,2).toLocaleUpperCase()}};l({entry:m,inactive:!0,pending:!0,ordering:"0"})}),[d.sort(ms),p.sort(ms)]},[e,o,t,n,r]);return[a,c]}function Bg(e,o){return`${e}-${o.lastOpenedAt||0}`}function ms(e,o){return e.ordering!==o.ordering?e.ordering<o.ordering?1:-1:e.entry.user.name===o.entry.user.name?e.entry.user.id.localeCompare(o.entry.user.id):e.entry.user.name.localeCompare(o.entry.user.name,void 0,{sensitivity:"base"})}var Ug={duration:.15,ease:"easeInOut"},Vi={initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1,transition:Ug},exit:{opacity:0,scale:.5,transition:Ug}},Jv=ke.default.forwardRef(function({projectState:o,isViewOnly:t,inactive:n=!1,entry:r,handleRetry:a,handleTeamUpgrade:c,currentUserPermissions:d,currentUserIsTeamAdmin:p,currentUserIsProjectOwner:l,indicateFramerEmployee:s,indicateUnchargedFramerExpert:m},f){let h=Bo(),{user:u,role:b,permissions:v,pending:w}=r,{isDarkMode:P}=ro(),{project:x}=o,C=i.sessionStore.useState(Mo=>Mo.user.id),[k,S]=ke.default.useState(null),[R,L]=ke.default.useState(!1),[E,$]=ke.default.useState(!1),[ee,Q]=ke.default.useState(!1),te=u.id===C,K=u.id===x.owner.id,U=b==="viewer",oe=p||l,we=U&&ee&&!t,Ne=!n&&!te,Re=(0,ke.useCallback)(({id:Mo})=>i.remoteUsers.setSpectatedUser(Mo),[]);async function Ke(){if(!h||E)return;H("ui_interaction",{id:"change-project-access",page:"invite-panel"}),$(!0);let Mo=await h.updateUserPermissions({id:u.id,role:"collaborator",permissions:d});switch(Mo.status){case 0:break;case 1:c(),$(!1);break;case 2:$(!1);break;default:ie(Mo)}}let Ce=k||(v||Cr),Ve=ke.default.useRef(null),qo=oe&&!K&&!w,[zr,wt]=(0,ke.useState)(!1),xt,zt=te&&qo;w&&r.success===!1?xt=(0,V.jsx)(kt,{as:po.button,variant:"link",className:G(Nt),onClick:()=>a(u.id),...Vi,children:(0,V.jsx)(_,{children:"Retry"})}):!zt&&(te||K||t)?xt=(0,V.jsx)(po.span,{...Vi,children:(0,V.jsx)(kt,{as:po.button,variant:"link",className:Nt,enabled:!1,children:(0,V.jsx)(_,{children:kr(v||null,b)})})},"role"):xt=(0,V.jsxs)(V.Fragment,{children:[(0,V.jsxs)(kt,{ref:Ve,as:po.button,variant:"link",className:Nt,onClick:()=>wt(!0),children:[(0,V.jsx)(_,{children:kr(Ce,b)}),(0,V.jsx)(wo,{})]}),(0,V.jsx)(Fg,{anchorRef:Ve,open:zr,onClose:()=>wt(!1),permissions:v,user:u,role:b,handleTeamUpgrade:c,project:x,currentUserIsTeamAdmin:p,currentUserIsProjectOwner:l,setIsRemovingUser:L,pending:w,setOptimisticPermissions:S,optimisticPermissions:k})]});let Ot=s?`${u.name.split(" ")[0]} from Framer`:u.name;return(0,V.jsxs)(po.li,{ref:f,...Vi,className:G(jt,R&&as),onPointerEnter:()=>Q(!0),onPointerLeave:()=>Q(!1),children:[(0,V.jsxs)("div",{children:[(0,V.jsx)(ha,{entry:r,isDarkMode:P,onClick:Ne?()=>Re(r.user):void 0,onClickHoverIcon:Ne?(0,V.jsx)(ua,{width:"18",height:"18"}):void 0,greyScale:U}),s?(0,V.jsx)("div",{className:ji,title:"Framer Employee",children:(0,V.jsx)(fn,{width:"6",height:"9"})}):m?(0,V.jsx)("div",{className:G(ji,bg),title:"Framer Expert",children:(0,V.jsx)(fn,{width:"6",height:"9"})}):U?(0,V.jsx)("div",{className:vg,children:(0,V.jsx)(ua,{})}):null]}),(0,V.jsxs)(j,{gap:At,direction:"column",justifyContent:"center",children:[(0,V.jsx)("div",{className:G(Ae,Dt),title:u.name,children:(0,V.jsx)(_,{children:Ot})}),(0,V.jsx)("div",{className:Et,children:xt})]}),(0,V.jsx)(Yr,{initial:!1,mode:"wait",children:we&&!w?(0,V.jsx)(pe,{enabled:!t,className:Lt,large:!0,onClick:Ke,children:E?(0,V.jsx)(St,{}):(0,V.jsx)(_,{children:"Upgrade"})}):(0,V.jsx)(_,{className:ug,children:w?"Pending":$l(r,!n,{shortDate:!0})})})]})}),ey=ke.default.forwardRef(function({entry:o,indicateFramerEmployee:t,handleTeamUpgrade:n},r){let a=ke.default.useRef(null),[c,d]=ke.default.useState(!1),p=Bo(),{isDarkMode:l}=ro(),[s,m]=(0,ke.useState)(!1),{user:f,email:h,id:u}=o;async function b(){if(!p||c)return;H("ui_interaction",{id:"grant-access",page:"invite-panel"}),d(!0);let v=await p.grantProjectAccessRequest({id:u});switch(v.status){case 0:return;case 1:return n(),d(!1);case 2:case 3:return Eg(f,v.status),d(!1);default:ie(v)}}return(0,V.jsxs)(po.li,{ref:r,...Vi,className:G(jt,c&&as),children:[(0,V.jsxs)("div",{children:[(0,V.jsx)(ha,{entry:o,isDarkMode:l}),t?(0,V.jsx)("div",{className:ji,title:"Framer Employee",children:(0,V.jsx)(fn,{width:"6",height:"9"})}):null]}),(0,V.jsxs)(j,{gap:At,direction:"column",justifyContent:"center",children:[(0,V.jsx)("div",{className:G(Ae,Dt),title:f.name,children:(0,V.jsx)(_,{children:t?`${f.name.split(" ")[0]} from Framer`:f.name})}),(0,V.jsxs)("div",{className:Et,children:[(0,V.jsxs)(kt,{ref:a,as:po.button,variant:"link",className:Nt,onClick:()=>m(!0),children:[(0,V.jsx)(_,{children:h}),(0,V.jsx)(wo,{})]}),(0,V.jsx)(jg,{anchorRef:a,open:s,onClose:()=>m(!1),isGrantingOrDenyingAccess:c,setIsGrantingOrDenyingAccess:d,id:u,user:f})]})]}),(0,V.jsx)(Yr,{initial:!1,mode:"wait",children:(0,V.jsx)(pe,{className:Lt,large:!0,onClick:b,children:c?(0,V.jsx)(St,{}):(0,V.jsx)(_,{children:"Accept"})})})]})});function Og(){i.modalStore.set({type:"Confirmation",source:"invite_panel",title:"Add Project Restrictions",description:"Purchase a plan to manage project restrictions and access even more features.",confirmLabel:"Dismiss",onConfirm:ct})}async function Hg(e,o,{isDarkMode:t,triggerRef:n}){let{top:r,left:a,height:c}=n?.current?n.current.getBoundingClientRect():e.currentTarget.getBoundingClientRect(),d=[{action:"view",label:Fi("view"),checked:o==="view"},{action:"none",label:Fi("none"),checked:o==="none"}],p=await Tn.show(d,{isDarkMode:t,location:{x:a-1,y:r+c+5}});return p?p.action:void 0}function Fi(e){switch(e){case"view":return"Anyone with link can view";case"none":return"Only members can access";default:Gs(e)}}var Qe=y(I());function _g({isViewOnly:e,isDraftProject:o,isCurrentUserOwner:t,onCopyProjectURL:n,projectState:r,onAccessChange:a}){let{project:c}=r,{publicAccess:d,settings:p}=c,l=lt("canUsePrivateLink"),s=!e&&p.featureFlags.canChangeProjectAccess==="on"&&(!o||t),{isDarkMode:m}=ro(),f=i.wrapHandler(()=>{Gt(rp(c).toString()).catch(q),n()}),h=()=>{Og()};return(0,Qe.jsx)("div",{className:ft,children:(0,Qe.jsxs)("div",{className:jt,children:[(0,Qe.jsx)(dn,{color:ce.tintDimmed,textCustomStyles:yg,text:(0,Qe.jsx)(Sl,{})}),(0,Qe.jsxs)(j,{direction:"column",gap:At,justifyContent:"center",children:[(0,Qe.jsx)("div",{className:G(Ae,Dt),children:(0,Qe.jsx)(_,{children:"Project Link"})}),(0,Qe.jsx)("div",{className:G(Et,Ei),children:(0,Qe.jsxs)(kt,{as:po.button,variant:"link",className:Nt,enabled:s,onClick:async u=>{H("ui_interaction",{page:"invite-panel",id:"open-project-link-settings"});let b=await Hg(u,d||[],{isDarkMode:m});b==="none"&&!l?h():b&&a(b)},children:[(0,Qe.jsx)(_,{children:Fi(d)}),s&&(0,Qe.jsx)(wo,{})]})})]}),(0,Qe.jsx)(Ul,{className:Lt,large:!0,title:"Copy",onClick:f})]})})}var Xo=y(I());function qg({displayName:e,avatar:o}){let t=at.extractInitials(e||"");return(0,Xo.jsx)("div",{className:ft,children:(0,Xo.jsxs)("div",{className:jt,children:[(0,Xo.jsx)(dn,{color:ce.tint,src:o||void 0,text:t}),(0,Xo.jsxs)(j,{direction:"column",gap:At,justifyContent:"center",children:[(0,Xo.jsx)("div",{className:G(Ae,Dt),children:e}),(0,Xo.jsx)("div",{className:G(Et,Ei),children:(0,Xo.jsx)(_,{children:"All members can access"})})]})]})})}var ao=y(I());function Wg({user:e,projectState:o,isDraftProject:t,isCurrentUserOwner:n,onAccessChange:r,onCopyProjectURL:a}){let{activeIds:c,project:d,accessRequests:p}=o,{space:l}=d,s=e.spaces.find(({id:E})=>E===l.id),m=pt("canInviteCollaborators"),f=rr(),{invitedUsers:h,acl:u,dispatchInvites:b,getStableEntryKey:v}=Xf(o.acl),[w,P,x,C]=td({acl:u,activeIds:c,userId:e.id}),k=to(s)&&s.role==="admin",S=w?.role==="owner",R=!!s;function L(){i.popover.active=0,R?Qf(i,"invite_panel"):(H("ui_impression",{page:"workspace-editor-limit-contact-admin"}),T({type:"add",variant:"warning",icon:"warning",key:"workspace-editor-limit-contact-admin",text:"This workspace has reached its editor limit. Contact your admin to upgrade the workspace"}))}return(0,ao.jsxs)(j,{gap:Li,direction:"column",className:ag,children:[(0,ao.jsx)("div",{className:sg,children:(0,ao.jsx)(_,{children:"Invite"})}),(0,ao.jsx)(Ag,{isViewOnly:m,projectState:o,handleTeamUpgrade:L,pendingEntries:C,invitedUsers:h,dispatchInvites:b,currentUserPermissions:f}),(0,ao.jsx)("div",{className:ns}),(0,ao.jsxs)(j,{gap:Di,direction:"column",children:[l.displayName&&(0,ao.jsx)(qg,{displayName:l.displayName,avatar:s?.avatar}),(0,ao.jsx)(_g,{isViewOnly:m,isDraftProject:t,isCurrentUserOwner:n,projectState:o,onCopyProjectURL:a,onAccessChange:r})]}),(0,ao.jsx)("div",{className:ns}),(0,ao.jsx)("div",{className:pg,children:(0,ao.jsx)(zg,{isViewOnly:m,projectState:o,handleTeamUpgrade:L,currentUserEntry:w,activeEntries:P,inactiveEntries:x,pendingEntries:C,accessRequestEntries:p,invitedUsers:h,dispatchInvites:b,currentUserPermissions:f,currentUserIsTeamAdmin:k,currentUserIsProjectOwner:S,getStableEntryKey:v})})]})}var Io=y(F());var ht=y(F());var ty=ot("app");function $g(e,o,t=!0){let n=o.treeVersion||0,r=i.remoteDocument?.treeVersion()||0,a=n!==0&&r!==0&&t,c=a&&n!==r,[d,p]=ht.default.useState(c),[l,s]=ht.default.useState([]),[m,f]=ht.default.useState(!1),h=(0,ht.useRef)(new AbortController),u=ht.default.useCallback(()=>{h.current.abort(),s([]),f(!1),p(!1)},[h]);return ht.default.useEffect(()=>(c&&(h.current.abort(),h.current=new AbortController,p(!0),iy(i.tree,e,n,r,h.current.signal).then(b=>s(b)).catch(b=>{b.name!=="AbortError"&&(ty.reportError(b),f(!0))}).finally(()=>p(!1))),()=>{h.current.abort()}),[t]),{isEnabled:a,isLoadingChanges:d,hasChanges:l.length>0,hasError:m,changes:l,resetChanges:u}}function ry(){return{fetchingApiMs:0,computingMs:0,totalMs:0}}function ny(e){return typeof e=="object"&&e!==null&&"diffs"in e&&typeof e.diffs=="object"}async function iy(e,o,t,n,r){let a=new wd(ry()),c=a.time("totalMs"),d=a.time("fetchingApiMs"),{diffs:p}=await py(o,t,n,r);d.done();let l=a.time("computingMs"),s=ay(e,p);l.done(),c.done();let m=a.get();return H("changelog",{projectId:o,...m}),s}function ay(e,o){if(Object.entries(o).length===0)return[];let t={LayoutTemplate:[],WebPage:[],SmartComponent:[],CollectionItem:[],ProxyRoute:[]},n;for(let r of Object.values(o)){if(r.to?.__class!=="RootNode")continue;let a=Ct(r.to);A(fc(a),"Expected RootNode to deserialize as RootNode"),n=a}A(n,"Expected RootNode to be in diffs");for(let r of Object.values(o)){let a=r.to||r.from;if(!a)continue;let c=Ct(a,a.parentid);if(!c)continue;let d=ly(e,c,o,n);if(!d)continue;let p=dy(r);p!==void 0&&t[d.type].push({type:d.type,nodeId:c.id,name:d.name,status:p,userIds:new Set(r.userIds)})}return Hd(t)}function sy(e,o){for(let t of Object.values(o)){let n=t.to||t.from,r=Ct(n,n?.parentid);if(en(r)&&r.webPageId===e.id)return r}}function cy(e,o){let t=[],n=e;for(;n&&(t.push(n),!!n.parentid);){let r=o[n.parentid],a=r?.to||r?.from;if(!a)break;let c=Ct(a,a?.parentid);n=en(c)?c:null}return t}function ly(e,o,t,n){if(en(o)){let r=e.get(o.webPageId);r&&!(r.id in t)&&(o=r)}if(Kr(o)){let r=o.name||jo(o);return{type:"LayoutTemplate",name:r}}if(He(o)){let r=n.homePageNodeId,a=o.id===r?"Home":cn(e,o)||ln(e,o);if(!a){let c=sy(o,t);if(c){let d=cy(c,t);a=om(d,!0)}}return a||(a=jo(o)),{type:"WebPage",name:a}}if(Qr(o)){let r=o.name||jo(o);return{type:"SmartComponent",name:r}}else if(Jr(o)){A(o.parentid,"Expected CollectionItemNode to have parentid");let r=t[o.parentid]?.to||t[o.parentid]?.from;A(r,"Expected CollectionItemNode's parent to exist in the diffs map");let a=Ct(r,r.parentid);A(hc(a),"Expected CollectionItemNode's parent to be a CollectionNode");let c=(a.name||jo(a)).toLocaleLowerCase(),d=a.variables.find(s=>s.type==="slug"),p=d&&o.getControlProp(d.id)?.value,l=N(p)?`${c}/${p}`:`${c}/item`;return{type:"CollectionItem",name:l}}else if(bc(o))return{type:"ProxyRoute",name:o.path}}function dy(e){return fs(e.from)?fs(e.to)?0:2:fs(e.to)?1:void 0}function fs(e){if(!e)return!1;let o=Ct(e,e.parentid);return o?!(Jc(o)&&o.isDraft):!1}async function py(e,o,t,n){let r=await Sd(`/projects/${e}/tree/v2/changes/${o}-${t}`,{signal:n});if(!r.ok)throw new Error(`Non-OK HTTP response: ${r.status}`);let a=await r.json();if(ny(a))return a;throw new Error("Invalid response format")}var hs=y(F());var Bi="scroll_s1ei30bi",Ui="title_tg4mzjt",Gg="row_r1rud32t",Yg="iconContainer_iauun69",gs="removed_r8oy0xx",Zg="name_n1mis7ef",Qg="avatarList_aeln6u",Kg="avatar_abn2zkh",Xg="avatars_a1dlyr4q",zi="centerContent_c14cnxe4",Oi="descriptionColor_d1h9juoq";var eh="row_r1fm2c52",oh="navigationRow_n1ks328w",th="icon_ixbnwg",rh="description_dpuo3rh",nh="chevronIcon_c10cosba";var Vt=y(I());function bo({className:e,children:o,icon:t,labelTestId:n,onClick:r,hideChevron:a}){let c=pl(r);return(0,Vt.jsxs)("div",{className:G(eh,r&&oh,e),"data-testid":n,...c,children:[(0,Vt.jsx)("div",{className:th,children:t}),(0,Vt.jsx)("div",{className:G(rh,Ae),children:o}),!a&&(0,Vt.jsx)("div",{className:nh,children:(0,Vt.jsx)(ml,{})})]})}var xe=y(I()),ih=hs.default.memo(function({isLoading:o,changes:t,fastChanges:n}){let{isDarkMode:r}=ro(),{acl:a}=i.projectStore.useState(),c=hs.default.useMemo(()=>o?{}:t.reduce((l,s)=>(l[s.nodeId]=s,l),{}),[t,o]),d=!br(n.count),p=d?n.changes:t;return(0,xe.jsxs)(j,{padding:0,gap:0,children:[(0,xe.jsx)("div",{className:Ui,children:"Changes"}),(0,xe.jsx)("div",{className:G(Bi,p.length===0&&zi,!o&&Xg),children:!d&&o?(0,xe.jsx)(Xp,{}):p.length===0?(0,xe.jsx)("div",{className:Oi,children:"No Changes"}):p.map((l,s)=>{let m=c[l.nodeId],f=d?Object.assign(l,{userIds:m?.userIds}):l;return(0,xe.jsx)(fy,{change:f,acl:a,isDarkMode:r,index:s},s)})})]})}),uy=3;function fy({change:e,acl:o,isDarkMode:t,index:n}){let r=o.filter(c=>e.userIds?.has(c.user.id)),a=e.status===2;return(0,xe.jsx)(bo,{className:Gg,onClick:a?void 0:()=>hy(e.nodeId),icon:(0,xe.jsx)("div",{className:G(Yg,a&&gs),children:(0,xe.jsx)(dm,{change:e})}),hideChevron:!0,children:(0,xe.jsxs)(j,{direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,xe.jsx)(gy,{change:e}),(0,xe.jsx)("div",{className:Qg,style:{"--index":n},children:(0,xe.jsx)("div",{className:Kg,children:(0,xe.jsx)(Yl,{entries:r,isDarkMode:t,maxAvatars:uy,size:"small",ignoreStatus:!0})})})]})})}function gy({change:e}){let o;return e.status===1&&(o=(0,xe.jsx)(pn,{children:"NEW"})),(0,xe.jsxs)(j,{direction:"row",gap:10,className:Zg,children:[(0,xe.jsx)("span",{className:G(Ae,e.status===2&&gs),children:e.name}),(0,xe.jsx)(j,{direction:"row",gap:4,children:o})]})}function hy(e){let o=i.tree.getNode(e);o&&(_c(o)?i.scopeStore.select(o.id,{keepHistory:!1}):Jr(o)&&(i.scopeStore.select(sn,{keepHistory:!1}),i.selection.set(o.id)))}var ur=y(F());var ah="container_c70v5i5",sh="backButton_b1m6d3um",ch="backButtonVisible_ba9eeph",Hi="panel_pklurhb",lh="mainContent_mg8hahu",dh="hideMainContent_h7ed8wv",bs="secondaryPanel_s42o8li",vs="hideSecondaryPanel_h1agk2wg",_i="button_b1854po0",ph="buttonWithCheckmark_b1p0yt0i",mh="tooltip_tshjax2",uh="hostname_h1gzj9e3",fh="link_l15kuguu",ys="warning_w1q39ypx",gh="divider_d1exh9nz",Br="errorColor_etq4iqk",ws="descriptionColor_drnc4ju";var so=y(I());function bh(){let e=ko(()=>i.codeGenerationStore.isIdle()),o=ko(()=>i.stores.publishStore.getNodesWithStaleModulesForPublish(i)),t=ko(()=>{let h=i.tree.getService("loader");return h?h.numberOfScopesToLoad()>0:!1}),n=ko(()=>new Set),r=ko(()=>i.stores.publishStore.getErrors(i,{missingExternalModules:n,includeShallowScopeErrors:!0})),a=ko(()=>zd(i.treeStore.tree)),c=o.length||a.length,d=ko(()=>{if(!(c||t))return Od(i.treeStore.tree,Te)}),p=r.length>0||n.size>0,l=c||n.size>0||t||d?.length,s=p&&(r.length&&l||o.length||!e),[m,f]=(0,ur.useState)(s?void 0:r);return(0,ur.useEffect)(()=>{let h=performance.now();if(!s){if(o.length>0){let u=o.map(b=>i.stores.codeGenerationStore.updateComponent(b.id,1).catch(q));Promise.all(u).then(()=>{let b=i.stores.publishStore.getErrors(i,{includeStaleModules:!0});f(b),xs(b,h)}).catch(q)}else xs(r);return}i.stores.publishStore.prepareForPublishing(i,o,d,Array.from(n)).then(u=>{f(u),xs(u,h)}).catch(u=>f([]))},[s]),m}function xs(e,o){e?.length&&H("publish_blocked_by_errors",{errorCount:e.length,displayDelayMs:he(o)?Math.round(performance.now()-o):0})}function vh({errors:e}){let o=e[0];return o?(0,so.jsx)(wh,{...o,singleError:!0}):null}function yh({errors:e}){let o=eo(e),t=e??[];return(0,so.jsxs)(j,{padding:0,gap:0,children:[(0,so.jsx)("div",{className:Ui,children:"Errors"}),(0,so.jsx)("div",{className:G(Bi,(o||t.length===0)&&zi),children:o?(0,so.jsx)(St,{}):t.length===0?(0,so.jsx)("div",{className:Oi,children:"No Changes"}):t.map((n,r)=>(0,so.jsx)(wh,{...n},r))})]})}async function by(e){let o=!0;for(;o;)await new Promise(t=>i.runBeforeNextFrame(t)),o=wa(e)}var vy=2e3;async function yy(e){await Promise.race([Wr(vy),by(e)])}var wy=250;async function xy(e,o,t){let n=i.tree.get(e);if(!n||!o)return;if(n.cache.visible===!1){let d=Tc(i.tree,n);if(d.length>0){for(let{relatedNode:p}of d)if(p.cache.visible!==!1){n=p;break}}}wa(n)&&await yy(n);let r=i.tree.getRect(n,!1,!1),a=i.tree.convertFrameToCanvas(n,r);if(i.stores.canvasStore.zoomToCenter(a,{maxZoom:1}),i.stores.selectionStore.set(n.id),i.stores.chromeStore.reset(),i.stores.chromeStore.contentPanelTab="Layers",t==="unknown"){Sr(i);return}let c=ky(t);c&&setTimeout(()=>{pd({id:c,flash:!0})},wy)}function wh(e){let{nodeId:o,scopeId:t,type:n,singleError:r}=e,a=(0,ur.useCallback)(()=>{t&&(i.scopeStore.select(t,{keepHistory:!1}),i.runBeforeNextFrame(()=>xy(o,t,n)))},[o,n,t]),c=r?`Error: ${hh(e)}`:hh(e);return(0,so.jsx)(bo,{onClick:a,icon:Cy(n),className:Br,children:(0,so.jsx)("div",{className:Ae,children:c})})}function Cy(e){switch(e){case"component":case"code-generation":case"cms":case"code-override":case"unknown":return(0,so.jsx)(hl,{});case"form":return(0,so.jsx)(yl,{});default:ie(e)}}function ky(e){switch(e){case"component":case"code-generation":return"code-component-panel";case"form":return"form-panel";case"code-override":return"code-override-panel";case"cms":return"data-repeater-panel";case"unknown":return;default:ie(e)}}function Py({moduleIdentifier:e,scopeId:o,nodeId:t}){if(Ao(e)){let a=Te.componentForIdentifier(e)?.name;if(a)return a;let c=Go(e);if(_t(c)){let d=i.tree.get(c.localIdName);if(He(d))return Sn(i.tree,d);if(d?.name)return d.name}else{let d=i.tree.get(c.moduleId);if(vc(d)&&d.title)return d.title}}let n=i.tree.get(t);if(A(n,"Publish Errors: An error node should correspond to a node in the tree."),n.name)return n.name;let r=i.tree.get(o);return He(r)?Sn(i.tree,r):r?.name}function hh({type:e,reason:o,nodeId:t,scopeId:n,moduleIdentifier:r}){switch(e){case"unknown":case"code-generation":case"component":{let a=Py({moduleIdentifier:r,scopeId:n,nodeId:t})??"Component";if(o==="FileTooLarge")return`${a} Too Large`;if(o==="MissingModule")return`${a} Missing`;if(o===_d)return`${a} Out of Date`;let c=i.tree.get(n),d=He(c)?Sn(i.tree,c):c?.name;return a!==d?He(c)?`${a} on ${d}`:`${a} in ${d}`:a}case"code-override":return o==="MissingModule"?"Code Override Missing":"Invalid Code Override";case"cms":return"Cannot Load Collection";case"form":return"Form Not Configured";default:ie(e)}}var Me=y(I());function xh({hostname:e}){let{displayUrl:o,linkUrl:t}=lm({hostname:e,linkToActivePage:!0});return(0,Me.jsx)(gn,{href:t,onMouseDown:()=>{H("ui_interaction",{page:"publish-popover",id:e.type==="custom"?"open-custom-link":"open-published-link"})},className:fh,children:(0,Me.jsx)(bo,{icon:(0,Me.jsx)(wl,{stroke:ce.panelDescription}),className:uh,labelTestId:"hostname-row-label",hideChevron:!0,children:o})})}function Ch({deployment:e,onOpenVersion:o}){return(0,Me.jsxs)(bo,{className:ws,icon:(0,Me.jsx)(ul,{}),onClick:o,children:[(0,Me.jsx)(Np,{isoTimestamp:e.createdAt})," \xB7 ","by ",e.deployedBy.name]})}function kh({hostname:e,onClick:o}){return e.status==="invalid_dns"?(0,Me.jsx)(bo,{className:ys,icon:(0,Me.jsx)(yr,{fill:ce.warningTint}),onClick:o,children:"Invalid DNS"}):null}function Sy(e){return br(e)?"View Changes":e===0?"No Changes":e===1?"1 Change":`${e} Changes`}function Ph({onClick:e,count:o}){let t=br(o)||he(o)&&o>0;return(0,Me.jsx)(bo,{onClick:t?e:void 0,icon:(0,Me.jsx)(Pl,{}),className:ws,hideChevron:!t,children:Sy(o)})}function Sh({count:e,onClick:o}){return(0,Me.jsxs)(bo,{icon:(0,Me.jsx)(yr,{fill:ce.errorTint}),className:Br,onClick:o,children:[e," ",e>1?"Errors":"Error"]})}function Ih({onClick:e}){return(0,Me.jsx)(bo,{onClick:e,className:Br,icon:(0,Me.jsx)(yr,{fill:ce.errorTint}),children:"Optimization Error"})}function Mh({onClick:e}){return(0,Me.jsx)(bo,{onClick:e,className:ys,icon:(0,Me.jsx)(yr,{fill:ce.warningTint}),children:"Optimization Warning"})}var vo=y(F());var Rh="animate_a9lul9k";var Cs=y(I());function Th({...e}){return(0,Cs.jsx)("svg",{width:"16",height:"16",xmlns:"http://www.w3.org/2000/svg",fill:"none",...e,children:(0,Cs.jsx)("path",{d:"M 3 9 L 6 12 L 13 5",stroke:"currentColor",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round",pathLength:"1",className:Rh})})}var Ft=y(I());function Ah({enabled:e,onClick:o,onSuccess:t,publishStatus:n,infoTooltip:r,defaultDeployment:a,customDeployment:c,isProductionDeployment:d}){let[p,l]=(0,vo.useState)(),s=(0,vo.useRef)(),m=d&&a?.treeVersion===c?.treeVersion,f=!m&&(!d||!Wd(a?.status)&&!qd(a?.status));(0,vo.useEffect)(()=>()=>{s.current&&window.clearTimeout(s.current)},[]);let h=(0,vo.useCallback)(async()=>{l(2),await o().then(x=>{l(x?0:1),x&&t(),s.current&&window.clearTimeout(s.current),s.current=window.setTimeout(()=>l(void 0),2e3)})},[o,t]),u=(0,vo.useMemo)(()=>r?r.buttonLabel:m?"Latest Deployed":p===2?d?"Deploying\u2026":"Updating\u2026":p===0?d?"Deployed":"Updated":p===1?d?"Deployment Failed":"Update Failed":n===3?d?"Deploying\u2026":"Updating\u2026":n===2?d?"Deploy Latest":"Update":d?"Deploy Latest":"Publish",[r,m,p,n,d]),b=vo.default.useRef(null),{triggerProps:v,tooltipProps:w}=Hl({className:mh,direction:"right",disabled:!r,triggerRef:b}),P=p===0;return(0,Ft.jsxs)("div",{ref:b,...v,children:[(0,Ft.jsx)(pe,{title:u,enabled:e&&f,variant:e?"withDepthPrimary":"default",onClick:h,className:G(_i,P&&ph),children:P?(0,Ft.jsx)(Th,{}):(0,Ft.jsx)(_,{children:u})}),(0,Ft.jsx)(_l,{...w,children:r?.tooltipText})]})}function Lh({permissions:e,stagingEnabled:o}){if(!(o?e.canPublishToStaging:e.canPublish))return{buttonLabel:"No permissions to update",tooltipText:o&&!e.canPublishToStaging?"You need at least one assigned role to deploy to the staged site":"You do not have permission to deploy to the live site"}}var re=y(I());function Dh({projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:a,customHostname:c,defaultHostnameDeployment:d,customHostnameDeployment:p,deploymentStrategy:l}){return!a||!d||!l?null:(0,re.jsx)(Ay,{projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:a,customHostname:c,defaultHostnameDeployment:d,customHostnameDeployment:p,deploymentStrategy:l})}var My="publish-popover";var Ry=i.wrapHandler(()=>{i.chromeStore.displayMinimalUI||(i.popover.active=0,i.siteSettings.setActiveTab({tab:"versions"}).catch(q))}),Wi=i.wrapHandler(()=>{i.chromeStore.displayMinimalUI||(i.popover.active=0,i.siteSettings.setActiveTab({tab:"domains"}).catch(q))});function Ty(e){let o=er(()=>i.publishStore.getPublishRevisions(i),[e],"Tree",{deepEqual:!0});return kp(o,1e3)}function Ay({projectId:e,canPublish:o,onPublish:t,onUpdateCustomDomain:n,publishStatus:r,defaultHostname:a,customHostname:c,defaultHostnameDeployment:d,customHostnameDeployment:p,deploymentStrategy:l}){let[s,m]=(0,Io.useState)(0),[f,h]=(0,Io.useState)(void 0),u=eo(f);tr("ui_impression",{page:My});let b=Bn(),v=c&&p,w=l==="manual",P=w&&s===1||!w&&v,x=P&&c?c:a,C=P&&p?p:d,k=Ty(r),{isLoadingChanges:S,changes:R,resetChanges:L}=$g(e,d,f==="changeLog"),E=Lh({permissions:b,stagingEnabled:!!v&&w});(0,Io.useEffect)(()=>{let oe=i.tree.getService("loader");if(!oe)return;let we=oe.prioritizeLoadingAllData({preload:!0});return()=>we()},[]);let $=async()=>s===1?n(d):t(),ee=bh(),Q=(0,Io.useCallback)(()=>{h(void 0)},[]),te=(0,Io.useCallback)(()=>{h("errors")},[]),K=(0,Io.useCallback)(()=>{h("changeLog")},[]),U=o&&(Do(ee)?ee.length===0:!0);return(0,re.jsxs)("div",{className:ah,children:[(0,re.jsx)(Dl,{onClick:Q,className:G(sh,!u&&ch),children:(0,re.jsx)(Cl,{})}),(0,re.jsxs)(j,{padding:15,className:G(Hi,lh,!u&&dh),children:[w&&v&&(0,re.jsxs)(re.Fragment,{children:[(0,re.jsxs)(Wl,{unsaturated:!0,"data-testid":"deployment-mode",children:[(0,re.jsx)(ga,{title:"Staging",selected:s===0,onSelect:()=>m(0)}),(0,re.jsx)(ga,{title:"Production",selected:s===1,onSelect:()=>m(1)})]}),(0,re.jsx)("div",{className:gh})]}),(0,re.jsxs)(j,{gap:0,paddingTop:w?5:0,children:[(0,re.jsx)(xh,{hostname:x}),(0,re.jsx)(Ch,{deployment:C,onOpenVersion:Ry}),(0,re.jsx)(kh,{hostname:x,onClick:Wi}),(0,re.jsx)(Ly,{deploymentMode:s,showChangeLogPanel:K,errors:ee,changesCount:k?.count??null,defaultHostnameDeployment:d,showErrorPanel:te})]}),!v&&!i.siteSettings.isOpen&&!i.chromeStore.displayMinimalUI&&(0,re.jsx)(pe,{className:_i,onClick:Wi,children:(0,re.jsx)(_,{children:"Add Domain"})}),(0,re.jsx)(Ah,{onClick:$,onSuccess:L,enabled:U,publishStatus:r,infoTooltip:E,defaultDeployment:d,customDeployment:p,isProductionDeployment:s===1})]}),(0,re.jsx)("div",{className:G(Hi,bs,f!=="changeLog"&&vs),children:(0,re.jsx)(ih,{changes:R,fastChanges:k,isLoading:S})}),(0,re.jsx)("div",{className:G(Hi,bs,f!=="errors"&&vs),children:(0,re.jsx)(yh,{errors:ee})})]})}var Ly=Io.default.memo(({deploymentMode:e,showChangeLogPanel:o,errors:t,defaultHostnameDeployment:n,changesCount:r,showErrorPanel:a})=>{if(e===1)return null;let c=t?.length??0;if(eo(t)||c===0)switch(Ud(n.status,n.hasWarnings)){case 2:return(0,re.jsx)(Ih,{onClick:Wi});case 4:return(0,re.jsx)(Mh,{onClick:Wi});default:return(0,re.jsx)(Ph,{onClick:o,count:r})}return c===1?(0,re.jsx)(vh,{errors:t}):(0,re.jsx)(Sh,{count:t.length,onClick:a})});var bt=y(I());function Eh({canPublish:e,user:o,projectState:t,activePopover:n,onActivePopoverChange:r,onAccessChange:a,onCopyProjectURL:c,onShowMoveProjectMenu:d,onConfirmMoveProject:p,moveProjectDestination:l,onPublish:s,onUpdateCustomDomain:m,publishStatus:f,defaultHostname:h,customHostname:u,defaultHostnameDeployment:b,customHostnameDeployment:v,deploymentStrategy:w}){let P=(0,$i.useRef)(null),{id:x}=t.project,C=document.getElementById("toolbar-invite-button"),k=document.getElementById("toolbar-publish-button");function S(){r(0)}let R=(0,$i.useCallback)(()=>{f!==3&&r(0)},[f,r]),L=oo(t.project.space),E=o.id===t.project.owner.id,$=L&&E;return(0,bt.jsxs)(El,{ref:P,className:cm,children:[n===1&&(0,bt.jsx)(xr,{className:ka,anchor:C,alignSelf:"center",attachTo:"bottom",offset:{x:0,y:de.tooltipArrowHeight+1},arrow:{anchor:C,alignSelf:"center"},onClose:S,children:$?(0,bt.jsx)(Zf,{user:o,projectState:t,onShowMoveProjectMenu:d,onConfirmMoveProject:p,moveProjectDestination:l}):(0,bt.jsx)(Wg,{user:o,projectState:t,isDraftProject:L,isCurrentUserOwner:E,onAccessChange:a,onCopyProjectURL:c})}),n===3&&(0,bt.jsx)(xr,{className:ka,anchor:P.current,alignSelf:"end",attachTo:"bottom",offset:{x:15,y:-5},arrow:{anchor:k,alignSelf:"center"},onClose:R,children:(0,bt.jsx)(Dh,{projectId:x,canPublish:e,onPublish:s,publishStatus:f,onUpdateCustomDomain:m,defaultHostname:h,customHostname:u,defaultHostnameDeployment:b,customHostnameDeployment:v,deploymentStrategy:w})})]})}var Gi=y(I()),jh=({children:e})=>{let o="";return typeof window<"u"&&window.recaptchaSiteKey&&(o=window.recaptchaSiteKey),(0,Gi.jsxs)(tg,{reCaptchaKey:o,useEnterprise:!0,scriptProps:{defer:!0},container:{element:"recaptcha-container",parameters:{}},children:[(0,Gi.jsx)("div",{id:"recaptcha-container",style:{display:"none"}}),e]})};var Bt=y(F());function Nh({isUserPartOfTeam:e,api:o,projectTeamId:t,autoJoinDefaultRole:n}){let[r,a]=Bt.default.useState(),[c,d]=Bt.default.useState(!0),[p,l]=Bt.default.useState(!1),[s,m]=En("recommended-teams-joined-pending-welcome-modal",[]),f=n==="editor"?"an Editor":`a ${dc(n)}`,h=Bt.default.useCallback(async()=>{if(r)try{H("ui_interaction",{page:"canvas-autojoin-toast",id:"joinTeam"}),l(!0),await $m({teamId:r.id,source:"recommended-canvas"}),m(u=>[...u,r.id]),l(!1),a(void 0),T({variant:"success",key:"joined-team-sucess",icon:"success",text:`You have joined the ${r.displayName} team as ${f}`,type:"add"})}catch{T({variant:"error",key:"joined-team-error",icon:"error",text:"Failed to join team",type:"add"})}},[r,m,f]);return Bt.default.useEffect(()=>{let u=!0;if(e){d(!1);return}return Wm().then(b=>{if(!u)return;let v=b.find(({id:w})=>t===w);v&&a(v),d(!1)}).catch(()=>{}),()=>{u=!1}},[e,o,t]),Bt.default.useEffect(()=>{let u="recommended-team";r?(H("ui_impression",{page:"canvas-autojoin-toast"}),T({variant:"info",key:u,text:`Join the ${r.displayName} team as ${f}`,action:{onClick:h,title:"Join"},styleOverride:"fallback-tool",permanent:!!r||p,type:"add",icon:"view-only",duration:1/0})):T({type:"remove",key:u})}),{isShowingRecommendedTeamToast:c||!!r}}var co=y(F());var Vh="description_d1mpdoho",ks="resource_rbg65ev",Fh="divider_d1m3gl5g",Ps="icon_i5ixusr";var ne=y(I()),jy="request-editor-access";function Bh({space:e,projectAccessStatus:o,teamAccessStatus:t,onRequestProjectEditAccess:n,onRequestTeamEditAccess:r,onDismiss:a,showRequestTeamEditorAccess:c}){return tr("ui_impression",{page:jy}),e?.scope!=="organization"?null:(0,ne.jsx)(Zt,{visible:!0,onDismiss:a,children:(0,ne.jsxs)(j,{gap:15,children:[(0,ne.jsxs)(j,{gap:20,children:[(0,ne.jsx)(it,{className:Bl.title,children:(0,ne.jsx)(_,{children:"Request Edit Access"})}),(0,ne.jsxs)(it,{className:Vh,children:[(0,ne.jsx)(_,{children:"You are currently a viewer in this project."}),(0,ne.jsx)("br",{}),(0,ne.jsx)(_,{children:"Request edit access below."})]})]}),(0,ne.jsx)("hr",{className:Fh}),(0,ne.jsxs)(j,{gap:15,children:[(0,ne.jsxs)(j,{direction:"row",gap:0,justifyContent:"space-between",children:[(0,ne.jsxs)(j,{direction:"row",gap:10,justifyContent:"center",alignItems:"center",children:[(0,ne.jsx)(j,{className:Ps,justifyContent:"center",alignItems:"center",children:(0,ne.jsx)(Ny,{})}),(0,ne.jsx)(it,{className:ks,children:(0,ne.jsx)(_,{children:"This Project"})})]}),(0,ne.jsx)(pe,{large:!0,variant:"primary",title:"Request Access",onClick:n,enabled:o!=="pending"&&o!=="loading",children:(0,ne.jsx)(_,{children:o==="pending"?"Pending":"Request"})})]}),e&&c&&(0,ne.jsxs)(j,{direction:"row",gap:0,justifyContent:"space-between",children:[(0,ne.jsxs)(j,{direction:"row",gap:10,justifyContent:"center",alignItems:"center",children:[(0,ne.jsx)(j,{className:Ps,justifyContent:"center",alignItems:"center",children:(0,ne.jsx)(Gm,{avatar:null,displayName:e.displayName,organization:null})}),(0,ne.jsx)(it,{className:ks,children:(0,ne.jsx)(_,{children:"All Projects in Workspace"})})]}),(0,ne.jsx)(pe,{large:!0,variant:"primary",title:"Request Access",onClick:r,enabled:t!=="pending"&&t!=="loading",children:(0,ne.jsx)(_,{children:t==="pending"?"Pending":"Request"})})]})]})]})})}function Ny(){return(0,ne.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",children:(0,ne.jsx)("path",{d:"M 9.828 3.343 C 10.024 3.148 10.34 3.148 10.536 3.343 L 12.657 5.464 C 12.852 5.66 12.852 5.976 12.657 6.172 L 6.26 12.568 C 6.051 12.777 5.784 12.92 5.494 12.978 L 3.139 13.449 C 2.789 13.519 2.481 13.211 2.551 12.861 L 3.022 10.506 C 3.08 10.216 3.223 9.949 3.432 9.74 Z M 11.939 1.232 C 12.135 1.037 12.451 1.037 12.646 1.232 L 14.768 3.354 C 14.963 3.549 14.963 3.865 14.768 4.061 L 14.061 4.768 C 13.865 4.963 13.549 4.963 13.354 4.768 L 11.232 2.646 C 11.037 2.451 11.037 2.135 11.232 1.939 Z",fill:"currentColor"})})}var zh=y(I()),Yi=km(T);function Vy({isUserPartOfTeam:e,isUserEditorInTeam:o}){return e&&!o}function Uh({project:e,isUserPartOfTeam:o,isUserEditorInTeam:t,toastKey:n,api:r}){let[a,c]=(0,co.useState)(!1),[d,p]=(0,co.useState)(),[l,s]=(0,co.useState)(),m=oo(e.space),f=(0,co.useMemo)(()=>m?"Dismiss":o&&l==="pending"||!o&&d==="pending"?"Request Pending":"Request Access",[o,m,d,l]),h=(0,co.useCallback)(async()=>{H("ui_interaction",{page:"request-editor-access",id:"request-project-editor-access"});try{p("loading");let{status:v}=await r.requestAccess({resourceType:"project",resourceId:e.id});p(v),Yi.projectSuccess()}catch{p(void 0),Yi.projectError()}},[e.id,r]),u=(0,co.useCallback)(async()=>{if(e.space.displayName){H("ui_interaction",{page:"request-editor-access",id:"request-team-editor-access"});try{s("loading");let{status:v}=await r.requestAccess({resourceType:"team",resourceId:e.space.ownerId});s(v),p(v),Yi.teamSuccess(e.space.displayName)}catch{s(void 0),Yi.teamError(e.space.displayName)}}},[e.space.displayName,e.space.ownerId,r]);return(0,co.useEffect)(()=>{if(!n)return;T({variant:"info",key:n,text:"You do not have editing rights for this project",action:m?void 0:{title:f,onClick:()=>{c(!0)}},permanent:!m,styleOverride:m?void 0:"request-editor-access",showCloseButton:m?"auto":"never",type:"add",icon:"view-only",duration:1/0})},[n,f,m]),(0,co.useEffect)(()=>{if(!n)return;let v=!0;return(async()=>{try{let{accessRequests:w}=await Fy(e.id);if(!v)return;w.team&&o&&(s(w.team.status),p(w.team.status)),w.project&&p(w.project.status)}catch(w){q(w)}})(),()=>{v=!1}},[n,e.id,o,r]),(0,co.useMemo)(()=>!a||e.space.scope!=="organization"?null:(0,zh.jsx)(Bh,{projectAccessStatus:d,teamAccessStatus:l,onRequestProjectEditAccess:h,onRequestTeamEditAccess:u,showRequestTeamEditorAccess:Vy({isUserPartOfTeam:o,isUserEditorInTeam:t}),space:e.space,onDismiss:()=>{c(!1)}}),[h,u,a,e.space,d,l,o,t])}function Fy(e){return Xt.get(`/web/access-requests/projects/${e}`)}var Oh=y(F());function Hh({shouldShowToast:e,accessRequests:o,onReviewRequests:t}){(0,Oh.useEffect)(()=>{let n="review-editor-access";o.length>0&&e?T({key:n,type:"add",variant:"info",text:o.length===1?"1 viewer is requesting access to edit this project":`${o.length} viewers are requesting access to edit this project`,permanent:!0,showCloseButton:"auto",icon:"view-only",duration:1/0,action:{title:"Review",onClick:t}}):T({key:n,type:"remove"})},[o,t,e])}var qh=y(F());function _h(){let e=lt("canUseEditorPermissions"),o=md("canUseEditorPermissions","upsell");return e||o}function Wh({disabled:e}){let o="missing-permissions",t=i.scopeStore.useState(s=>s.active.id===sn),n=i.siteSettings.useState(s=>s.active),r=t?"CMS":n?"SiteSettings":"Canvas",a=Bn(),c=r==="Canvas"&&!a.canDesign||r==="CMS"&&!a.canEditContent||r==="SiteSettings"&&!a.canEditSiteSettings,d=_h(),l=!e&&d&&c;qh.default.useEffect(()=>{l?T({type:"add",key:o,variant:"info",text:By(r),permanent:!0,icon:"view-only",duration:1/0}):T({type:"remove",key:o})},[o,l,r])}function By(e){switch(e){case"Canvas":return"You do not have design editing rights";case"CMS":return"You do not have content editing rights";case"SiteSettings":return"You don\u2019t have enough permissions to edit these settings";default:ie(e,"All sections should have a toast text")}}var lo=y(I()),$h=ot("projectHandlers"),Uy=(0,Z.lazy)(()=>import("https://app.framerstatic.com/AccountSettingsModal-IM7FN7TN.mjs")),zy=(0,Z.lazy)(()=>import("https://app.framerstatic.com/TeamCreationModal-K3TQYQIC.mjs")),Gh=e=>Fm(e,21),Ss=typeof window<"u"&&!Ln()?bd(window.location):null,Oy=i.wrapHandler(()=>i.publishStore.publish(i)),Hy=i.wrapHandler(e=>i.publishStore.updateCustomDomain(e));function _y(e){i.processWhenReady(()=>{typeof e=="function"?i.sessionStore.user=e(i.sessionStore.user):i.sessionStore.user=e})}function Yh({projectState:e,api:o,assetService:t,filePickerRef:n}){let{project:r}=e;(0,Z.useEffect)(()=>{ac(r),sc(r.space.id,r.teamLicenseType),aa(),Object.entries(ic).forEach(([D,W])=>{let fe=Array.isArray(W)?W:[W];for(let me of fe)H("gradual_rollout",{experiment:Yo.getVariantName(D)??D,enabled:Yo.is(D,me.variant),sampleSize:me.sample,scope:me.scope,includeEnterprise:me.includeEnterprise??!1})}),i.processWhenReady(()=>{i.signalNonUserEvent(),i.projectStore.project=r})},[r]);let[a,c]=(0,Z.useState)(!1),[d,p]=(0,Z.useState)(!1),l=Um(Fs().api,_y),s=i.sessionStore.useState(D=>D.user);(0,Z.useEffect)(()=>void l.fetchMe(),[]);let[m,f]=(0,Z.useState)(null),[h,u]=(0,Z.useState)(null),[b,v]=(0,Z.useState)(!1),w=(0,Z.useCallback)(D=>{i.popover.active=D},[]),{publishStatus:P,defaultHostname:x,customHostname:C,defaultHostnameDeployment:k,customHostnameDeployment:S,deploymentStrategy:R}=i.publishStore.useState(),{active:L}=i.popover.useState(),E=D=>W=>{W.preventDefault(),W.stopPropagation(),D()},$=Yo.isOn("panelSearch"),ee=pf(D=>{let W=No("showPreview");A(W,"togglePreviewVisible key binding is not set"),D(W,E(()=>{Pr()&&document.activeElement instanceof HTMLElement&&document.activeElement.blur(),setTimeout(()=>{i.runBeforeNextFrame(()=>Sr(i))})}),"Toggle Preview");let fe=No("goBack");A(fe,"goBackKeyBinding key binding is not set"),D(fe,E(np),"Go Back");let me=No("goForward");A(me,"goForwardKeyBinding key binding is not set"),D(me,E(ip),"Go Forward");let Wo=No("previewNextBreakpoint");A(Wo,"previewNextBreakpoint key binding is not set"),D(Wo,E(()=>Ca(i,1)),"Next Breakpoint");let Ro=No("previewPreviousBreakpoint");A(Ro,"previewPreviousBreakpoint key binding is not set"),D(Ro,E(()=>Ca(i,-1)),"Previous Breakpoint");let Ht=No("openFullScreen");A(Ht,"openFullScreen key binding is not set"),D(Ht,E(()=>Nn().openFullScreen()),"Present Preview");let Hr=No("toggleHighlightsInLivePreview");A(Hr,"toggleHighlightsInLivePreview key binding is not set"),D(Hr,E(()=>i.previewStore.toggleHighlights()),"Show Interaction Highlights");let Xe=No("toggleConsole");A(Xe,"toggleConsole key binding is not set"),D(Xe,E(()=>Nn().toggleConsole()),"Toggle Preview Console");let hr=No("reload");A(hr,"reload key binding is not set"),D(hr,E(()=>Nn().reload()),"Reset Preview"),D("CommandOrControl+S",E(()=>{Pr()||i.chromeStore.mainView===0&&T({type:"add",variant:"success",icon:"success",text:"Framer automatically saves your work",key:"auto-save-toast"})}),"Save"),$&&D("CommandOrControl+F",E(()=>{i.chromeStore.mainView===0&&i.chromeStore.leftPanel===0&&Xi&&Xi.dispatch({action:"openPanelSearch"})}),"Open Panel Search")},[$]),Q=i.documentSettings.isNewlyCreatedProject,te=e.aclById[r.owner.id],K=xo.isOn("skipInterstitial"),U=e.aclById[s.id]?.role||r.userRole,oe=U==="viewer",we=U==="owner",Ne=U==="viewer",[Re,Ke]=(0,Z.useState)(Qt(r)&&!Q);xo.update(r.canvasFeatures);let J=(0,Z.useMemo)(()=>s.spaces.find(D=>D.id===r.space.id),[r.space.id,s.spaces]),Ce=(0,Z.useMemo)(()=>s.spaces.filter(to),[s.spaces]),Ve=(0,Z.useRef)(!0);(0,Z.useEffect)(()=>{if(Ve.current){Ve.current=!1;return}t.refresh().catch(q)},[J,t]);let{canMoveProject:qo,availableCollectionsByTeamId:zr}=Hm({project:r,user:s});ff({channel:Lo,project:r,canMoveProject:qo,onShowMoveProjectMenu:Ji}),(0,Z.useEffect)(()=>{aa(),r.teamExperiments&&Yo.update(r.teamExperiments);let D=oc(nc).filter(W=>!Yo.isOff(W)).map(W=>Yo.getVariantName(W)).sort().join(",");H("experiments_enabled_on_load",{on:D})},[r.teamExperiments]),(0,Z.useEffect)(()=>{let D=r.settings.featureFlags,W=to(J)?J.license.featureFlags:{};Mn.update({...W,...D})},[J,r.settings.featureFlags]),(0,Z.useEffect)(()=>{u(null)},[r.space,r.collection]);let wt=Wu(i),xt=i.pluginStore.useState(D=>D.isLoading);(0,Z.useEffect)(()=>{r.space.scope!=="user"&&wt&&(xt||i.processWhenReady(()=>i.pluginStore.openPreparedPlugin(i)))},[r.space.scope,wt,xt]),(0,Z.useEffect)(()=>{i.processWhenReady(()=>{i.signalNonUserEvent(),i.chromeStore.isPreviewingFeaturedTemplate=te?.user.isFramerEmployee===!0&&K&&oe})},[K,te?.user.isFramerEmployee,oe]);let{isPreviewingFeaturedTemplate:zt,permissionsDidLoad:Ms}=Vo([i.chromeStore,i.projectStore],()=>({isPreviewingFeaturedTemplate:i.chromeStore.isPreviewingFeaturedTemplate,permissionsDidLoad:i.projectStore.acl.length>0&&i.chromeStore.hasReceivedUserPermissions})),et=oe||r.archived||zt,Ot=i.modalStore.useState(),Mo=(0,Z.useRef)(!1);(0,Z.useEffect)(()=>{if(r.space.scope==="organization"||et||r.owner.id!==s.id||i.modalStore.isVisible())return;if(!s.spaces.some(W=>to(W)&&W.permissions.write)){i.processWhenReady(()=>i.modalStore.set({type:"CreateTeam",source:"automatic"})),Mo.current=!0;return}Mo.current||Hn.defaultProjectLocation.then(({defaultTeam:W})=>{if(!W?.id)return;let{displayName:fe,id:me}=W;u({teamId:me,destinationLabel:Gh(`${fe} / All`),spaceName:fe})}).catch($h.reportError).finally(()=>{i.modalStore.set({type:"DeprecatedDrafts",source:"automatic"}),Mo.current=!0})},[et,r.space.scope,Ot,s.spaces]);let Qi=(et||oo(r.space))&&!Ln(),Rs=Re&&!Ln(),Or=oo(J)&&we||to(J)&&J.permissions.write&&!oe;async function Ts(){let[,D]=at.extract(ya(r.title));H("ui_interaction",{page:"project-menu-bar",id:"archive-project"});try{await o.updateProject({archived:!0},!1),T({type:"add",variant:"success",key:`archive-${r.id}`,text:`Archived ${D}`,icon:"success",duration:3e3})}catch(W){W instanceof ba&&W.status===409&&W.data.reason==="project_has_active_subscription"?T({type:"add",variant:"error",key:`archive-${r.id}-active-subscription-error`,text:"Unable to archive a project with an active subscription. Cancel the subscription and try again.",duration:1/0}):W instanceof ba&&W.status===409&&W.data.reason==="project_has_custom_domain_attached"?T({type:"add",variant:"error",key:`archive-${r.id}-custom-domain-attached-error`,text:"Unable to archive a project with a custom domain attached. Remove the domain and try again.",duration:1/0}):T({type:"add",variant:"error",key:`archive-${r.id}`,text:`Failed to archive ${D}`,icon:"error",duration:3e3}),f(null);return}o.wait(()=>{window.location.href=Kt})}function Xh(){r.space.scope==="organization"?f(r):Ts()}let Ki=(0,Z.useCallback)(async()=>{H("ui_interaction",{page:"canvas-unarchive-toast",id:"unarchive-project"});try{await o.updateProject({archived:!1}),T({type:"add",variant:"success",key:`unarchived-${r.id}`,text:"This project has been unarchived",icon:"success"})}catch{T({type:"add",variant:"error",key:`unarchived-${r.id}`,text:"Failed to unarchive project",icon:"error"})}},[o,r.id]);async function Jh(){H("ui_interaction",{page:"project-menu-bar",id:"save-template-as-project"});let D=`save-as-project-${r.id}`;try{await o.updateProject({type:"default"}),Ke(!1),T({type:"add",variant:"success",key:D,text:"This project is no longer a template",icon:"success",duration:3e3})}catch{T({type:"add",variant:"error",key:D,text:"This template could not be converted to a project",icon:"error",duration:3e3})}}let fr="view-only-access",{isShowingRecommendedTeamToast:eb}=Nh({isUserPartOfTeam:typeof J<"u",api:l,projectTeamId:r.space.ownerId,autoJoinDefaultRole:r.settings.featureFlags.canInviteEditors==="on"?r.settings.autoJoinDefaultRole:"viewer"}),ob=Qi&&!oo(r.space)&&Ne&&!r.archived&&!eb&&!zt?fr:void 0,As=Uh({project:r,isUserPartOfTeam:typeof J<"u",isUserEditorInTeam:typeof J<"u"&&J.permissions.write,toastKey:ob,api:o}),tb=(0,Z.useCallback)(()=>{w(1)},[w]);Hh({shouldShowToast:L!==1,accessRequests:e.accessRequests,onReviewRequests:tb}),Wh({disabled:!Ms||Ne||oo(r.space)});let rb=Dn(s,r);(0,Z.useEffect)(()=>{Qi?r.archived?T({key:fr,variant:"info",text:`This file is archived and view-only. ${Or?"Unarchive the file to edit.":""}`,action:Or?{title:"Unarchive",onClick:Ki}:void 0,type:"add",icon:"view-only",duration:1/0,permanent:!0}):zt&&T({key:fr,type:"add",variant:"prominent-info",icon:"view-only",text:"You\u2019re previewing a view-only version of this template",duration:1/0,permanent:!0,action:{title:"Use Template",onClick:()=>uo(Bs({duplicateFrom:r.id}))}}):!Q&&Rs?T({key:fr,type:"add",variant:"info",icon:"warning",text:"You\u2019re viewing a template project",duration:1/0,showCloseButton:"never",action:et?void 0:{title:"Edit Template",onClick:()=>Ke(!1)}}):T({key:fr,type:"remove"})},[Qi,r.archived,Ki,Or,Q,Rs,et,r.id,r.space,zt,rb]),sf(ya(r.title));let Xi=Uf({channel:Lo});bf({user:s,channel:Lo,permissions:{isViewOnly:et||Re||oo(r.space)}});let nb=Of({channel:Lo});(0,Z.useEffect)(()=>{wt&&Ss&&i.feedbackStore.openThread(Ss.threadId,Ss.commentId).catch(()=>{$h.reportError("Failed to open feedback thread via url")})},[wt]);let ib=i.toolStore.useState(D=>D.feedbackModeActive);Nf({toast:T,userNotifications:nb,isFeedbackActive:ib}),Ff({toast:T,isDocumentLoaded:a,action:async D=>D==="subscribe"?o.subscribeToNotifications():o.unsubscribeFromNotifications()}),(0,Z.useEffect)(()=>{rd.init({userId:s.id,appVersion:cl,projectId:r.id}),i.processWhenReady(()=>{s.id&&(i.documentSettings.currentUserId=s.id),s.email&&(i.documentSettings.currentUserEmail=s.email),s.spaces&&(i.documentSettings.spaces=s.spaces)})},[r.id,s.email,s.id,s.spaces]);let ab=uf();Dp(D=>{D(sd,()=>{setTimeout(()=>c(!0))}),D(cd,async W=>{if(!W)return;let fe=`renamed-${r.id}`;try{await o.updateProject({title:W})}catch{T({type:"add",variant:"error",key:fe,text:"Failed to update project name",icon:"error"})}})});let sb=Z.default.useCallback(async()=>{Cm({insertPanel:!0,spaceId:J?.id},!0).catch(q)},[J?.id]),cb=Z.default.useCallback(async()=>{uo(xm(r))},[r]);Ef({appMenu:i.chromeStore.displayMinimalUI?_a.mobileWebAppMenu:_a.webAppMenu,archiveProject:Xh,onPreviewToggle(){Sr(i)},filePickerRef:n,openAccountSettings:Es,onUploadMediaFilePick:ab,menuActionTargetService:Xi,saveTemplateAsProject:Jh,project:r,toast:T,unarchiveProject:Ki,user:s,userCanArchive:Or,handleNewProject:sb,handleProjectDuplication:cb}),dp({globalKeyBindings:ee});async function lb(D){H("ui_interaction",{page:"project-menu-bar",id:"change-access"});try{await o.updateProject({publicAccess:D})}catch{T({type:"add",variant:"error",key:`access-change-${r.id}`,text:"Failed to change the access level of this project",icon:"error"})}}function db(){H("ui_interaction",{page:"project-menu-bar",id:"copy-link"})}function pb(D,W){if(!qo||et)return[];let fe=[];for(let me in zr){let Wo=zr[me];A(Wo,"Team should have available collections");let{displayName:Ro,collections:Ht}=Wo,Hr=Ht.map(Xe=>{let[hr,js]=at.extract(Xl(Xe));return{label:js,click:()=>{Ls({teamId:me,destinationLabel:`${Ro} / ${js}`,collection:Xe,spaceName:Ro,skipConfirmation:D})},checked:h&&D?h.teamId===me&&(h.collection?.id===Xe.id||!h.collection&&Xe.id==="recent"):r.space.ownerId===me&&(r.collection?.id===Xe.id||!r.collection&&Xe.id==="recent"),value:{spaceId:me,collection:Xe},icon:hr?{src:hr,height:15,width:15}:void 0}});if(Ro!==""){let Xe=Gh(Ro);fe.push({label:Xe,submenu:Hr,checked:h&&D?h.teamId===me:r.space.ownerId===me,click:()=>void Ls({teamId:me,destinationLabel:Xe,spaceName:Ro,skipConfirmation:D})})}else fe.push({label:"Drafts",checked:h&&D?h.teamId===me:r.space.ownerId===me,enabled:!1,visible:!W})}return[{label:"Move to\u2026",enabled:!1},...fe]}function Ji(D){let{location:W,skipConfirmation:fe,hideDrafts:me}=D,Wo=pb(fe,me);i.contextMenuStore.show(Wo,{location:W,className:`${cf} ${Ql}`})}let mb=(0,Z.useCallback)(()=>{i.siteSettings.setActiveTab({tab:"plans"}).catch(q)},[]),gr=async({teamId:D,destinationLabel:W,collection:fe,dismissModal:me=!0})=>{let Wo=fe&&fe.id!=="personal"&&fe.id!=="recent"?fe.id:null,Ro="move-project-toast";try{await o.updateProject({teamId:D,collectionId:Wo}),r.space.ownerId!==D&&await o.getACL(),T({type:"add",variant:"success",icon:"success",text:at.removeFromText(`Project moved to ${W}`),key:Ro})}catch(Ht){jm({err:Ns(Ht),targetTeamId:D,projectId:r.id,projectTitle:r.title,destination:W,onClickOpenPlans:mb})}v(!1),me&&(w(0),i.modalStore.dismiss())};async function Ls(D){let W=r.collection?.id??"recent";if(!(D.collection?.id===W&&D.teamId===r.space.ownerId)){if(r.space.ownerId!==D.teamId){if(u(D),D.skipConfirmation)return;v(!0);return}await gr(D)}}let Ds=()=>{u(null),v(!1)},ub=()=>{f(null)};function Es(){p(!d)}function fb(D){window.location.href=`${Kt}?team=${D.id}&open-settings=1`}function gb(){if(!s.isOnLatestTerms)return Ot.active.type==="CompleteSignup"?(0,lo.jsx)(af,{accountApi:l}):(0,lo.jsx)(Vm,{fetchMe:l.fetchMe});if(Ot.active.type==="DeprecatedDrafts")return(0,lo.jsx)(Xu,{user:s,project:r,onShowMoveProjectMenu:Ji,moveProjectDestination:h?.destinationLabel,onConfirmMoveProject:async()=>{h&&await gr({...h,dismissModal:!1})},onDismiss:()=>i.modalStore.set({type:"None",source:"automatic"})});if(Ot.active.type==="CreateTeam")return(0,lo.jsx)(zy,{user:s,api:l,noEditRights:!0,onComplete:async D=>{let W=s.spaces.find(fe=>fe.ownerId===D);to(W)&&await gr({teamId:W.ownerId,destinationLabel:W.displayName,dismissModal:!0})}});if(m)return(0,lo.jsx)(Om,{action:"archive",project:m,onConfirm:Ts,onClose:ub});if(h&&b)return(0,lo.jsx)(Em,{isMovedFromDrafts:oo(r.space),teamName:h.spaceName,onCancel:Ds,onConfirm:()=>gr(h),onDismiss:Ds});if(d)return(0,lo.jsx)(Uy,{userWorkspaces:Ce,onOpenWorkspaceSettings:fb,api:l,onDismiss:Es});if(As)return As}let ea=(0,Z.useMemo)(()=>J?to(J)?J.ownerId:null:r.space.scope==="user"||r.userRole==="prototypeViewer"||r.userRole==="viewer"?null:r.space.ownerId,[J,r.space.ownerId,r.space.scope,r.userRole]);return(0,Z.useEffect)(()=>{ea&&i.libraryStore.getLibraryForTeam(ea).catch(q)},[ea]),Nm(J?.ownerId),(0,lo.jsxs)(jh,{children:[(0,lo.jsx)(Eh,{projectState:e,user:s,activePopover:L,onActivePopoverChange:w,onAccessChange:lb,onCopyProjectURL:db,onShowMoveProjectMenu:Ji,moveProjectDestination:h?.destinationLabel,onConfirmMoveProject:async()=>{h&&await gr({...h,dismissModal:!1})},onPublish:Oy,publishStatus:P,canPublish:i.publishStore.canPublish(i),onUpdateCustomDomain:Hy,defaultHostname:x,customHostname:C,defaultHostnameDeployment:k,customHostnameDeployment:S,deploymentStrategy:R}),(0,lo.jsx)(Zl,{children:gb()}),(0,lo.jsx)(ap,{project:r})]})}var vt=y(I()),Zh=(0,De.memo)(function({documentConnection:o,projectId:t}){let n=i.projectStore.useState(C=>C.teamSyncAction),r=(0,De.useRef)(!0),a=(0,De.useRef)(!1),c=i.sessionStore.useState(C=>C.user);if(!t)throw Error("Can\u2019t find project id");if(!xo.isOn("sites"))throw Mm;Am(),Lm(),Dm(c.id,t),Tm(t),Ru();let d=Sm(t),p=i.treeStore.getSocketURL(d),l=Gd({url:p,documentConnection:o,tunnel:ad()}),s=l.onConnect(()=>{a.current||(Pn("wsConnection"),s?.(),s=void 0,a.current=!0)});i.remoteDocument?.setSocket(l),i.publishStore.initialize(t,l),i.previewStore.initialize(t);let[m,f]=ju(t,l),h=Pm(l,m,f),u=qy(),b=ko(()=>new Zs(h));(0,De.useEffect)(()=>{i.assetStore.setAssetService(b),zs.on(Lo).register(b),b.refresh().catch(q)},[b]);let v=(0,De.useRef)(null);(0,De.useEffect)(()=>{gd(i,b,v)},[b]),(0,De.useEffect)(()=>{ld(h,b)},[h,b]);let w=ko(()=>new wm(h,l));(0,De.useEffect)(()=>Os.on(Lo).register(w),[]),Bu({api:h,channel:Lo}),Vu({channel:Lo,toast:T}),(0,De.useEffect)(()=>{i.feedbackStore.initialize(i).catch(q)},[]),(0,De.useEffect)(()=>{h.setInitialProject(Hn.project)},[h]),(0,De.useEffect)(()=>l.onMessage(C=>{if(C.type!=="notifyProjectChange")return;let{scope:k}=C.value;k==="acl"?h.getACL():k==="assets"?b.refresh().catch(q):k==="metadata"?h.getProject():k==="sites"?i.publishStore.loadHostnames().catch(q):k==="settings"&&i.publishStore.loadProjectSettings().catch(q)}),[h,b,l]);let{isDarkMode:P}=ro();(0,De.useEffect)(()=>{i.remoteUsers.setDarkMode(P)},[P]),(0,De.useEffect)(()=>{if(!i.projectStore.project||i.projectStore.projectLicenseType==="freeSite"||!r.current)return;r.current=!1;let C=i.projectStore.project.space,k=C.scope==="organization"?C.ownerId:null,S=n&&k,R=c.spaces.find(({id:E})=>E===C.id),L=to(R)&&["admin","editor"].includes(R.role);S&&(["chargeableSync","reactivate"].includes(n)&&i.processWhenReady(()=>{i.loadingStore.blockedDueToInvalidSubscription=!0,i.modalStore.set({type:"SubscriptionNotInOrder",source:"settings",teamSyncAction:n,teamId:k,canReactivate:L})}),n==="sync"&&L&&Up(k))},[n]);let{handleProjectOpenEvent:x}=Ym();return(0,De.useEffect)(()=>{m.project&&x({projectId:m.project.id,projectLicenseType:m.project.license.type,teamId:m.project.space.ownerId,teamLicenseType:m.project.teamLicenseType??"free"})},[m.project]),(0,vt.jsx)(Vp.Provider,{value:Fp(h),children:(0,vt.jsxs)(pp,{component:Du,children:[(0,vt.jsx)(Ou,{socket:l,projectId:t,userId:c.id,documentConnection:o}),(0,vt.jsx)(Nl,{mode:u,children:m.project&&(0,vt.jsx)(Yh,{projectState:m,api:h,assetService:b,filePickerRef:v})}),(0,vt.jsx)(jp,{ref:v})]})})});function qy(){return er(()=>{let e=i.overlayStore.editModeActive;if(Nd(i.scopeStore.active))return e?"componentOverlayEditMode":"component"},[],[i.overlayStore,i.scopeStore])}var Ur,Ut,yt,Zi=class{constructor(o){this.documentHandler=o;_r(this,Ur);_r(this,Ut,{});_r(this,yt,null);Oe(this,"socketStats",null)}get treeSchema(){return this.documentHandler.treeSchema}get treeVersion(){return this.documentHandler.treeVersion()}setSendFunction(o){qr(this,yt,o)}sendMessage(o){$o(this,yt)&&$o(this,yt).call(this,o)}onConnect(){this.documentHandler.setRemoteConnection(this)}onDisconnect(o){this.documentHandler.setRemoteConnectionFailure(o)}onMessage(o){switch(o.type){case"lock":this.documentHandler.handleLock(o.id,o.value);break;case"state":o.id===$o(this,Ur)&&Object.assign($o(this,Ut),o.value);break;case"treeMessage":this.documentHandler.handleTreeMessage(o.id,o.value);break;case"treeUpdate":this.documentHandler.handleTreeUpdate(o.id,o.value);break;case"treeVerify":this.documentHandler.handleTreeVerify(o.value);break;case"welcome":{let{userId:t,userStates:n,protocolVersion:r}=o.value;qr(this,Ur,t),qr(this,Ut,{...n[t]}),r&&r>$d&&T({type:"add",variant:"warning",key:"outdated-client",text:"A new version of Framer is available.",duration:1/0});break}}}setSocketStats(o){this.socketStats=o}rtt(){return this.socketStats?this.socketStats.rtt():NaN}updateUserState(o){if(!$o(this,yt))return;let t=!1,n={};for(let r of Object.keys(o))o[r]!==void 0&&(qt(o[r],$o(this,Ut)[r],!0)||(n[r]=o[r],t=!0));t&&(Object.assign($o(this,Ut),n),$o(this,yt).call(this,{type:"state",value:n}))}};Ur=new WeakMap,Ut=new WeakMap,yt=new WeakMap;var Jo=y(I());Rm();Im();var Wy=window.framerUser.id,Is=window.bootstrap?.project?.id;A(Is,"Can\u2019t find project id");var Qh=i.createRemoteDocumentHandler(Is,Wy),Kh=new Zi(Qh);Qh.setRemoteConnection(Kh);Qd((0,Jo.jsx)(al.Provider,{value:i,children:(0,Jo.jsx)(Su,{children:(0,Jo.jsx)(cp,{children:(0,Jo.jsxs)(_n,{location:"project",title:"Failed to load project",description:(0,Jo.jsx)(_,{children:"Something unexpected happened on our end while loading the project."}),children:[(0,Jo.jsx)(Zh,{documentConnection:Kh,projectId:Is}),(0,Jo.jsx)(ym,{})]})})})}),document.getElementById("root"));
/*! Bundled license information:

react-google-recaptcha-v3/dist/react-google-recaptcha-v3.esm.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

react-google-recaptcha-v3/dist/react-google-recaptcha-v3.esm.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
//# sourceMappingURL=https://app.framerstatic.com/web.JNBPNFDZ.mjs.map
